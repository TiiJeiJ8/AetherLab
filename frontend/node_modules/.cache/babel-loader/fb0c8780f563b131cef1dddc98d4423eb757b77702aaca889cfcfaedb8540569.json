{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers, vModelRadio as _vModelRadio, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelText as _vModelText, vModelSelect as _vModelSelect, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"data-mapping-panel\"\n};\nconst _hoisted_2 = {\n  class: \"panel-header\"\n};\nconst _hoisted_3 = {\n  class: \"panel-controls\"\n};\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  class: \"mapping-sections\"\n};\nconst _hoisted_6 = {\n  class: \"section-header\"\n};\nconst _hoisted_7 = {\n  class: \"section-title\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"section-info\"\n};\nconst _hoisted_9 = [\"onDrop\", \"onDragover\"];\nconst _hoisted_10 = {\n  key: 0,\n  class: \"drop-placeholder\"\n};\nconst _hoisted_11 = {\n  class: \"placeholder-text\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"mapped-items\"\n};\nconst _hoisted_13 = {\n  class: \"item-info\"\n};\nconst _hoisted_14 = {\n  class: \"file-name\"\n};\nconst _hoisted_15 = {\n  class: \"column-name\"\n};\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n  class: \"mapping-section\"\n};\nconst _hoisted_18 = {\n  class: \"filter-options\"\n};\nconst _hoisted_19 = {\n  class: \"filter-type\"\n};\nconst _hoisted_20 = {\n  class: \"filter-type\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"range-inputs\"\n};\nconst _hoisted_22 = {\n  class: \"filter-type\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"condition-inputs\"\n};\nconst _hoisted_24 = [\"value\"];\nconst _hoisted_25 = {\n  class: \"mapping-section\"\n};\nconst _hoisted_26 = {\n  class: \"section-header\"\n};\nconst _hoisted_27 = {\n  key: 0,\n  class: \"data-preview\"\n};\nconst _hoisted_28 = {\n  class: \"preview-stats\"\n};\nconst _hoisted_29 = {\n  class: \"preview-table\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[16] || (_cache[16] = _createElementVNode(\"h3\", null, \"Data Mapping\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    class: _normalizeClass([\"toggle-btn\", {\n      active: $setup.realTimeRender\n    }]),\n    onClick: $setup.toggleRealTimeRender\n  }, _toDisplayString($setup.realTimeRender ? 'Real-time' : 'Manual'), 3 /* TEXT, CLASS */), _createElementVNode(\"button\", {\n    class: \"render-btn\",\n    onClick: $setup.renderChart,\n    disabled: $setup.realTimeRender || !$setup.canRender\n  }, \" Render \", 8 /* PROPS */, _hoisted_4)])]), _createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" 图表类型相关配置 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chartConfigs, config => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"mapping-section\",\n      key: config.key\n    }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString(config.title), 1 /* TEXT */), config.required ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, \"*\")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", {\n      class: _normalizeClass([\"drop-zone\", {\n        'drag-over': $setup.dragOverZone === config.key,\n        'has-data': $setup.mappedData[config.key]?.length > 0\n      }]),\n      onDrop: $event => $setup.handleDrop($event, config.key),\n      onDragover: _withModifiers($event => $setup.handleDragOver(config.key), [\"prevent\"]),\n      onDragleave: $setup.handleDragLeave\n    }, [$setup.mappedData[config.key]?.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_cache[17] || (_cache[17] = _createElementVNode(\"span\", {\n      class: \"placeholder-icon\"\n    }, \"📊\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_11, \"Drop \" + _toDisplayString(config.title) + \" here\", 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.mappedData[config.key], (item, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: \"mapped-item\",\n        style: _normalizeStyle({\n          backgroundColor: item.color\n        })\n      }, [_createElementVNode(\"span\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, _toDisplayString(item.fileName), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_15, _toDisplayString(item.columnName), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n        class: \"remove-item-btn\",\n        onClick: $event => $setup.removeMapping(config.key, index)\n      }, \" × \", 8 /* PROPS */, _hoisted_16)], 4 /* STYLE */);\n    }), 128 /* KEYED_FRAGMENT */))]))], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_9)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" 数据过滤选项 \"), _createElementVNode(\"div\", _hoisted_17, [_cache[24] || (_cache[24] = _createElementVNode(\"div\", {\n    class: \"section-header\"\n  }, [_createElementVNode(\"span\", {\n    class: \"section-title\"\n  }, \"Data Filtering\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.filterType = $event),\n    value: \"all\",\n    onChange: _cache[1] || (_cache[1] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelRadio, $setup.filterType]]), _cache[18] || (_cache[18] = _createTextVNode(\" All Rows \"))])]), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.filterType = $event),\n    value: \"range\",\n    onChange: _cache[3] || (_cache[3] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelRadio, $setup.filterType]]), _cache[19] || (_cache[19] = _createTextVNode(\" Range \"))]), $setup.filterType === 'range' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.rangeStart = $event),\n    placeholder: \"Start\",\n    onInput: _cache[5] || (_cache[5] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.rangeStart, void 0, {\n    number: true\n  }]]), _cache[20] || (_cache[20] = _createElementVNode(\"span\", null, \"-\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.rangeEnd = $event),\n    placeholder: \"End\",\n    onInput: _cache[7] || (_cache[7] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.rangeEnd, void 0, {\n    number: true\n  }]])])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.filterType = $event),\n    value: \"condition\",\n    onChange: _cache[9] || (_cache[9] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelRadio, $setup.filterType]]), _cache[21] || (_cache[21] = _createTextVNode(\" Condition \"))]), $setup.filterType === 'condition' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.conditionColumn = $event),\n    onChange: _cache[11] || (_cache[11] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, [_cache[22] || (_cache[22] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Select Column\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.availableColumns, col => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: col.id,\n      value: col.id\n    }, _toDisplayString(col.fileName) + \".\" + _toDisplayString(col.columnName), 9 /* TEXT, PROPS */, _hoisted_24);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.conditionColumn]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => $setup.conditionOperator = $event),\n    onChange: _cache[13] || (_cache[13] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, _cache[23] || (_cache[23] = [_createStaticVNode(\"<option value=\\\"&gt;\\\" data-v-efd5c260>&gt;</option><option value=\\\"&lt;\\\" data-v-efd5c260>&lt;</option><option value=\\\"=\\\" data-v-efd5c260>equals</option><option value=\\\"!=\\\" data-v-efd5c260>not equals</option><option value=\\\"contains\\\" data-v-efd5c260>contains</option>\", 5)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.conditionOperator]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[14] || (_cache[14] = $event => $setup.conditionValue = $event),\n    placeholder: \"Value\",\n    onInput: _cache[15] || (_cache[15] = (...args) => $setup.updateFilter && $setup.updateFilter(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.conditionValue]])])) : _createCommentVNode(\"v-if\", true)])])]), _createCommentVNode(\" 数据预览 \"), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_cache[25] || (_cache[25] = _createElementVNode(\"span\", {\n    class: \"section-title\"\n  }, \"Data Preview\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    class: \"preview-toggle-btn\",\n    onClick: $setup.togglePreview\n  }, _toDisplayString($setup.showPreview ? 'Hide' : 'Show'), 1 /* TEXT */)]), $setup.showPreview ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"span\", null, _toDisplayString($setup.previewData.length) + \" rows\", 1 /* TEXT */), _createElementVNode(\"span\", null, _toDisplayString(Object.keys($setup.previewData[0] || {}).length) + \" columns\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_29, [_createElementVNode(\"table\", null, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.previewData[0], (value, key) => {\n    return _openBlock(), _createElementBlock(\"th\", {\n      key: key\n    }, _toDisplayString(key), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.previewData.slice(0, 5), (row, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(row, (value, key) => {\n      return _openBlock(), _createElementBlock(\"td\", {\n        key: key\n      }, _toDisplayString(value), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_normalizeClass","active","$setup","realTimeRender","onClick","toggleRealTimeRender","renderChart","disabled","canRender","_hoisted_4","_hoisted_5","_createCommentVNode","_Fragment","_renderList","chartConfigs","config","_hoisted_6","_hoisted_7","_toDisplayString","title","required","_hoisted_8","dragOverZone","mappedData","length","onDrop","$event","handleDrop","onDragover","_withModifiers","handleDragOver","onDragleave","handleDragLeave","_hoisted_10","_hoisted_11","_hoisted_12","item","index","style","_normalizeStyle","backgroundColor","color","_hoisted_13","_hoisted_14","fileName","_hoisted_15","columnName","removeMapping","_hoisted_16","_hoisted_9","_hoisted_17","_hoisted_18","_hoisted_19","type","_cache","filterType","value","onChange","args","updateFilter","_createTextVNode","_hoisted_20","_hoisted_21","rangeStart","placeholder","onInput","number","rangeEnd","_hoisted_22","_hoisted_23","conditionColumn","availableColumns","col","id","_hoisted_24","conditionOperator","_createStaticVNode","conditionValue","_hoisted_25","_hoisted_26","togglePreview","showPreview","_hoisted_27","_hoisted_28","previewData","Object","keys","_hoisted_29","slice","row"],"sources":["D:\\Learning Material\\Git\\Fuck-Charts\\newArchitecture\\frontend_vue_design\\src\\components\\DataMappingPanel.vue"],"sourcesContent":["<template>\n  <div class=\"data-mapping-panel\">\n    <div class=\"panel-header\">\n      <h3>Data Mapping</h3>\n      <div class=\"panel-controls\">\n        <button \n          class=\"toggle-btn\"\n          @click=\"toggleRealTimeRender\"\n          :class=\"{ active: realTimeRender }\">\n          {{ realTimeRender ? 'Real-time' : 'Manual' }}\n        </button>\n        <button \n          class=\"render-btn\"\n          @click=\"renderChart\"\n          :disabled=\"realTimeRender || !canRender\">\n          Render\n        </button>\n      </div>\n    </div>\n\n    <div class=\"mapping-sections\">\n      <!-- 图表类型相关配置 -->\n      <div class=\"mapping-section\" v-for=\"config in chartConfigs\" :key=\"config.key\">\n        <div class=\"section-header\">\n          <span class=\"section-title\">{{ config.title }}</span>\n          <span class=\"section-info\" v-if=\"config.required\">*</span>\n        </div>\n        <div \n          class=\"drop-zone\"\n          :class=\"{ \n            'drag-over': dragOverZone === config.key,\n            'has-data': mappedData[config.key]?.length > 0\n          }\"\n          @drop=\"handleDrop($event, config.key)\"\n          @dragover.prevent=\"handleDragOver(config.key)\"\n          @dragleave=\"handleDragLeave\">\n          \n          <div v-if=\"mappedData[config.key]?.length === 0\" class=\"drop-placeholder\">\n            <span class=\"placeholder-icon\">📊</span>\n            <span class=\"placeholder-text\">Drop {{ config.title }} here</span>\n          </div>\n          \n          <div v-else class=\"mapped-items\">\n            <div \n              v-for=\"(item, index) in mappedData[config.key]\" \n              :key=\"index\"\n              class=\"mapped-item\"\n              :style=\"{ backgroundColor: item.color }\">\n              <span class=\"item-info\">\n                <span class=\"file-name\">{{ item.fileName }}</span>\n                <span class=\"column-name\">{{ item.columnName }}</span>\n              </span>\n              <button \n                class=\"remove-item-btn\"\n                @click=\"removeMapping(config.key, index)\">\n                ×\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 数据过滤选项 -->\n      <div class=\"mapping-section\">\n        <div class=\"section-header\">\n          <span class=\"section-title\">Data Filtering</span>\n        </div>\n        <div class=\"filter-options\">\n          <div class=\"filter-type\">\n            <label>\n              <input \n                type=\"radio\" \n                v-model=\"filterType\" \n                value=\"all\"\n                @change=\"updateFilter\">\n              All Rows\n            </label>\n          </div>\n          <div class=\"filter-type\">\n            <label>\n              <input \n                type=\"radio\" \n                v-model=\"filterType\" \n                value=\"range\"\n                @change=\"updateFilter\">\n              Range\n            </label>\n            <div v-if=\"filterType === 'range'\" class=\"range-inputs\">\n              <input \n                type=\"number\" \n                v-model.number=\"rangeStart\" \n                placeholder=\"Start\"\n                @input=\"updateFilter\">\n              <span>-</span>\n              <input \n                type=\"number\" \n                v-model.number=\"rangeEnd\" \n                placeholder=\"End\"\n                @input=\"updateFilter\">\n            </div>\n          </div>\n          <div class=\"filter-type\">\n            <label>\n              <input \n                type=\"radio\" \n                v-model=\"filterType\" \n                value=\"condition\"\n                @change=\"updateFilter\">\n              Condition\n            </label>\n            <div v-if=\"filterType === 'condition'\" class=\"condition-inputs\">\n              <select v-model=\"conditionColumn\" @change=\"updateFilter\">\n                <option value=\"\">Select Column</option>\n                <option \n                  v-for=\"col in availableColumns\" \n                  :key=\"col.id\"\n                  :value=\"col.id\">\n                  {{ col.fileName }}.{{ col.columnName }}\n                </option>\n              </select>\n              <select v-model=\"conditionOperator\" @change=\"updateFilter\">\n                <option value=\">\">&gt;</option>\n                <option value=\"<\">&lt;</option>\n                <option value=\"=\">equals</option>\n                <option value=\"!=\">not equals</option>\n                <option value=\"contains\">contains</option>\n              </select>\n              <input \n                type=\"text\" \n                v-model=\"conditionValue\" \n                placeholder=\"Value\"\n                @input=\"updateFilter\">\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 数据预览 -->\n      <div class=\"mapping-section\">\n        <div class=\"section-header\">\n          <span class=\"section-title\">Data Preview</span>\n          <button \n            class=\"preview-toggle-btn\"\n            @click=\"togglePreview\">\n            {{ showPreview ? 'Hide' : 'Show' }}\n          </button>\n        </div>\n        <div v-if=\"showPreview\" class=\"data-preview\">\n          <div class=\"preview-stats\">\n            <span>{{ previewData.length }} rows</span>\n            <span>{{ Object.keys(previewData[0] || {}).length }} columns</span>\n          </div>\n          <div class=\"preview-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th v-for=\"(value, key) in previewData[0]\" :key=\"key\">\n                    {{ key }}\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(row, index) in previewData.slice(0, 5)\" :key=\"index\">\n                  <td v-for=\"(value, key) in row\" :key=\"key\">\n                    {{ value }}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { useChartMapping } from '../composables/useChartMapping'\nimport { useDataFiltering } from '../composables/useDataFiltering'\n\nconst props = defineProps({\n  selectedChartType: {\n    type: String,\n    default: 'line'\n  },\n  workspaceFiles: {\n    type: Array,\n    default: () => []\n  }\n})\n\nconst emit = defineEmits(['chart-updated', 'mapping-changed'])\n\n// 图表映射配置\nconst { \n  chartConfigs, \n  mappedData, \n  generateChartOption,\n  removeMapping,\n  addMapping\n} = useChartMapping(props.selectedChartType)\n\n// 数据过滤\nconst {\n  filterType,\n  rangeStart,\n  rangeEnd,\n  conditionColumn,\n  conditionOperator,\n  conditionValue,\n  filteredData,\n  updateFilter\n} = useDataFiltering()\n\n// 组件状态\nconst realTimeRender = ref(true)\nconst dragOverZone = ref(null)\nconst showPreview = ref(false)\n\n// 计算属性\nconst availableColumns = computed(() => {\n  const columns = []\n  props.workspaceFiles.forEach(file => {\n    if (file.columns) {\n      file.columns.forEach(col => {\n        columns.push({\n          id: `${file.id}_${col.name}`,\n          fileName: file.name,\n          columnName: col.name,\n          columnType: col.type,\n          fileId: file.id,\n          color: file.color || '#007acc'\n        })\n      })\n    }\n  })\n  return columns\n})\n\nconst previewData = computed(() => {\n  return filteredData.value.slice(0, 10)\n})\n\nconst canRender = computed(() => {\n  return Object.values(mappedData.value).some(arr => arr.length > 0)\n})\n\n// 拖拽处理\nfunction handleDrop(event, configKey) {\n  event.preventDefault()\n  const columnData = JSON.parse(event.dataTransfer.getData('text/plain'))\n  \n  addMapping(configKey, columnData)\n  dragOverZone.value = null\n  \n  if (realTimeRender.value) {\n    renderChart()\n  }\n}\n\nfunction handleDragOver(configKey) {\n  dragOverZone.value = configKey\n}\n\nfunction handleDragLeave() {\n  dragOverZone.value = null\n}\n\n// 渲染控制\nfunction toggleRealTimeRender() {\n  realTimeRender.value = !realTimeRender.value\n}\n\nfunction renderChart() {\n  if (!canRender.value) return\n  \n  const option = generateChartOption(filteredData.value)\n  emit('chart-updated', option)\n}\n\nfunction togglePreview() {\n  showPreview.value = !showPreview.value\n}\n\n// 监听变化\nwatch(\n  () => [mappedData.value, filteredData.value],\n  () => {\n    if (realTimeRender.value) {\n      renderChart()\n    }\n    emit('mapping-changed', {\n      mappedData: mappedData.value,\n      filteredData: filteredData.value\n    })\n  },\n  { deep: true }\n)\n\nwatch(\n  () => props.selectedChartType,\n  (newType) => {\n    // 重置映射数据\n    Object.keys(mappedData.value).forEach(key => {\n      mappedData.value[key] = []\n    })\n  }\n)\n</script>\n\n<style scoped>\n.data-mapping-panel {\n  padding: 20px;\n  background: var(--bg-color);\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  max-height: 100vh;\n  overflow-y: auto;\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 12px;\n  border-bottom: 2px solid var(--border-color);\n}\n\n.panel-header h3 {\n  margin: 0;\n  color: var(--text-color);\n  font-size: 1.2rem;\n}\n\n.panel-controls {\n  display: flex;\n  gap: 8px;\n}\n\n.toggle-btn, .render-btn {\n  padding: 6px 12px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background: var(--bg-color);\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.toggle-btn.active {\n  background: var(--primary-color);\n  color: white;\n}\n\n.render-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.mapping-sections {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.mapping-section {\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  padding: 12px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.section-title {\n  font-weight: 600;\n  color: var(--text-color);\n}\n\n.section-info {\n  color: var(--error-color);\n  font-weight: bold;\n}\n\n.drop-zone {\n  min-height: 80px;\n  border: 2px dashed var(--border-color);\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n  position: relative;\n}\n\n.drop-zone.drag-over {\n  border-color: var(--primary-color);\n  background: rgba(0, 122, 204, 0.1);\n}\n\n.drop-zone.has-data {\n  border-style: solid;\n  min-height: auto;\n  padding: 8px;\n}\n\n.drop-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  color: var(--text-secondary);\n}\n\n.placeholder-icon {\n  font-size: 2rem;\n  opacity: 0.5;\n}\n\n.mapped-items {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  width: 100%;\n}\n\n.mapped-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 10px;\n  border-radius: 4px;\n  color: white;\n  font-size: 0.9rem;\n}\n\n.item-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.file-name {\n  font-size: 0.75rem;\n  opacity: 0.8;\n}\n\n.column-name {\n  font-weight: 600;\n}\n\n.remove-item-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n}\n\n.remove-item-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.filter-options {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.filter-type {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.range-inputs, .condition-inputs {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin-left: 20px;\n}\n\n.range-inputs input, .condition-inputs input, .condition-inputs select {\n  padding: 4px 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 3px;\n  background: var(--bg-color);\n  color: var(--text-color);\n}\n\n.data-preview {\n  margin-top: 10px;\n}\n\n.preview-stats {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 8px;\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n}\n\n.preview-table {\n  max-height: 200px;\n  overflow: auto;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n}\n\n.preview-table table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.preview-table th, .preview-table td {\n  padding: 6px 10px;\n  text-align: left;\n  border-bottom: 1px solid var(--border-color);\n  font-size: 0.85rem;\n}\n\n.preview-table th {\n  background: var(--bg-secondary);\n  font-weight: 600;\n  position: sticky;\n  top: 0;\n}\n\n.preview-toggle-btn {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-color);\n  padding: 4px 8px;\n  border-radius: 3px;\n  cursor: pointer;\n  font-size: 0.8rem;\n}\n\n.preview-toggle-btn:hover {\n  background: var(--bg-secondary);\n}\n\n@media (max-width: 768px) {\n  .data-mapping-panel {\n    padding: 12px;\n  }\n  \n  .panel-controls {\n    flex-direction: column;\n  }\n  \n  .range-inputs, .condition-inputs {\n    flex-wrap: wrap;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}