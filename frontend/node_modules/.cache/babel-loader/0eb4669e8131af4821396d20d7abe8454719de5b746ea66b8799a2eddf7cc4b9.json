{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"test-page\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"test-controls\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"cache-info\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"alert alert-info\"\n};\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = {\n  class: \"cache-files\"\n};\nconst _hoisted_8 = {\n  class: \"file-name\"\n};\nconst _hoisted_9 = {\n  class: \"file-details\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", null, \"文件上传组件测试\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showFileModal = true),\n    class: \"btn btn-primary\"\n  }, \" 打开文件管理器 \"), _createElementVNode(\"button\", {\n    onClick: $setup.checkConnection,\n    class: \"btn btn-secondary\"\n  }, \" 检查后端连接 \"), _createElementVNode(\"button\", {\n    onClick: $setup.viewCache,\n    class: \"btn btn-info\"\n  }, \" 查看缓存 \"), _createElementVNode(\"button\", {\n    onClick: $setup.clearCache,\n    class: \"btn btn-warning\"\n  }, \" 清除缓存 \")]), $setup.connectionStatus ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass([\"alert\", $setup.connectionStatus.type])\n  }, _toDisplayString($setup.connectionStatus.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), $setup.cacheData ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"h3\", null, \"缓存信息\", -1 /* HOISTED */)), $setup.cacheData.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \" 暂无缓存文件 \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"p\", null, \"共有 \" + _toDisplayString($setup.cacheData.length) + \" 个缓存文件\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cacheData, file => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: file.id,\n      class: \"cache-file\"\n    }, [_createElementVNode(\"div\", _hoisted_8, _toDisplayString(file.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", null, \"大小: \" + _toDisplayString($setup.formatFileSize(file.size)), 1 /* TEXT */), _createElementVNode(\"span\", null, \"状态: \" + _toDisplayString($setup.getStatusText(file.status)), 1 /* TEXT */), _createElementVNode(\"span\", null, \"创建时间: \" + _toDisplayString(new Date(file.createdAt).toLocaleString()), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]))])) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 文件上传模态框 \"), _createVNode($setup[\"FileUploadModal\"], {\n    show: $setup.showFileModal,\n    onClose: _cache[1] || (_cache[1] = $event => $setup.showFileModal = false)\n  }, null, 8 /* PROPS */, [\"show\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$event","$setup","showFileModal","checkConnection","viewCache","clearCache","connectionStatus","_normalizeClass","type","message","_createCommentVNode","cacheData","_hoisted_4","length","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_Fragment","_renderList","file","id","_hoisted_8","name","_hoisted_9","formatFileSize","size","getStatusText","status","Date","createdAt","toLocaleString","_createVNode","show","onClose"],"sources":["D:\\Learning Material\\Git\\Fuck-Charts\\newArchitecture\\frontend_vue_design\\src\\views\\FileUploadTest.vue"],"sourcesContent":["<template>\n  <div class=\"test-page\">\n    <div class=\"container\">\n      <h1>文件上传组件测试</h1>\n      <div class=\"test-controls\">\n        <button @click=\"showFileModal = true\" class=\"btn btn-primary\">\n          打开文件管理器\n        </button>\n        <button @click=\"checkConnection\" class=\"btn btn-secondary\">\n          检查后端连接\n        </button>\n        <button @click=\"viewCache\" class=\"btn btn-info\">\n          查看缓存\n        </button>\n        <button @click=\"clearCache\" class=\"btn btn-warning\">\n          清除缓存\n        </button>\n      </div>\n      \n      <div v-if=\"connectionStatus\" class=\"alert\" :class=\"connectionStatus.type\">\n        {{ connectionStatus.message }}\n      </div>\n      \n      <div v-if=\"cacheData\" class=\"cache-info\">\n        <h3>缓存信息</h3>\n        <div v-if=\"cacheData.length === 0\" class=\"alert alert-info\">\n          暂无缓存文件\n        </div>\n        <div v-else>\n          <p>共有 {{ cacheData.length }} 个缓存文件</p>\n          <div class=\"cache-files\">\n            <div v-for=\"file in cacheData\" :key=\"file.id\" class=\"cache-file\">\n              <div class=\"file-name\">{{ file.name }}</div>\n              <div class=\"file-details\">\n                <span>大小: {{ formatFileSize(file.size) }}</span>\n                <span>状态: {{ getStatusText(file.status) }}</span>\n                <span>创建时间: {{ new Date(file.createdAt).toLocaleString() }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 文件上传模态框 -->\n    <FileUploadModal \n      :show=\"showFileModal\" \n      @close=\"showFileModal = false\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport FileUploadModal from '@/components/FileUploadModal.vue'\nimport { checkBackendConnection, getCachedFiles } from '@/services/FileServices.js'\n\nconst showFileModal = ref(false)\nconst connectionStatus = ref(null)\nconst cacheData = ref(null)\n\nasync function checkConnection() {\n  try {\n    const isConnected = await checkBackendConnection()\n    connectionStatus.value = {\n      type: isConnected ? 'alert-success' : 'alert-danger',\n      message: isConnected ? '后端连接正常' : '后端未连接（离线模式）'\n    }\n  } catch (error) {\n    connectionStatus.value = {\n      type: 'alert-danger',\n      message: '连接检查失败：' + error.message\n    }\n  }\n}\n\nfunction viewCache() {\n  try {\n    cacheData.value = getCachedFiles()\n  } catch (error) {\n    connectionStatus.value = {\n      type: 'alert-danger',\n      message: '获取缓存失败：' + error.message\n    }\n  }\n}\n\nfunction clearCache() {\n  if (confirm('确定要清除所有缓存文件吗？')) {\n    try {\n      localStorage.removeItem('fuck_charts_files')\n      cacheData.value = null\n      connectionStatus.value = {\n        type: 'alert-success',\n        message: '缓存已清除'\n      }\n    } catch (error) {\n      connectionStatus.value = {\n        type: 'alert-danger',\n        message: '清除缓存失败：' + error.message\n      }\n    }\n  }\n}\n\nfunction formatFileSize(bytes) {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nfunction getStatusText(status) {\n  const statusMap = {\n    'local': '本地缓存',\n    'uploading': '上传中',\n    'uploaded': '已上传',\n    'error': '出错'\n  }\n  return statusMap[status] || '未知'\n}\n</script>\n\n<style scoped>\n.test-page {\n  min-height: 100vh;\n  background: var(--bg-color);\n  color: var(--text-color);\n  padding: 20px;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.test-controls {\n  margin: 20px 0;\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s;\n}\n\n.btn-primary {\n  background: #007bff;\n  color: white;\n}\n\n.btn-primary:hover {\n  background: #0056b3;\n}\n\n.btn-secondary {\n  background: #6c757d;\n  color: white;\n}\n\n.btn-secondary:hover {\n  background: #545b62;\n}\n\n.btn-info {\n  background: #17a2b8;\n  color: white;\n}\n\n.btn-info:hover {\n  background: #138496;\n}\n\n.btn-warning {\n  background: #ffc107;\n  color: #212529;\n}\n\n.btn-warning:hover {\n  background: #e0a800;\n}\n\n.alert {\n  padding: 15px;\n  margin: 15px 0;\n  border-radius: 4px;\n  border: 1px solid;\n}\n\n.alert-success {\n  background: #d4edda;\n  color: #155724;\n  border-color: #c3e6cb;\n}\n\n.alert-danger {\n  background: #f8d7da;\n  color: #721c24;\n  border-color: #f5c6cb;\n}\n\n.alert-info {\n  background: #d1ecf1;\n  color: #0c5460;\n  border-color: #bee5eb;\n}\n\n.cache-info {\n  margin-top: 30px;\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n}\n\n.cache-files {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.cache-file {\n  padding: 15px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.file-name {\n  font-weight: 600;\n  font-size: 16px;\n  margin-bottom: 5px;\n}\n\n.file-details {\n  display: flex;\n  gap: 15px;\n  font-size: 12px;\n  color: var(--text-color);\n  opacity: 0.8;\n}\n\n.file-details span {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 2px 8px;\n  border-radius: 4px;\n}\n\n@media (max-width: 768px) {\n  .test-controls {\n    flex-direction: column;\n  }\n  \n  .btn {\n    width: 100%;\n  }\n  \n  .file-details {\n    flex-direction: column;\n    gap: 5px;\n  }\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAW;;EAEfA,KAAK,EAAC;AAAe;;EAJhCC,GAAA;EAuB4BD,KAAK,EAAC;;;EAvBlCC,GAAA;EAyB2CD,KAAK,EAAC;;;EAzBjDC,GAAA;AAAA;;EA8BeD,KAAK,EAAC;AAAa;;EAEfA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAc;;uBAhCrCE,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CJC,mBAAA,CAwCM,OAxCNC,UAwCM,G,0BAvCJD,mBAAA,CAAiB,YAAb,UAAQ,sBACZA,mBAAA,CAaM,OAbNE,UAaM,GAZJF,mBAAA,CAES;IAFAG,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,aAAa;IAASX,KAAK,EAAC;KAAkB,WAE9D,GACAI,mBAAA,CAES;IAFAG,OAAK,EAAEG,MAAA,CAAAE,eAAe;IAAEZ,KAAK,EAAC;KAAoB,UAE3D,GACAI,mBAAA,CAES;IAFAG,OAAK,EAAEG,MAAA,CAAAG,SAAS;IAAEb,KAAK,EAAC;KAAe,QAEhD,GACAI,mBAAA,CAES;IAFAG,OAAK,EAAEG,MAAA,CAAAI,UAAU;IAAEd,KAAK,EAAC;KAAkB,QAEpD,E,GAGSU,MAAA,CAAAK,gBAAgB,I,cAA3Bb,mBAAA,CAEM;IArBZD,GAAA;IAmBmCD,KAAK,EAnBxCgB,eAAA,EAmByC,OAAO,EAASN,MAAA,CAAAK,gBAAgB,CAACE,IAAI;sBACnEP,MAAA,CAAAK,gBAAgB,CAACG,OAAO,2BApBnCC,mBAAA,gBAuBiBT,MAAA,CAAAU,SAAS,I,cAApBlB,mBAAA,CAkBM,OAlBNmB,UAkBM,G,0BAjBJjB,mBAAA,CAAa,YAAT,MAAI,sBACGM,MAAA,CAAAU,SAAS,CAACE,MAAM,U,cAA3BpB,mBAAA,CAEM,OAFNqB,UAEM,EAFsD,UAE5D,M,cACArB,mBAAA,CAYM,OAxCdsB,UAAA,GA6BUpB,mBAAA,CAAsC,WAAnC,KAAG,GAAAqB,gBAAA,CAAGf,MAAA,CAAAU,SAAS,CAACE,MAAM,IAAG,QAAM,iBAClClB,mBAAA,CASM,OATNsB,UASM,I,kBARJxB,mBAAA,CAOMyB,SAAA,QAtClBC,WAAA,CA+BgClB,MAAA,CAAAU,SAAS,EAAjBS,IAAI;yBAAhB3B,mBAAA,CAOM;MAP0BD,GAAG,EAAE4B,IAAI,CAACC,EAAE;MAAE9B,KAAK,EAAC;QAClDI,mBAAA,CAA4C,OAA5C2B,UAA4C,EAAAN,gBAAA,CAAlBI,IAAI,CAACG,IAAI,kBACnC5B,mBAAA,CAIM,OAJN6B,UAIM,GAHJ7B,mBAAA,CAAgD,cAA1C,MAAI,GAAAqB,gBAAA,CAAGf,MAAA,CAAAwB,cAAc,CAACL,IAAI,CAACM,IAAI,mBACrC/B,mBAAA,CAAiD,cAA3C,MAAI,GAAAqB,gBAAA,CAAGf,MAAA,CAAA0B,aAAa,CAACP,IAAI,CAACQ,MAAM,mBACtCjC,mBAAA,CAAkE,cAA5D,QAAM,GAAAqB,gBAAA,KAAOa,IAAI,CAACT,IAAI,CAACU,SAAS,EAAEC,cAAc,mB;2CApCtErB,mBAAA,e,GA4CIA,mBAAA,aAAgB,EAChBsB,YAAA,CAGE/B,MAAA;IAFCgC,IAAI,EAAEhC,MAAA,CAAAC,aAAa;IACnBgC,OAAK,EAAAnC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}