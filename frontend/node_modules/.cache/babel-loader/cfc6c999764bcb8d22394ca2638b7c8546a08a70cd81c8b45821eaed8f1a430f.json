{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"py-5 ChartMain-container\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col-lg-4\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  class: \"mt-4\"\n};\nconst _hoisted_6 = {\n  class: \"d-flex flex-wrap\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  class: \"fs-3\"\n};\nconst _hoisted_9 = {\n  class: \"mt-4\"\n};\nconst _hoisted_10 = [\"onUpdate:modelValue\"];\nconst _hoisted_11 = [\"onUpdate:modelValue\"];\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = [\"onUpdate:modelValue\"];\nconst _hoisted_14 = [\"value\"];\nconst _hoisted_15 = [\"onUpdate:modelValue\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n  class: \"mt-4\"\n};\nconst _hoisted_18 = {\n  key: 0\n};\nconst _hoisted_19 = {\n  class: \"d-block mt-2\"\n};\nconst _hoisted_20 = {\n  key: 1\n};\nconst _hoisted_21 = {\n  key: 2\n};\nconst _hoisted_22 = {\n  class: \"mt-4\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"mt-2\"\n};\nconst _hoisted_24 = {\n  class: \"col-lg-8\"\n};\nimport { ref, reactive, onMounted, watch } from 'vue';\nimport axios from 'axios';\nimport * as echarts from 'echarts';\nimport { read, utils } from 'xlsx';\nexport default {\n  __name: 'ChartVisualizations',\n  setup(__props) {\n    const uploadedData = ref(null);\n    const fields = ref([]);\n    const chartType = ref('bar');\n    const chartTypes = [{\n      value: 'bar',\n      label: 'Êü±Áä∂Âõæ',\n      icon: 'üìä'\n    }, {\n      value: 'line',\n      label: 'ÊäòÁ∫øÂõæ',\n      icon: 'üìà'\n    }, {\n      value: 'pie',\n      label: 'È•ºÂõæ',\n      icon: 'ü•ß'\n    }];\n    const seriesList = ref([]);\n    const params = reactive({\n      smooth: false,\n      lineWidth: 2,\n      barMaxWidth: 50,\n      pieRadius: 50\n    });\n    const isAdvanced = ref(false);\n    const optionJson = ref('');\n    const chartOptions = ref({});\n    let chartInstance = null;\n    const chartRef = ref(null);\n    function handleFileUpload(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n      const reader = new FileReader();\n      if (file.name.endsWith('.json')) {\n        reader.onload = e => {\n          try {\n            const data = JSON.parse(e.target.result);\n            uploadedData.value = Array.isArray(data) ? data : [data];\n            fields.value = Object.keys(uploadedData.value[0] || {});\n          } catch (err) {\n            console.error('JSONËß£ÊûêÂ§±Ë¥•', err);\n          }\n        };\n        reader.readAsText(file);\n      } else {\n        reader.onload = e => {\n          const data = e.target.result;\n          const workbook = read(data, {\n            type: 'binary'\n          });\n          const sheet = workbook.Sheets[workbook.SheetNames[0]];\n          const jsonData = utils.sheet_to_json(sheet, {\n            defval: ''\n          });\n          uploadedData.value = jsonData;\n          fields.value = Object.keys(jsonData[0] || {});\n        };\n        reader.readAsBinaryString(file);\n      }\n    }\n    function addSeries() {\n      seriesList.value.push({\n        name: '',\n        xField: '',\n        yField: '',\n        color: '#5470c6'\n      });\n    }\n    function removeSeries(index) {\n      seriesList.value.splice(index, 1);\n    }\n    function updateChart() {\n      if (!uploadedData.value || !chartType.value) return;\n      const option = {};\n      if (chartType.value === 'bar' || chartType.value === 'line') {\n        const xField = seriesList.value[0]?.xField || '';\n        option.xAxis = {\n          type: 'category',\n          data: uploadedData.value.map(item => item[xField])\n        };\n        option.yAxis = {\n          type: 'value'\n        };\n        option.series = seriesList.value.map(serie => ({\n          name: serie.name,\n          type: chartType.value,\n          data: uploadedData.value.map(item => item[serie.yField]),\n          smooth: chartType.value === 'line' ? params.smooth : undefined,\n          lineStyle: {\n            width: params.lineWidth\n          },\n          itemStyle: {\n            color: serie.color\n          }\n        }));\n      } else if (chartType.value === 'pie') {\n        const s = seriesList.value[0];\n        if (s) {\n          option.series = [{\n            name: s.name,\n            type: 'pie',\n            radius: [0, params.pieRadius + '%'],\n            data: uploadedData.value.map(item => ({\n              name: item[s.xField],\n              value: item[s.yField]\n            })),\n            itemStyle: {\n              color: s.color\n            }\n          }];\n        }\n      }\n      chartOptions.value = option;\n      if (chartInstance) {\n        chartInstance.setOption(option);\n      }\n    }\n    async function saveTemplate() {\n      try {\n        await axios.post('/api/chart-template', {\n          chartType: chartType.value,\n          series: seriesList.value,\n          params: params,\n          option: chartOptions.value\n        });\n        alert('Ê®°ÊùøÂ∑≤‰øùÂ≠ò');\n      } catch (err) {\n        console.error('‰øùÂ≠òÂ§±Ë¥•', err);\n      }\n    }\n    async function loadTemplate() {\n      try {\n        const res = await axios.get('/api/chart-template');\n        const data = res.data;\n        chartType.value = data.chartType;\n        seriesList.value = data.series;\n        Object.assign(params, data.params);\n        updateChart();\n      } catch (err) {\n        console.error('Âä†ËΩΩÂ§±Ë¥•', err);\n      }\n    }\n    function applyOptionJson() {\n      try {\n        const opt = JSON.parse(optionJson.value);\n        chartInstance.setOption(opt, true);\n      } catch (err) {\n        alert('Êó†ÊïàÁöÑ JSON Ê†ºÂºè');\n      }\n    }\n    onMounted(() => {\n      chartInstance = echarts.init(chartRef.value);\n      updateChart();\n    });\n    watch([chartType, () => seriesList.value.length, () => params.smooth, () => params.lineWidth, () => params.barMaxWidth, () => params.pieRadius], updateChart);\n    watch(uploadedData, updateChart);\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"h4\", null, \"Êï∞ÊçÆ‰∏ä‰º†\", -1)), _createElementVNode(\"input\", {\n        type: \"file\",\n        onChange: handleFileUpload,\n        accept: \".xlsx,.xls,.csv,.json\"\n      }, null, 32), fields.value.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"h5\", null, \"Â≠óÊÆµÈ¢ÑËßàÔºö\", -1)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(fields.value, field => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          key: field\n        }, _toDisplayString(field), 1);\n      }), 128))])])) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_5, [_cache[8] || (_cache[8] = _createElementVNode(\"h4\", null, \"ÂõæË°®Á±ªÂûã\", -1)), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(chartTypes, c => {\n        return _createElementVNode(\"div\", {\n          key: c.value,\n          class: _normalizeClass([\"chart-type-card me-2 mb-2 text-center p-2\", {\n            active: chartType.value === c.value\n          }]),\n          onClick: $event => chartType.value = c.value\n        }, [_createElementVNode(\"div\", _hoisted_8, _toDisplayString(c.icon), 1), _createElementVNode(\"div\", null, _toDisplayString(c.label), 1)], 10, _hoisted_7);\n      }), 64))])]), _createElementVNode(\"div\", _hoisted_9, [_cache[11] || (_cache[11] = _createElementVNode(\"h4\", null, \"Á≥ªÂàóÈÖçÁΩÆ\", -1)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(seriesList.value, (serie, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: index,\n          class: \"series-config mb-3\"\n        }, [_withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": $event => serie.name = $event,\n          placeholder: \"Á≥ªÂàóÂêç\",\n          class: \"form-control mb-2\"\n        }, null, 8, _hoisted_10), [[_vModelText, serie.name]]), _withDirectives(_createElementVNode(\"select\", {\n          \"onUpdate:modelValue\": $event => serie.xField = $event,\n          class: \"form-select mb-2\"\n        }, [_cache[9] || (_cache[9] = _createElementVNode(\"option\", {\n          disabled: \"\",\n          value: \"\"\n        }, \"ÈÄâÊã© X Â≠óÊÆµ\", -1)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(fields.value, f => {\n          return _openBlock(), _createElementBlock(\"option\", {\n            key: f,\n            value: f\n          }, _toDisplayString(f), 9, _hoisted_12);\n        }), 128))], 8, _hoisted_11), [[_vModelSelect, serie.xField]]), _withDirectives(_createElementVNode(\"select\", {\n          \"onUpdate:modelValue\": $event => serie.yField = $event,\n          class: \"form-select mb-2\"\n        }, [_cache[10] || (_cache[10] = _createElementVNode(\"option\", {\n          disabled: \"\",\n          value: \"\"\n        }, \"ÈÄâÊã© Y Â≠óÊÆµ\", -1)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(fields.value, f => {\n          return _openBlock(), _createElementBlock(\"option\", {\n            key: f,\n            value: f\n          }, _toDisplayString(f), 9, _hoisted_14);\n        }), 128))], 8, _hoisted_13), [[_vModelSelect, serie.yField]]), _withDirectives(_createElementVNode(\"input\", {\n          type: \"color\",\n          \"onUpdate:modelValue\": $event => serie.color = $event,\n          class: \"form-control form-control-color mb-2\"\n        }, null, 8, _hoisted_15), [[_vModelText, serie.color]]), _createElementVNode(\"button\", {\n          class: \"btn btn-danger btn-sm\",\n          onClick: $event => removeSeries(index)\n        }, \"Âà†Èô§\", 8, _hoisted_16)]);\n      }), 128)), _createElementVNode(\"button\", {\n        class: \"btn btn-primary\",\n        onClick: addSeries\n      }, \"Ê∑ªÂä†Á≥ªÂàó\")]), _createElementVNode(\"div\", _hoisted_17, [_cache[16] || (_cache[16] = _createElementVNode(\"h4\", null, \"ÂèÇÊï∞ËÆæÁΩÆ\", -1)), chartType.value === 'line' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"checkbox\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => params.smooth = $event)\n      }, null, 512), [[_vModelCheckbox, params.smooth]]), _cache[12] || (_cache[12] = _createTextVNode(\" Âπ≥ÊªëÊõ≤Á∫ø\"))]), _createElementVNode(\"label\", _hoisted_19, [_cache[13] || (_cache[13] = _createTextVNode(\"Á∫øÂÆΩÔºö\")), _withDirectives(_createElementVNode(\"input\", {\n        type: \"number\",\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => params.lineWidth = $event),\n        min: \"1\",\n        class: \"form-control\"\n      }, null, 512), [[_vModelText, params.lineWidth]])])])) : chartType.value === 'bar' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [_createElementVNode(\"label\", null, [_cache[14] || (_cache[14] = _createTextVNode(\"ÊúÄÂ§ßÊü±ÂÆΩÔºö\")), _withDirectives(_createElementVNode(\"input\", {\n        type: \"number\",\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => params.barMaxWidth = $event),\n        min: \"1\",\n        class: \"form-control\"\n      }, null, 512), [[_vModelText, params.barMaxWidth]])])])) : chartType.value === 'pie' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_createElementVNode(\"label\", null, [_cache[15] || (_cache[15] = _createTextVNode(\"ÂçäÂæÑ (%)Ôºö\")), _withDirectives(_createElementVNode(\"input\", {\n        type: \"range\",\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => params.pieRadius = $event),\n        min: \"10\",\n        max: \"100\",\n        class: \"form-range\"\n      }, null, 512), [[_vModelText, params.pieRadius]])])])) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", {\n        class: \"mt-4\"\n      }, [_cache[17] || (_cache[17] = _createElementVNode(\"h4\", null, \"Ê®°ÊùøÁÆ°ÁêÜ\", -1)), _createElementVNode(\"button\", {\n        class: \"btn btn-success me-2\",\n        onClick: saveTemplate\n      }, \"‰øùÂ≠òÊ®°Êùø\"), _createElementVNode(\"button\", {\n        class: \"btn btn-secondary\",\n        onClick: loadTemplate\n      }, \"Âä†ËΩΩÊ®°Êùø\")]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"checkbox\",\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => isAdvanced.value = $event)\n      }, null, 512), [[_vModelCheckbox, isAdvanced.value]]), _cache[18] || (_cache[18] = _createTextVNode(\" È´òÁ∫ßÊ®°Âºè (ÁºñËæë Option JSON)\"))]), isAdvanced.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [_withDirectives(_createElementVNode(\"textarea\", {\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => optionJson.value = $event),\n        rows: \"6\",\n        class: \"form-control\"\n      }, null, 512), [[_vModelText, optionJson.value]]), _createElementVNode(\"button\", {\n        class: \"btn btn-primary mt-2\",\n        onClick: applyOptionJson\n      }, \"Â∫îÁî®ÈÖçÁΩÆ\")])) : _createCommentVNode(\"\", true)])]), _createElementVNode(\"div\", _hoisted_24, [_cache[19] || (_cache[19] = _createElementVNode(\"h4\", null, \"ÂõæË°®È¢ÑËßà\", -1)), _createElementVNode(\"div\", {\n        ref_key: \"chartRef\",\n        ref: chartRef,\n        style: {\n          \"width\": \"100%\",\n          \"height\": \"500px\",\n          \"border\": \"1px solid #ccc\"\n        }\n      }, null, 512)])])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","watch","axios","echarts","read","utils","uploadedData","fields","chartType","chartTypes","value","label","icon","seriesList","params","smooth","lineWidth","barMaxWidth","pieRadius","isAdvanced","optionJson","chartOptions","chartInstance","chartRef","handleFileUpload","event","file","target","files","reader","FileReader","name","endsWith","onload","e","data","JSON","parse","result","Array","isArray","Object","keys","err","console","error","readAsText","workbook","type","sheet","Sheets","SheetNames","jsonData","sheet_to_json","defval","readAsBinaryString","addSeries","push","xField","yField","color","removeSeries","index","splice","updateChart","option","xAxis","map","item","yAxis","series","serie","undefined","lineStyle","width","itemStyle","s","radius","setOption","saveTemplate","post","alert","loadTemplate","res","get","assign","applyOptionJson","opt","init","length"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/views/ChartVisualizations.vue"],"sourcesContent":["<template>\n  <div class=\"py-5 ChartMain-container\">\n    <div class=\"row\">\n      <!-- Â∑¶‰æßÔºöÊéßÂà∂Èù¢Êùø -->\n      <div class=\"col-lg-4\">\n        <!-- Êï∞ÊçÆ‰∏ä‰º† -->\n        <div>\n          <h4>Êï∞ÊçÆ‰∏ä‰º†</h4>\n          <input type=\"file\" @change=\"handleFileUpload\" accept=\".xlsx,.xls,.csv,.json\" />\n          <div v-if=\"fields.length\">\n            <h5>Â≠óÊÆµÈ¢ÑËßàÔºö</h5>\n            <ul>\n              <li v-for=\"field in fields\" :key=\"field\">{{ field }}</li>\n            </ul>\n          </div>\n        </div>\n\n        <!-- ÂõæË°®Á±ªÂûã -->\n        <div class=\"mt-4\">\n          <h4>ÂõæË°®Á±ªÂûã</h4>\n          <div class=\"d-flex flex-wrap\">\n            <div v-for=\"c in chartTypes\" :key=\"c.value\"\n                 class=\"chart-type-card me-2 mb-2 text-center p-2\"\n                 :class=\"{ active: chartType === c.value }\"\n                 @click=\"chartType = c.value\">\n              <div class=\"fs-3\">{{ c.icon }}</div>\n              <div>{{ c.label }}</div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Á≥ªÂàóÈÖçÁΩÆ -->\n        <div class=\"mt-4\">\n          <h4>Á≥ªÂàóÈÖçÁΩÆ</h4>\n          <div v-for=\"(serie, index) in seriesList\" :key=\"index\" class=\"series-config mb-3\">\n            <input v-model=\"serie.name\" placeholder=\"Á≥ªÂàóÂêç\" class=\"form-control mb-2\" />\n            <select v-model=\"serie.xField\" class=\"form-select mb-2\">\n              <option disabled value=\"\">ÈÄâÊã© X Â≠óÊÆµ</option>\n              <option v-for=\"f in fields\" :key=\"f\" :value=\"f\">{{ f }}</option>\n            </select>\n            <select v-model=\"serie.yField\" class=\"form-select mb-2\">\n              <option disabled value=\"\">ÈÄâÊã© Y Â≠óÊÆµ</option>\n              <option v-for=\"f in fields\" :key=\"f\" :value=\"f\">{{ f }}</option>\n            </select>\n            <input type=\"color\" v-model=\"serie.color\" class=\"form-control form-control-color mb-2\" />\n            <button class=\"btn btn-danger btn-sm\" @click=\"removeSeries(index)\">Âà†Èô§</button>\n          </div>\n          <button class=\"btn btn-primary\" @click=\"addSeries\">Ê∑ªÂä†Á≥ªÂàó</button>\n        </div>\n\n        <!-- ÂèÇÊï∞ÈÖçÁΩÆ -->\n        <div class=\"mt-4\">\n          <h4>ÂèÇÊï∞ËÆæÁΩÆ</h4>\n          <div v-if=\"chartType === 'line'\">\n            <label><input type=\"checkbox\" v-model=\"params.smooth\" /> Âπ≥ÊªëÊõ≤Á∫ø</label>\n            <label class=\"d-block mt-2\">Á∫øÂÆΩÔºö<input type=\"number\" v-model=\"params.lineWidth\" min=\"1\" class=\"form-control\" /></label>\n          </div>\n          <div v-else-if=\"chartType === 'bar'\">\n            <label>ÊúÄÂ§ßÊü±ÂÆΩÔºö<input type=\"number\" v-model=\"params.barMaxWidth\" min=\"1\" class=\"form-control\" /></label>\n          </div>\n          <div v-else-if=\"chartType === 'pie'\">\n            <label>ÂçäÂæÑ (%)Ôºö<input type=\"range\" v-model=\"params.pieRadius\" min=\"10\" max=\"100\" class=\"form-range\" /></label>\n          </div>\n        </div>\n\n        <!-- ‰øùÂ≠ò/Âä†ËΩΩÊ®°Êùø -->\n        <div class=\"mt-4\">\n          <h4>Ê®°ÊùøÁÆ°ÁêÜ</h4>\n          <button class=\"btn btn-success me-2\" @click=\"saveTemplate\">‰øùÂ≠òÊ®°Êùø</button>\n          <button class=\"btn btn-secondary\" @click=\"loadTemplate\">Âä†ËΩΩÊ®°Êùø</button>\n        </div>\n\n        <!-- È´òÁ∫ßÊ®°Âºè -->\n        <div class=\"mt-4\">\n          <label><input type=\"checkbox\" v-model=\"isAdvanced\" /> È´òÁ∫ßÊ®°Âºè (ÁºñËæë Option JSON)</label>\n          <div v-if=\"isAdvanced\" class=\"mt-2\">\n            <textarea v-model=\"optionJson\" rows=\"6\" class=\"form-control\"></textarea>\n            <button class=\"btn btn-primary mt-2\" @click=\"applyOptionJson\">Â∫îÁî®ÈÖçÁΩÆ</button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Âè≥‰æßÔºöÂõæË°®È¢ÑËßà -->\n      <div class=\"col-lg-8\">\n        <h4>ÂõæË°®È¢ÑËßà</h4>\n        <div ref=\"chartRef\" style=\"width: 100%; height: 500px; border:1px solid #ccc;\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, watch } from 'vue'\nimport axios from 'axios'\nimport * as echarts from 'echarts'\nimport { read, utils } from 'xlsx'\n\nconst uploadedData = ref(null)\nconst fields = ref([])\nconst chartType = ref('bar')\nconst chartTypes = [\n  { value: 'bar', label: 'Êü±Áä∂Âõæ', icon: 'üìä' },\n  { value: 'line', label: 'ÊäòÁ∫øÂõæ', icon: 'üìà' },\n  { value: 'pie', label: 'È•ºÂõæ', icon: 'ü•ß' }\n]\nconst seriesList = ref([])\nconst params = reactive({ smooth: false, lineWidth: 2, barMaxWidth: 50, pieRadius: 50 })\nconst isAdvanced = ref(false)\nconst optionJson = ref('')\nconst chartOptions = ref({})\nlet chartInstance = null\nconst chartRef = ref(null)\n\nfunction handleFileUpload (event) {\n  const file = event.target.files[0]\n  if (!file) return\n  const reader = new FileReader()\n  if (file.name.endsWith('.json')) {\n    reader.onload = e => {\n      try {\n        const data = JSON.parse(e.target.result)\n        uploadedData.value = Array.isArray(data) ? data : [data]\n        fields.value = Object.keys(uploadedData.value[0] || {})\n      } catch (err) {\n        console.error('JSONËß£ÊûêÂ§±Ë¥•', err)\n      }\n    }\n    reader.readAsText(file)\n  } else {\n    reader.onload = e => {\n      const data = e.target.result\n      const workbook = read(data, { type: 'binary' })\n      const sheet = workbook.Sheets[workbook.SheetNames[0]]\n      const jsonData = utils.sheet_to_json(sheet, { defval: '' })\n      uploadedData.value = jsonData\n      fields.value = Object.keys(jsonData[0] || {})\n    }\n    reader.readAsBinaryString(file)\n  }\n}\n\nfunction addSeries () {\n  seriesList.value.push({ name: '', xField: '', yField: '', color: '#5470c6' })\n}\n\nfunction removeSeries (index) {\n  seriesList.value.splice(index, 1)\n}\n\nfunction updateChart () {\n  if (!uploadedData.value || !chartType.value) return\n  const option = {}\n  if (chartType.value === 'bar' || chartType.value === 'line') {\n    const xField = seriesList.value[0]?.xField || ''\n    option.xAxis = { type: 'category', data: uploadedData.value.map(item => item[xField]) }\n    option.yAxis = { type: 'value' }\n    option.series = seriesList.value.map(serie => ({\n      name: serie.name,\n      type: chartType.value,\n      data: uploadedData.value.map(item => item[serie.yField]),\n      smooth: chartType.value === 'line' ? params.smooth : undefined,\n      lineStyle: { width: params.lineWidth },\n      itemStyle: { color: serie.color }\n    }))\n  } else if (chartType.value === 'pie') {\n    const s = seriesList.value[0]\n    if (s) {\n      option.series = [{\n        name: s.name,\n        type: 'pie',\n        radius: [0, params.pieRadius + '%'],\n        data: uploadedData.value.map(item => ({ name: item[s.xField], value: item[s.yField] })),\n        itemStyle: { color: s.color }\n      }]\n    }\n  }\n  chartOptions.value = option\n  if (chartInstance) {\n    chartInstance.setOption(option)\n  }\n}\n\nasync function saveTemplate () {\n  try {\n    await axios.post('/api/chart-template', {\n      chartType: chartType.value,\n      series: seriesList.value,\n      params: params,\n      option: chartOptions.value\n    })\n    alert('Ê®°ÊùøÂ∑≤‰øùÂ≠ò')\n  } catch (err) {\n    console.error('‰øùÂ≠òÂ§±Ë¥•', err)\n  }\n}\n\nasync function loadTemplate () {\n  try {\n    const res = await axios.get('/api/chart-template')\n    const data = res.data\n    chartType.value = data.chartType\n    seriesList.value = data.series\n    Object.assign(params, data.params)\n    updateChart()\n  } catch (err) {\n    console.error('Âä†ËΩΩÂ§±Ë¥•', err)\n  }\n}\n\nfunction applyOptionJson () {\n  try {\n    const opt = JSON.parse(optionJson.value)\n    chartInstance.setOption(opt, true)\n  } catch (err) {\n    alert('Êó†ÊïàÁöÑ JSON Ê†ºÂºè')\n  }\n}\n\nonMounted(() => {\n  chartInstance = echarts.init(chartRef.value)\n  updateChart()\n})\n\nwatch([chartType, () => seriesList.value.length, () => params.smooth,\n  () => params.lineWidth, () => params.barMaxWidth, () => params.pieRadius],\nupdateChart)\nwatch(uploadedData, updateChart)\n</script>\n\n<style scoped>\n.ChartMain-container {\n  min-height: 100vh;\n}\n.chart-type-card {\n  cursor: pointer;\n  width: 80px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n.chart-type-card.active {\n  background-color: #007bff;\n  color: #fff;\n}\n.series-config {\n  padding: 10px;\n  border: 1px solid #eee;\n  border-radius: 4px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}