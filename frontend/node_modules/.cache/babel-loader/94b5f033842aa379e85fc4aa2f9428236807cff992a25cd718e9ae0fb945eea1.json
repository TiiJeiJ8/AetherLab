{"ast":null,"code":"import { ref, watch } from 'vue';\nimport ChartThumbnail from './ChartThumbnail.vue';\nexport default {\n  __name: 'ChartHistoryPanel',\n  props: {\n    historyList: {\n      type: Array,\n      required: true\n    }\n  },\n  emits: ['preview', 'delete', 'rename'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const editingIndex = ref(null);\n    const editTitle = ref('');\n    function onPreview(item, idx) {\n      emit('preview', item, idx);\n    }\n    function onDelete(idx) {\n      emit('delete', idx);\n    }\n    function startEdit(idx, item) {\n      editingIndex.value = idx;\n      editTitle.value = item.option.title?.text || '';\n    }\n    function saveTitle(idx) {\n      emit('rename', idx, editTitle.value);\n      editingIndex.value = null;\n    }\n    watch(() => props.historyList, () => {\n      editingIndex.value = null;\n    });\n    const __returned__ = {\n      props,\n      emit,\n      editingIndex,\n      editTitle,\n      onPreview,\n      onDelete,\n      startEdit,\n      saveTitle,\n      ref,\n      watch,\n      ChartThumbnail\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","ChartThumbnail","props","__props","emit","__emit","editingIndex","editTitle","onPreview","item","idx","onDelete","startEdit","value","option","title","text","saveTitle","historyList"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/Chart/ChartHistoryPanel.vue"],"sourcesContent":["<template>\n  <div class=\"chart-history-panel\">\n    <div class=\"history-header\">\n      <span>Chart History</span>\n    </div>\n    <div v-if=\"!historyList.length\" class=\"empty-tip\">No saved charts available.</div>\n    <div class=\"history-list\">\n      <div v-for=\"(item, idx) in historyList\" :key=\"idx\" class=\"chart-history-item\">\n        <div class=\"thumb-title-row\">\n          <ChartThumbnail :option=\"item.option\" @click=\"onPreview(item, idx)\" />\n          <input\n            v-if=\"editingIndex === idx\"\n            v-model=\"editTitle\"\n            @blur=\"saveTitle(idx)\"\n            @keyup.enter=\"saveTitle(idx)\"\n            class=\"edit-title-input\"\n            :maxlength=\"32\"\n            autofocus\n          />\n          <div v-else class=\"chart-history-title\" @dblclick=\"startEdit(idx, item)\">\n            {{ item.option.title?.text || 'Untitled Chart' }}\n          </div>\n          <button class=\"delete-btn\" @click.stop=\"onDelete(idx)\" title=\"Delete\">‚ùå</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, defineProps, defineEmits } from 'vue'\nimport ChartThumbnail from './ChartThumbnail.vue'\n\nconst props = defineProps({\n  historyList: { type: Array, required: true }\n})\nconst emit = defineEmits(['preview', 'delete', 'rename'])\n\nconst editingIndex = ref(null)\nconst editTitle = ref('')\n\nfunction onPreview(item, idx) {\n  emit('preview', item, idx)\n}\nfunction onDelete(idx) {\n  emit('delete', idx)\n}\nfunction startEdit(idx, item) {\n  editingIndex.value = idx\n  editTitle.value = item.option.title?.text || ''\n}\nfunction saveTitle(idx) {\n  emit('rename', idx, editTitle.value)\n  editingIndex.value = null\n}\nwatch(() => props.historyList, () => {\n  editingIndex.value = null\n})\n</script>\n\n<style scoped>\n.chart-history-panel {\n  width: 100%;\n  background: var(--bg-color, #fff);\n  border-radius: 10px;\n  box-shadow: 0 0px 1px var(--text-color);\n  padding: 12px 0 0 0;\n}\n.history-header {\n  font-weight: bold;\n  font-size: 1.1em;\n  margin-bottom: 10px;\n  text-align: center;\n}\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 4px 0;\n}\n.chart-history-item {\n  background: var(--bg-color);\n  border-radius: 8px;\n  padding: 6px 8px 10px 8px;\n  box-shadow: 0 1px 4px rgba(0,0,0,0.04);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n.chart-history-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 1px 1px rgba(58, 57, 57, 0.18);\n}\n.thumb-title-row {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n}\n.chart-history-title {\n  font-size: 0.98em;\n  font-weight: 500;\n  color: var(--text-color);\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.edit-title-input {\n  width: 90%;\n  font-size: 0.98em;\n  font-weight: 500;\n  color: var(--text-color);\n  border: 1px solid #bdbdbd;\n  border-radius: 4px;\n  padding: 2px 8px;\n  outline: none;\n  margin: 0 auto;\n  display: block;\n}\n.delete-btn {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  background: var(--text-color);\n  border: none;\n  border-radius: 50%;\n  width: 22px;\n  height: 22px;\n  font-size: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n.chart-history-item:hover .delete-btn {\n  opacity: 1;\n}\n.empty-tip {\n  text-align: center;\n  color: #999;\n  padding: 30px 10px;\n  font-size: 1em;\n  user-select: none;\n}\n</style>\n"],"mappings":"AA8BA,SAASA,GAAG,EAAEC,KAA+B,QAAQ,KAAI;AACzD,OAAOC,cAAc,MAAM,sBAAqB;;;;;;;;;;;;;;;IAEhD,MAAMC,KAAK,GAAGC,OAAA;IAGd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,YAAY,GAAGP,GAAG,CAAC,IAAI;IAC7B,MAAMQ,SAAS,GAAGR,GAAG,CAAC,EAAE;IAExB,SAASS,SAASA,CAACC,IAAI,EAAEC,GAAG,EAAE;MAC5BN,IAAI,CAAC,SAAS,EAAEK,IAAI,EAAEC,GAAG;IAC3B;IACA,SAASC,QAAQA,CAACD,GAAG,EAAE;MACrBN,IAAI,CAAC,QAAQ,EAAEM,GAAG;IACpB;IACA,SAASE,SAASA,CAACF,GAAG,EAAED,IAAI,EAAE;MAC5BH,YAAY,CAACO,KAAK,GAAGH,GAAE;MACvBH,SAAS,CAACM,KAAK,GAAGJ,IAAI,CAACK,MAAM,CAACC,KAAK,EAAEC,IAAI,IAAI,EAAC;IAChD;IACA,SAASC,SAASA,CAACP,GAAG,EAAE;MACtBN,IAAI,CAAC,QAAQ,EAAEM,GAAG,EAAEH,SAAS,CAACM,KAAK;MACnCP,YAAY,CAACO,KAAK,GAAG,IAAG;IAC1B;IACAb,KAAK,CAAC,MAAME,KAAK,CAACgB,WAAW,EAAE,MAAM;MACnCZ,YAAY,CAACO,KAAK,GAAG,IAAG;IAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}