{"ast":null,"code":"import { createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chart-mapping-basic\"\n};\nconst _hoisted_2 = {\n  class: \"mapping-section\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"drop-placeholder\"\n};\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n  key: 1,\n  class: \"mapped-fields-grid\"\n};\nconst _hoisted_6 = {\n  class: \"field-header\"\n};\nconst _hoisted_7 = {\n  class: \"field-name\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"innerHTML\"];\nconst _hoisted_10 = {\n  class: \"field-info\"\n};\nconst _hoisted_11 = {\n  class: \"field-sample\"\n};\nconst _hoisted_12 = {\n  class: \"validation-status\"\n};\nconst _hoisted_13 = [\"innerHTML\"];\nimport { ref } from 'vue';\nimport { getThemeIcon } from '@/assets/JS/icons.js';\n\n// Props\n\nexport default {\n  __name: 'ChartMappingBasic',\n  props: {\n    mappedFields: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: ['field-mapped', 'field-removed'],\n  setup(__props, {\n    emit: __emit\n  }) {\n    /* eslint-disable */\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n\n    // 拖拽状态\n    const dragOverZone = ref(null);\n\n    // 处理拖拽悬停\n    function handleDragOver(zone) {\n      dragOverZone.value = zone;\n    }\n\n    // 处理拖拽离开\n    function handleDragLeave() {\n      dragOverZone.value = null;\n    }\n\n    // 处理字段拖拽放置\n    function handleDrop(event, targetZone) {\n      event.preventDefault();\n      dragOverZone.value = null;\n      try {\n        const dragData = JSON.parse(event.dataTransfer.getData('application/json'));\n        if (dragData.type === 'column' && dragData.source === 'file-structure') {\n          const column = dragData.column;\n\n          // 生成唯一的字段键\n          const fieldKey = `field_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n          const mapping = {\n            [fieldKey]: column\n          };\n          emit('field-mapped', mapping);\n        }\n      } catch (error) {\n        console.error('Error handling drop:', error);\n      }\n    }\n\n    // 移除字段映射\n    function removeField(fieldKey) {\n      emit('field-removed', fieldKey);\n    }\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n        class: \"section-label\"\n      }, \"Data Fields\", -1)), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"drop-zone-large\", {\n          'has-fields': Object.keys(__props.mappedFields).length > 0,\n          'drag-over': dragOverZone.value === 'general'\n        }]),\n        onDrop: _cache[0] || (_cache[0] = $event => handleDrop($event, 'general')),\n        onDragover: _cache[1] || (_cache[1] = _withModifiers($event => handleDragOver('general'), [\"prevent\"])),\n        onDragleave: handleDragLeave,\n        onDragenter: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [Object.keys(__props.mappedFields).length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"span\", {\n        class: \"placeholder-icon\",\n        innerHTML: _unref(getThemeIcon)('drag')\n      }, null, 8, _hoisted_4), _cache[3] || (_cache[3] = _createElementVNode(\"span\", {\n        class: \"placeholder-text\"\n      }, \"Drop data fields here\", -1)), _cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n        class: \"placeholder-hint\"\n      }, \"Add multiple fields to create your chart\", -1))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.mappedFields, (field, key) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: key,\n          class: \"mapped-field-card\"\n        }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString(field.name), 1), _createElementVNode(\"button\", {\n          class: \"remove-btn\",\n          onClick: $event => removeField(key),\n          title: \"Remove field\"\n        }, [_createElementVNode(\"span\", {\n          innerHTML: _unref(getThemeIcon)('remove')\n        }, null, 8, _hoisted_9)], 8, _hoisted_8)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", {\n          class: _normalizeClass([\"field-type\", `type-${field.type}`])\n        }, _toDisplayString(field.type), 3), _createElementVNode(\"span\", _hoisted_11, _toDisplayString(field.sample || 'No sample'), 1)])]);\n      }), 128))]))], 34)]), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n        class: \"usage-hints\"\n      }, [_createElementVNode(\"h5\", null, \"Usage Tips:\"), _createElementVNode(\"ul\", null, [_createElementVNode(\"li\", null, \"Add numeric fields for values and measurements\"), _createElementVNode(\"li\", null, \"Add category fields for grouping and labels\"), _createElementVNode(\"li\", null, \"Mix different data types based on chart requirements\"), _createElementVNode(\"li\", null, \"Remove fields by clicking the × button on each field\")])], -1)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", {\n        class: _normalizeClass([\"validation-item\", {\n          'valid': Object.keys(__props.mappedFields).length > 0\n        }])\n      }, [_createElementVNode(\"span\", {\n        innerHTML: _unref(getThemeIcon)(Object.keys(__props.mappedFields).length > 0 ? 'check' : 'warning')\n      }, null, 8, _hoisted_13), _createElementVNode(\"span\", null, _toDisplayString(Object.keys(__props.mappedFields).length) + \" field(s) configured\", 1)], 2)])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","getThemeIcon","props","__props","emit","__emit","dragOverZone","handleDragOver","zone","value","handleDragLeave","handleDrop","event","targetZone","preventDefault","dragData","JSON","parse","dataTransfer","getData","type","source","column","fieldKey","Date","now","Math","random","toString","substr","mapping","error","console","removeField"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/chart-mappings/ChartMappingBasic.vue"],"sourcesContent":["<template>\n  <div class=\"chart-mapping-basic\">\n    <!-- 通用数据字段拖拽区域 -->\n    <div class=\"mapping-section\">\n      <label class=\"section-label\">Data Fields</label>\n      <div \n        class=\"drop-zone-large\"\n        :class=\"{ \n          'has-fields': Object.keys(mappedFields).length > 0,\n          'drag-over': dragOverZone === 'general'\n        }\"\n        @drop=\"handleDrop($event, 'general')\"\n        @dragover.prevent=\"handleDragOver('general')\"\n        @dragleave=\"handleDragLeave\"\n        @dragenter.prevent>\n        \n        <div v-if=\"Object.keys(mappedFields).length === 0\" class=\"drop-placeholder\">\n          <span class=\"placeholder-icon\" v-html=\"getThemeIcon('drag')\"></span>\n          <span class=\"placeholder-text\">Drop data fields here</span>\n          <span class=\"placeholder-hint\">Add multiple fields to create your chart</span>\n        </div>\n        \n        <div v-else class=\"mapped-fields-grid\">\n          <div \n            v-for=\"(field, key) in mappedFields\" \n            :key=\"key\"\n            class=\"mapped-field-card\">\n            <div class=\"field-header\">\n              <span class=\"field-name\">{{ field.name }}</span>\n              <button \n                class=\"remove-btn\"\n                @click=\"removeField(key)\"\n                title=\"Remove field\">\n                <span v-html=\"getThemeIcon('remove')\"></span>\n              </button>\n            </div>\n            <div class=\"field-info\">\n              <span class=\"field-type\" :class=\"`type-${field.type}`\">\n                {{ field.type }}\n              </span>\n              <span class=\"field-sample\">{{ field.sample || 'No sample' }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 字段使用提示 -->\n    <div class=\"usage-hints\">\n      <h5>Usage Tips:</h5>\n      <ul>\n        <li>Add numeric fields for values and measurements</li>\n        <li>Add category fields for grouping and labels</li>\n        <li>Mix different data types based on chart requirements</li>\n        <li>Remove fields by clicking the × button on each field</li>\n      </ul>\n    </div>\n\n    <!-- 验证状态 -->\n    <div class=\"validation-status\">\n      <div class=\"validation-item\" :class=\"{ 'valid': Object.keys(mappedFields).length > 0 }\">\n        <span v-html=\"getThemeIcon(Object.keys(mappedFields).length > 0 ? 'check' : 'warning')\"></span>\n        <span>{{ Object.keys(mappedFields).length }} field(s) configured</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref } from 'vue'\nimport { getThemeIcon } from '@/assets/JS/icons.js'\n\n// Props\nconst props = defineProps({\n  mappedFields: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\n// Emits\nconst emit = defineEmits(['field-mapped', 'field-removed'])\n\n// 拖拽状态\nconst dragOverZone = ref(null)\n\n// 处理拖拽悬停\nfunction handleDragOver(zone) {\n  dragOverZone.value = zone\n}\n\n// 处理拖拽离开\nfunction handleDragLeave() {\n  dragOverZone.value = null\n}\n\n// 处理字段拖拽放置\nfunction handleDrop(event, targetZone) {\n  event.preventDefault()\n  dragOverZone.value = null\n  \n  try {\n    const dragData = JSON.parse(event.dataTransfer.getData('application/json'))\n    \n    if (dragData.type === 'column' && dragData.source === 'file-structure') {\n      const column = dragData.column\n      \n      // 生成唯一的字段键\n      const fieldKey = `field_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n      const mapping = { [fieldKey]: column }\n      \n      emit('field-mapped', mapping)\n    }\n  } catch (error) {\n    console.error('Error handling drop:', error)\n  }\n}\n\n// 移除字段映射\nfunction removeField(fieldKey) {\n  emit('field-removed', fieldKey)\n}\n</script>\n\n<style scoped>\n.chart-mapping-basic {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 4px;\n}\n\n/* 映射区域 */\n.mapping-section {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.section-label {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-color);\n}\n\n/* 大型拖拽区域 */\n.drop-zone-large {\n  min-height: 120px;\n  border: 2px dashed rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  background: rgba(0, 0, 0, 0.02);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  position: relative;\n  padding: 16px;\n}\n\n[data-theme=\"dark\"] .drop-zone-large {\n  border: 2px dashed rgba(255, 255, 255, 0.1);\n  background: rgba(255, 255, 255, 0.02);\n}\n\n.drop-zone-large.drag-over {\n  border-color: #3b82f6;\n  background: rgba(59, 130, 246, 0.05);\n  transform: scale(1.01);\n}\n\n.drop-zone-large.has-fields {\n  border: 2px solid rgba(34, 197, 94, 0.3);\n  background: rgba(34, 197, 94, 0.05);\n  align-items: stretch;\n}\n\n/* 占位符样式 */\n.drop-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  text-align: center;\n}\n\n.placeholder-icon {\n  width: 32px;\n  height: 32px;\n  opacity: 0.4;\n}\n\n.placeholder-icon svg {\n  width: 100%;\n  height: 100%;\n}\n\n.placeholder-text {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.placeholder-hint {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n\n/* 已映射字段网格 */\n.mapped-fields-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 12px;\n  width: 100%;\n}\n\n.mapped-field-card {\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 6px;\n  padding: 12px;\n  transition: all 0.2s ease;\n}\n\n[data-theme=\"dark\"] .mapped-field-card {\n  background: rgba(55, 65, 81, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n.mapped-field-card:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.field-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n\n.field-name {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-color);\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.remove-btn {\n  background: none;\n  border: none;\n  padding: 2px;\n  border-radius: 3px;\n  cursor: pointer;\n  color: var(--text-secondary);\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.remove-btn:hover {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n\n.remove-btn svg {\n  width: 12px;\n  height: 12px;\n}\n\n.field-info {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.field-type {\n  font-size: 10px;\n  font-weight: 500;\n  padding: 2px 6px;\n  border-radius: 3px;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n  align-self: flex-start;\n}\n\n.field-sample {\n  font-size: 11px;\n  color: var(--text-secondary);\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  background: rgba(0, 0, 0, 0.05);\n  padding: 2px 4px;\n  border-radius: 3px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n[data-theme=\"dark\"] .field-sample {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n/* 字段类型样式 */\n.type-string {\n  background: rgba(34, 197, 94, 0.15);\n  color: #059669;\n}\n\n.type-number,\n.type-integer {\n  background: rgba(59, 130, 246, 0.15);\n  color: #1d4ed8;\n}\n\n.type-category {\n  background: rgba(236, 72, 153, 0.15);\n  color: #be185d;\n}\n\n.type-boolean {\n  background: rgba(139, 92, 246, 0.15);\n  color: #7c3aed;\n}\n\n.type-date {\n  background: rgba(245, 158, 11, 0.15);\n  color: #d97706;\n}\n\n[data-theme=\"dark\"] .type-string {\n  background: rgba(34, 197, 94, 0.25);\n  color: #22c55e;\n}\n\n[data-theme=\"dark\"] .type-number,\n[data-theme=\"dark\"] .type-integer {\n  background: rgba(59, 130, 246, 0.25);\n  color: #60a5fa;\n}\n\n[data-theme=\"dark\"] .type-category {\n  background: rgba(236, 72, 153, 0.25);\n  color: #f472b6;\n}\n\n[data-theme=\"dark\"] .type-boolean {\n  background: rgba(139, 92, 246, 0.25);\n  color: #a78bfa;\n}\n\n[data-theme=\"dark\"] .type-date {\n  background: rgba(245, 158, 11, 0.25);\n  color: #fbbf24;\n}\n\n/* 使用提示 */\n.usage-hints {\n  padding: 12px;\n  background: rgba(107, 114, 128, 0.05);\n  border: 1px solid rgba(107, 114, 128, 0.1);\n  border-radius: 6px;\n}\n\n[data-theme=\"dark\"] .usage-hints {\n  background: rgba(107, 114, 128, 0.1);\n  border: 1px solid rgba(107, 114, 128, 0.2);\n}\n\n.usage-hints h5 {\n  margin: 0 0 8px 0;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-color);\n}\n\n.usage-hints ul {\n  margin: 0;\n  padding-left: 16px;\n  font-size: 11px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n\n.usage-hints li {\n  margin-bottom: 2px;\n}\n\n/* 验证状态 */\n.validation-status {\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.02);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  border-radius: 6px;\n}\n\n[data-theme=\"dark\"] .validation-status {\n  background: rgba(255, 255, 255, 0.02);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.validation-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n\n.validation-item.valid {\n  color: #059669;\n}\n\n.validation-item svg {\n  width: 14px;\n  height: 14px;\n}\n\n/* 响应式适配 */\n@media (max-width: 768px) {\n  .chart-mapping-basic {\n    gap: 16px;\n  }\n  \n  .drop-zone-large {\n    min-height: 100px;\n    padding: 12px;\n  }\n  \n  .mapped-fields-grid {\n    grid-template-columns: 1fr;\n    gap: 10px;\n  }\n  \n  .mapped-field-card {\n    padding: 10px;\n  }\n  \n  .field-name {\n    font-size: 12px;\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,SAASA,GAAG,QAAQ,KAAI;AACxB,SAASC,YAAY,QAAQ,sBAAqB;;AAElD;;;;;;;;;;;;;;IAJA;IAKA,MAAMC,KAAK,GAAGC,OAAA;;IAOd;IACA,MAAMC,IAAI,GAAGC,MAAA;;IAEb;IACA,MAAMC,YAAY,GAAGN,GAAG,CAAC,IAAI;;IAE7B;IACA,SAASO,cAAcA,CAACC,IAAI,EAAE;MAC5BF,YAAY,CAACG,KAAK,GAAGD,IAAG;IAC1B;;IAEA;IACA,SAASE,eAAeA,CAAA,EAAG;MACzBJ,YAAY,CAACG,KAAK,GAAG,IAAG;IAC1B;;IAEA;IACA,SAASE,UAAUA,CAACC,KAAK,EAAEC,UAAU,EAAE;MACrCD,KAAK,CAACE,cAAc,CAAC;MACrBR,YAAY,CAACG,KAAK,GAAG,IAAG;MAExB,IAAI;QACF,MAAMM,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACL,KAAK,CAACM,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC;QAE1E,IAAIJ,QAAQ,CAACK,IAAI,KAAK,QAAQ,IAAIL,QAAQ,CAACM,MAAM,KAAK,gBAAgB,EAAE;UACtE,MAAMC,MAAM,GAAGP,QAAQ,CAACO,MAAK;;UAE7B;UACA,MAAMC,QAAQ,GAAG,SAASC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC;UAChF,MAAMC,OAAO,GAAG;YAAE,CAACP,QAAQ,GAAGD;UAAO;UAErClB,IAAI,CAAC,cAAc,EAAE0B,OAAO;QAC9B;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK;MAC7C;IACF;;IAEA;IACA,SAASE,WAAWA,CAACV,QAAQ,EAAE;MAC7BnB,IAAI,CAAC,eAAe,EAAEmB,QAAQ;IAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}