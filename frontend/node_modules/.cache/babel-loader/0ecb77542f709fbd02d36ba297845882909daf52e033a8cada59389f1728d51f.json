{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue';\n\n// Props\n\nexport default {\n  __name: 'FileStructureModal',\n  props: {\n    show: {\n      type: Boolean,\n      default: false\n    },\n    files: {\n      type: Array,\n      default: () => []\n    },\n    initialPosition: {\n      type: Object,\n      default: () => ({\n        x: 100,\n        y: 100\n      })\n    }\n  },\n  emits: ['close', 'column-drag', 'temp-dataset-created'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n\n    // 状态\n    const isMinimized = ref(false);\n    const isDragging = ref(false);\n    const activeFileIndex = ref(0);\n    const selectedColumns = ref([]);\n    const fileStructures = ref({});\n\n    // 拖拽相关\n    const dragOffset = ref({\n      x: 0,\n      y: 0\n    });\n    const modalPosition = ref({\n      position: 'fixed',\n      left: `${props.initialPosition.x}px`,\n      top: `${props.initialPosition.y}px`,\n      zIndex: 1000\n    });\n\n    // 计算属性\n    const currentFile = computed(() => {\n      return props.files[activeFileIndex.value];\n    });\n    const currentFileStructure = computed(() => {\n      return currentFile.value ? fileStructures.value[currentFile.value.id] : null;\n    });\n\n    // 监听文件变化\n    watch(() => props.files, newFiles => {\n      if (newFiles.length > 0) {\n        activeFileIndex.value = 0;\n        loadFileStructures(newFiles);\n      }\n    }, {\n      immediate: true\n    });\n\n    // 监听当前文件变化\n    watch(currentFile, newFile => {\n      if (newFile && !fileStructures.value[newFile.id]) {\n        loadFileStructure(newFile);\n      }\n      selectedColumns.value = [];\n    });\n\n    // 方法\n    async function loadFileStructures(files) {\n      for (const file of files) {\n        if (!fileStructures.value[file.id]) {\n          await loadFileStructure(file);\n        }\n      }\n    }\n    async function loadFileStructure(file) {\n      try {\n        // 模拟文件结构分析\n        const structure = await analyzeFileStructure(file);\n        fileStructures.value[file.id] = structure;\n      } catch (error) {\n        console.error('Failed to analyze file structure:', error);\n      }\n    }\n    async function analyzeFileStructure(file) {\n      // 模拟异步分析文件结构\n      return new Promise(resolve => {\n        setTimeout(() => {\n          // 模拟返回的文件结构数据\n          const mockStructure = {\n            columns: [{\n              name: '姓名',\n              type: 'string',\n              samples: ['张三', '李四', '王五', '赵六'],\n              nonNullCount: 100,\n              uniqueCount: 95\n            }, {\n              name: '年龄',\n              type: 'number',\n              samples: [25, 30, 35, 28],\n              nonNullCount: 98,\n              uniqueCount: 45\n            }, {\n              name: '城市',\n              type: 'string',\n              samples: ['北京', '上海', '广州', '深圳'],\n              nonNullCount: 100,\n              uniqueCount: 20\n            }, {\n              name: '薪资',\n              type: 'number',\n              samples: [8000, 12000, 15000, 9500],\n              nonNullCount: 95,\n              uniqueCount: 80\n            }, {\n              name: '入职日期',\n              type: 'date',\n              samples: ['2020-01-15', '2019-03-20', '2021-06-10', '2020-11-05'],\n              nonNullCount: 100,\n              uniqueCount: 100\n            }]\n          };\n          resolve(mockStructure);\n        }, 1000);\n      });\n    }\n    function getFileType(fileName) {\n      const ext = fileName.split('.').pop().toLowerCase();\n      const typeMap = {\n        'csv': 'CSV',\n        'xlsx': 'Excel',\n        'xls': 'Excel',\n        'json': 'JSON',\n        'txt': 'Text'\n      };\n      return typeMap[ext] || 'Unknown';\n    }\n    function formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n    function toggleMinimize() {\n      isMinimized.value = !isMinimized.value;\n    }\n    function closeModal() {\n      emit('close');\n    }\n    function toggleColumnSelection(columnName) {\n      const index = selectedColumns.value.indexOf(columnName);\n      if (index > -1) {\n        selectedColumns.value.splice(index, 1);\n      } else {\n        selectedColumns.value.push(columnName);\n      }\n    }\n    function selectAllColumns() {\n      if (currentFileStructure.value) {\n        selectedColumns.value = currentFileStructure.value.columns.map(col => col.name);\n      }\n    }\n    function deselectAllColumns() {\n      selectedColumns.value = [];\n    }\n    function startColumnDrag(event, column) {\n      const dragData = {\n        name: column.name,\n        type: column.type,\n        fileId: currentFile.value.id,\n        fileName: currentFile.value.name,\n        samples: column.samples\n      };\n      event.dataTransfer.setData('text/plain', JSON.stringify(dragData));\n      event.dataTransfer.effectAllowed = 'copy';\n      emit('column-drag', dragData);\n    }\n    function createTempDataset() {\n      if (selectedColumns.value.length === 0) return;\n      const datasetInfo = {\n        fileId: currentFile.value.id,\n        fileName: currentFile.value.name,\n        columns: selectedColumns.value,\n        structure: currentFileStructure.value\n      };\n      emit('temp-dataset-created', datasetInfo);\n    }\n    function exportStructure() {\n      if (!currentFileStructure.value) return;\n      const structureData = {\n        fileName: currentFile.value.name,\n        columns: currentFileStructure.value.columns,\n        exportDate: new Date().toISOString()\n      };\n      const blob = new Blob([JSON.stringify(structureData, null, 2)], {\n        type: 'application/json'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${currentFile.value.name}_structure.json`;\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n\n    // 拖拽窗口\n    function startDrag(event) {\n      if (event.target.closest('.modal-body')) return;\n      isDragging.value = true;\n      dragOffset.value = {\n        x: event.clientX - parseInt(modalPosition.value.left),\n        y: event.clientY - parseInt(modalPosition.value.top)\n      };\n      document.addEventListener('mousemove', handleDrag);\n      document.addEventListener('mouseup', stopDrag);\n    }\n    function handleDrag(event) {\n      if (!isDragging.value) return;\n      modalPosition.value = {\n        ...modalPosition.value,\n        left: `${event.clientX - dragOffset.value.x}px`,\n        top: `${event.clientY - dragOffset.value.y}px`\n      };\n    }\n    function stopDrag() {\n      isDragging.value = false;\n      document.removeEventListener('mousemove', handleDrag);\n      document.removeEventListener('mouseup', stopDrag);\n    }\n\n    // 生命周期\n    onMounted(() => {\n      if (props.files.length > 0) {\n        loadFileStructures(props.files);\n      }\n    });\n    onUnmounted(() => {\n      document.removeEventListener('mousemove', handleDrag);\n      document.removeEventListener('mouseup', stopDrag);\n    });\n    const __returned__ = {\n      props,\n      emit,\n      isMinimized,\n      isDragging,\n      activeFileIndex,\n      selectedColumns,\n      fileStructures,\n      dragOffset,\n      modalPosition,\n      currentFile,\n      currentFileStructure,\n      loadFileStructures,\n      loadFileStructure,\n      analyzeFileStructure,\n      getFileType,\n      formatFileSize,\n      toggleMinimize,\n      closeModal,\n      toggleColumnSelection,\n      selectAllColumns,\n      deselectAllColumns,\n      startColumnDrag,\n      createTempDataset,\n      exportStructure,\n      startDrag,\n      handleDrag,\n      stopDrag,\n      ref,\n      computed,\n      watch,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","onMounted","onUnmounted","props","__props","emit","__emit","isMinimized","isDragging","activeFileIndex","selectedColumns","fileStructures","dragOffset","x","y","modalPosition","position","left","initialPosition","top","zIndex","currentFile","files","value","currentFileStructure","id","newFiles","length","loadFileStructures","immediate","newFile","loadFileStructure","file","structure","analyzeFileStructure","error","console","Promise","resolve","setTimeout","mockStructure","columns","name","type","samples","nonNullCount","uniqueCount","getFileType","fileName","ext","split","pop","toLowerCase","typeMap","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","toggleMinimize","closeModal","toggleColumnSelection","columnName","index","indexOf","splice","push","selectAllColumns","map","col","deselectAllColumns","startColumnDrag","event","column","dragData","fileId","dataTransfer","setData","JSON","stringify","effectAllowed","createTempDataset","datasetInfo","exportStructure","structureData","exportDate","Date","toISOString","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","startDrag","target","closest","clientX","parseInt","clientY","addEventListener","handleDrag","stopDrag","removeEventListener"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/FileStructureModal.vue"],"sourcesContent":["<template>\n<div\n  v-if=\"show\"\n  class=\"file-structure-modal\"\n  @click=\"closeModal\">\n  <div\n    class=\"modal-content\"\n    :style=\"modalPosition\"\n    @click.stop\n    @mousedown=\"startDrag\">\n    \n    <div class=\"modal-header\">\n      <h3>文件结构</h3>\n      <div class=\"header-actions\">\n        <button class=\"minimize-btn\" @click=\"toggleMinimize\">\n          {{ isMinimized ? '□' : '−' }}\n        </button>\n        <button class=\"close-btn\" @click=\"closeModal\">\n          ×\n        </button>\n      </div>\n    </div>\n\n    <div v-if=\"!isMinimized\" class=\"modal-body\">\n      <div class=\"file-tabs\">\n        <div\n          v-for=\"(file, index) in files\"\n          :key=\"file.id\"\n          class=\"file-tab\"\n          :class=\"{ active: activeFileIndex === index }\"\n          @click=\"activeFileIndex = index\">\n          <span class=\"file-name\">{{ file.name }}</span>\n          <span class=\"file-type\">{{ getFileType(file.name) }}</span>\n        </div>\n      </div>\n\n      <div v-if=\"currentFile\" class=\"file-content\">\n        <div class=\"file-info\">\n          <h4>{{ currentFile.name }}</h4>\n          <p class=\"file-meta\">\n            大小: {{ formatFileSize(currentFile.size) }} | \n            类型: {{ getFileType(currentFile.name) }}\n          </p>\n        </div>\n\n        <div v-if=\"currentFileStructure\" class=\"structure-content\">\n          <div class=\"structure-header\">\n            <h5>列结构 ({{ currentFileStructure.columns.length }})</h5>\n            <div class=\"structure-actions\">\n              <button \n                class=\"action-btn\"\n                @click=\"selectAllColumns\">\n                全选\n              </button>\n              <button \n                class=\"action-btn\"\n                @click=\"deselectAllColumns\">\n                全不选\n              </button>\n            </div>\n          </div>\n\n          <div class=\"columns-list\">\n            <div \n              v-for=\"column in currentFileStructure.columns\"\n              :key=\"column.name\"\n              class=\"column-item\"\n              :class=\"{ selected: selectedColumns.includes(column.name) }\"\n              @click=\"toggleColumnSelection(column.name)\">\n              \n              <div class=\"column-header\">\n                <div class=\"column-basic-info\">\n                  <span class=\"column-name\">{{ column.name }}</span>\n                  <span class=\"column-type\" :class=\"column.type\">\n                    {{ column.type }}\n                  </span>\n                </div>\n                <div class=\"column-actions\">\n                  <button \n                    class=\"drag-handle\"\n                    draggable=\"true\"\n                    @dragstart=\"startColumnDrag($event, column)\"\n                    title=\"拖拽到配置面板\">\n                    ⋮⋮\n                  </button>\n                </div>\n              </div>\n\n              <div class=\"column-details\">\n                <div class=\"sample-data\">\n                  <span class=\"label\">样本数据:</span>\n                  <span class=\"sample-values\">\n                    {{ column.samples.slice(0, 3).join(', ') }}\n                    <span v-if=\"column.samples.length > 3\">...</span>\n                  </span>\n                </div>\n                <div class=\"column-stats\">\n                  <span class=\"stat-item\">\n                    <span class=\"stat-label\">非空:</span>\n                    <span class=\"stat-value\">{{ column.nonNullCount }}</span>\n                  </span>\n                  <span class=\"stat-item\">\n                    <span class=\"stat-label\">唯一值:</span>\n                    <span class=\"stat-value\">{{ column.uniqueCount }}</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"structure-footer\">\n            <div class=\"selected-info\">\n              已选择 {{ selectedColumns.length }} 列\n            </div>\n            <div class=\"footer-actions\">\n              <button \n                class=\"action-btn primary\"\n                @click=\"createTempDataset\"\n                :disabled=\"selectedColumns.length === 0\">\n                创建临时数据集\n              </button>\n              <button \n                class=\"action-btn\"\n                @click=\"exportStructure\">\n                导出结构\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div v-else class=\"loading-structure\">\n          <div class=\"loading-spinner\"></div>\n          <p>正在分析文件结构...</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue'\n\n// Props\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false\n  },\n  files: {\n    type: Array,\n    default: () => []\n  },\n  initialPosition: {\n    type: Object,\n    default: () => ({ x: 100, y: 100 })\n  }\n})\n\n// Emits\nconst emit = defineEmits(['close', 'column-drag', 'temp-dataset-created'])\n\n// 状态\nconst isMinimized = ref(false)\nconst isDragging = ref(false)\nconst activeFileIndex = ref(0)\nconst selectedColumns = ref([])\nconst fileStructures = ref({})\n\n// 拖拽相关\nconst dragOffset = ref({ x: 0, y: 0 })\nconst modalPosition = ref({\n  position: 'fixed',\n  left: `${props.initialPosition.x}px`,\n  top: `${props.initialPosition.y}px`,\n  zIndex: 1000\n})\n\n// 计算属性\nconst currentFile = computed(() => {\n  return props.files[activeFileIndex.value]\n})\n\nconst currentFileStructure = computed(() => {\n  return currentFile.value ? fileStructures.value[currentFile.value.id] : null\n})\n\n// 监听文件变化\nwatch(() => props.files, (newFiles) => {\n  if (newFiles.length > 0) {\n    activeFileIndex.value = 0\n    loadFileStructures(newFiles)\n  }\n}, { immediate: true })\n\n// 监听当前文件变化\nwatch(currentFile, (newFile) => {\n  if (newFile && !fileStructures.value[newFile.id]) {\n    loadFileStructure(newFile)\n  }\n  selectedColumns.value = []\n})\n\n// 方法\nasync function loadFileStructures(files) {\n  for (const file of files) {\n    if (!fileStructures.value[file.id]) {\n      await loadFileStructure(file)\n    }\n  }\n}\n\nasync function loadFileStructure(file) {\n  try {\n    // 模拟文件结构分析\n    const structure = await analyzeFileStructure(file)\n    fileStructures.value[file.id] = structure\n  } catch (error) {\n    console.error('Failed to analyze file structure:', error)\n  }\n}\n\nasync function analyzeFileStructure(file) {\n  // 模拟异步分析文件结构\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      // 模拟返回的文件结构数据\n      const mockStructure = {\n        columns: [\n          {\n            name: '姓名',\n            type: 'string',\n            samples: ['张三', '李四', '王五', '赵六'],\n            nonNullCount: 100,\n            uniqueCount: 95\n          },\n          {\n            name: '年龄',\n            type: 'number',\n            samples: [25, 30, 35, 28],\n            nonNullCount: 98,\n            uniqueCount: 45\n          },\n          {\n            name: '城市',\n            type: 'string',\n            samples: ['北京', '上海', '广州', '深圳'],\n            nonNullCount: 100,\n            uniqueCount: 20\n          },\n          {\n            name: '薪资',\n            type: 'number',\n            samples: [8000, 12000, 15000, 9500],\n            nonNullCount: 95,\n            uniqueCount: 80\n          },\n          {\n            name: '入职日期',\n            type: 'date',\n            samples: ['2020-01-15', '2019-03-20', '2021-06-10', '2020-11-05'],\n            nonNullCount: 100,\n            uniqueCount: 100\n          }\n        ]\n      }\n      resolve(mockStructure)\n    }, 1000)\n  })\n}\n\nfunction getFileType(fileName) {\n  const ext = fileName.split('.').pop().toLowerCase()\n  const typeMap = {\n    'csv': 'CSV',\n    'xlsx': 'Excel',\n    'xls': 'Excel',\n    'json': 'JSON',\n    'txt': 'Text'\n  }\n  return typeMap[ext] || 'Unknown'\n}\n\nfunction formatFileSize(bytes) {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nfunction toggleMinimize() {\n  isMinimized.value = !isMinimized.value\n}\n\nfunction closeModal() {\n  emit('close')\n}\n\nfunction toggleColumnSelection(columnName) {\n  const index = selectedColumns.value.indexOf(columnName)\n  if (index > -1) {\n    selectedColumns.value.splice(index, 1)\n  } else {\n    selectedColumns.value.push(columnName)\n  }\n}\n\nfunction selectAllColumns() {\n  if (currentFileStructure.value) {\n    selectedColumns.value = currentFileStructure.value.columns.map(col => col.name)\n  }\n}\n\nfunction deselectAllColumns() {\n  selectedColumns.value = []\n}\n\nfunction startColumnDrag(event, column) {\n  const dragData = {\n    name: column.name,\n    type: column.type,\n    fileId: currentFile.value.id,\n    fileName: currentFile.value.name,\n    samples: column.samples\n  }\n  \n  event.dataTransfer.setData('text/plain', JSON.stringify(dragData))\n  event.dataTransfer.effectAllowed = 'copy'\n  \n  emit('column-drag', dragData)\n}\n\nfunction createTempDataset() {\n  if (selectedColumns.value.length === 0) return\n  \n  const datasetInfo = {\n    fileId: currentFile.value.id,\n    fileName: currentFile.value.name,\n    columns: selectedColumns.value,\n    structure: currentFileStructure.value\n  }\n  \n  emit('temp-dataset-created', datasetInfo)\n}\n\nfunction exportStructure() {\n  if (!currentFileStructure.value) return\n  \n  const structureData = {\n    fileName: currentFile.value.name,\n    columns: currentFileStructure.value.columns,\n    exportDate: new Date().toISOString()\n  }\n  \n  const blob = new Blob([JSON.stringify(structureData, null, 2)], { type: 'application/json' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `${currentFile.value.name}_structure.json`\n  a.click()\n  URL.revokeObjectURL(url)\n}\n\n// 拖拽窗口\nfunction startDrag(event) {\n  if (event.target.closest('.modal-body')) return\n  \n  isDragging.value = true\n  dragOffset.value = {\n    x: event.clientX - parseInt(modalPosition.value.left),\n    y: event.clientY - parseInt(modalPosition.value.top)\n  }\n  \n  document.addEventListener('mousemove', handleDrag)\n  document.addEventListener('mouseup', stopDrag)\n}\n\nfunction handleDrag(event) {\n  if (!isDragging.value) return\n  \n  modalPosition.value = {\n    ...modalPosition.value,\n    left: `${event.clientX - dragOffset.value.x}px`,\n    top: `${event.clientY - dragOffset.value.y}px`\n  }\n}\n\nfunction stopDrag() {\n  isDragging.value = false\n  document.removeEventListener('mousemove', handleDrag)\n  document.removeEventListener('mouseup', stopDrag)\n}\n\n// 生命周期\nonMounted(() => {\n  if (props.files.length > 0) {\n    loadFileStructures(props.files)\n  }\n})\n\nonUnmounted(() => {\n  document.removeEventListener('mousemove', handleDrag)\n  document.removeEventListener('mouseup', stopDrag)\n})\n</script>\n\n<style scoped>\n.file-structure-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: var(--bg-color);\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  width: 600px;\n  max-width: 90vw;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  user-select: none;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  cursor: move;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n  font-size: 16px;\n}\n\n.header-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.minimize-btn,\n.close-btn {\n  background: none;\n  border: none;\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 16px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background 0.2s;\n}\n\n.minimize-btn:hover,\n.close-btn:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.modal-body {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.file-tabs {\n  display: flex;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-color-secondary);\n  overflow-x: auto;\n}\n\n.file-tab {\n  padding: 12px 16px;\n  border-bottom: 2px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  min-width: 0;\n  flex-shrink: 0;\n}\n\n.file-tab:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n\n.file-tab.active {\n  border-bottom-color: var(--primary-color);\n  background: var(--bg-color);\n}\n\n.file-name {\n  font-weight: 500;\n  color: var(--text-color);\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.file-type {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n  background: var(--bg-color-secondary);\n  padding: 2px 6px;\n  border-radius: 4px;\n}\n\n.file-content {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.file-info {\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.file-info h4 {\n  margin: 0 0 4px 0;\n  color: var(--text-color);\n  font-size: 14px;\n}\n\n.file-meta {\n  margin: 0;\n  color: var(--text-color-secondary);\n  font-size: 12px;\n}\n\n.structure-content {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.structure-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.structure-header h5 {\n  margin: 0;\n  color: var(--text-color);\n  font-size: 14px;\n}\n\n.structure-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.action-btn {\n  padding: 4px 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background: var(--bg-color);\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s;\n}\n\n.action-btn:hover {\n  background: var(--bg-color-secondary);\n}\n\n.action-btn.primary {\n  background: var(--primary-color);\n  color: white;\n  border-color: var(--primary-color);\n}\n\n.action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.columns-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.column-item {\n  margin-bottom: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  padding: 12px;\n  background: var(--bg-color);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.column-item:hover {\n  background: var(--bg-color-secondary);\n  border-color: var(--primary-color);\n}\n\n.column-item.selected {\n  background: rgba(0, 123, 255, 0.1);\n  border-color: var(--primary-color);\n}\n\n.column-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.column-basic-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.column-name {\n  font-weight: 500;\n  color: var(--text-color);\n  font-size: 14px;\n}\n\n.column-type {\n  font-size: 12px;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 500;\n}\n\n.column-type.string {\n  background: rgba(108, 117, 125, 0.2);\n  color: #6c757d;\n}\n\n.column-type.number {\n  background: rgba(0, 123, 255, 0.2);\n  color: #007bff;\n}\n\n.column-type.date {\n  background: rgba(40, 167, 69, 0.2);\n  color: #28a745;\n}\n\n.column-actions {\n  display: flex;\n  gap: 4px;\n}\n\n.drag-handle {\n  background: none;\n  border: none;\n  color: var(--text-color-secondary);\n  cursor: grab;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n\n.drag-handle:hover {\n  background: rgba(0, 0, 0, 0.1);\n  color: var(--text-color);\n}\n\n.drag-handle:active {\n  cursor: grabbing;\n}\n\n.column-details {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.sample-data {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.label {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n  font-weight: 500;\n}\n\n.sample-values {\n  font-size: 12px;\n  color: var(--text-color);\n  font-family: monospace;\n}\n\n.column-stats {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.stat-item {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.stat-label {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n}\n\n.stat-value {\n  font-size: 12px;\n  color: var(--text-color);\n  font-weight: 500;\n}\n\n.structure-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-top: 1px solid var(--border-color);\n  background: var(--bg-color-secondary);\n}\n\n.selected-info {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n}\n\n.footer-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.loading-structure {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n}\n\n.loading-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--border-color);\n  border-top: 3px solid var(--primary-color);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 16px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-structure p {\n  color: var(--text-color-secondary);\n  margin: 0;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .modal-content {\n    width: 95vw;\n    max-height: 85vh;\n  }\n  \n  .file-tabs {\n    flex-wrap: wrap;\n  }\n  \n  .structure-header {\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n  }\n  \n  .structure-footer {\n    flex-direction: column;\n    gap: 8px;\n    align-items: stretch;\n  }\n  \n  .column-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 8px;\n  }\n  \n  .column-stats {\n    flex-direction: column;\n    gap: 8px;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}