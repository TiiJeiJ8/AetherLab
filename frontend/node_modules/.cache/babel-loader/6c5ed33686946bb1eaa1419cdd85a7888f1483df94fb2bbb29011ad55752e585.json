{"ast":null,"code":"import { computed } from 'vue';\nexport default {\n  __name: 'MappingItem',\n  props: {\n    field: {\n      type: Object,\n      required: true\n    },\n    mapping: {\n      type: [Object, Array],\n      default: null\n    },\n    isDragOver: {\n      type: Boolean,\n      default: false\n    },\n    hasError: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['drop', 'drag-enter', 'drag-leave', 'drag-over', 'remove-mapping', 'remove-series'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const hasMapping = computed(() => {\n      if (props.field.allowMultiple) {\n        return Array.isArray(props.mapping) && props.mapping.length > 0;\n      }\n      return props.mapping && props.mapping.field;\n    });\n    function handleDrop(event) {\n      emit('drop', event, props.field.name);\n    }\n    function handleDragEnter(event) {\n      emit('drag-enter', props.field.name);\n    }\n    function handleDragLeave(event) {\n      emit('drag-leave', props.field.name);\n    }\n    function handleDragOver(event) {\n      emit('drag-over', event, props.field.name);\n    }\n    function removeMapping() {\n      emit('remove-mapping', props.field.name);\n    }\n    function removeSeries(index) {\n      emit('remove-series', props.field.name, index);\n    }\n    const __returned__ = {\n      props,\n      emit,\n      hasMapping,\n      handleDrop,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragOver,\n      removeMapping,\n      removeSeries,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","props","__props","emit","__emit","hasMapping","field","allowMultiple","Array","isArray","mapping","length","handleDrop","event","name","handleDragEnter","handleDragLeave","handleDragOver","removeMapping","removeSeries","index"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/MappingItem.vue"],"sourcesContent":["<template>\n  <div class=\"mapping-item\">\n    <div class=\"mapping-item-header\">\n      <label class=\"mapping-label\">\n        {{ field.label }}\n        <span v-if=\"field.required\" class=\"required-star\">*</span>\n      </label>\n      <div class=\"mapping-type-tag\">{{ field.type }}</div>\n    </div>\n    \n    <div\n      class=\"drop-zone\"\n      :class=\"{\n        'drop-zone-active': isDragOver,\n        'drop-zone-filled': hasMapping,\n        'drop-zone-error': hasError\n      }\"\n      @drop=\"handleDrop\"\n      @dragover.prevent=\"handleDragOver\"\n      @dragenter.prevent=\"handleDragEnter\"\n      @dragleave.prevent=\"handleDragLeave\"\n    >\n      <div v-if=\"!hasMapping\" class=\"drop-placeholder\">\n        <div class=\"drop-icon\">↓</div>\n        <span class=\"drop-text\">Drag column here</span>\n      </div>\n      \n      <div v-else class=\"mapped-content\">\n        <!-- 单个字段映射 -->\n        <div \n          v-if=\"!field.allowMultiple\"\n          class=\"mapped-field\"\n        >\n          <div class=\"field-info\">\n            <span class=\"field-name\">{{ mapping.field }}</span>\n            <span class=\"field-type\">{{ mapping.type }}</span>\n          </div>\n          <button class=\"remove-btn\" @click=\"removeMapping\">×</button>\n        </div>\n        \n        <!-- 多个字段映射（如系列） -->\n        <div \n          v-else\n          class=\"mapped-series\"\n        >\n          <div\n            v-for=\"(item, index) in mapping\"\n            :key=\"index\"\n            class=\"mapped-field\"\n          >\n            <div class=\"field-info\">\n              <span class=\"field-name\">{{ item.field }}</span>\n              <span class=\"field-type\">{{ item.type }}</span>\n            </div>\n            <button class=\"remove-btn\" @click=\"removeSeries(index)\">×</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  field: {\n    type: Object,\n    required: true\n  },\n  mapping: {\n    type: [Object, Array],\n    default: null\n  },\n  isDragOver: {\n    type: Boolean,\n    default: false\n  },\n  hasError: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits([\n  'drop',\n  'drag-enter',\n  'drag-leave', \n  'drag-over',\n  'remove-mapping',\n  'remove-series'\n])\n\nconst hasMapping = computed(() => {\n  if (props.field.allowMultiple) {\n    return Array.isArray(props.mapping) && props.mapping.length > 0\n  }\n  return props.mapping && props.mapping.field\n})\n\nfunction handleDrop(event) {\n  emit('drop', event, props.field.name)\n}\n\nfunction handleDragEnter(event) {\n  emit('drag-enter', props.field.name)\n}\n\nfunction handleDragLeave(event) {\n  emit('drag-leave', props.field.name)\n}\n\nfunction handleDragOver(event) {\n  emit('drag-over', event, props.field.name)\n}\n\nfunction removeMapping() {\n  emit('remove-mapping', props.field.name)\n}\n\nfunction removeSeries(index) {\n  emit('remove-series', props.field.name, index)\n}\n</script>\n\n<style scoped>\n.mapping-item {\n  margin-bottom: 20px;\n  animation: fadeInUp 0.5s ease;\n  animation-fill-mode: both;\n}\n\n.mapping-item:nth-child(1) { animation-delay: 0.1s; }\n.mapping-item:nth-child(2) { animation-delay: 0.2s; }\n.mapping-item:nth-child(3) { animation-delay: 0.3s; }\n\n.mapping-item-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n\n.mapping-label {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-color, #333333);\n}\n\n.required-star {\n  color: #ff5252;\n  font-weight: bold;\n  margin-left: 4px;\n}\n\n.mapping-type-tag {\n  display: inline-flex;\n  align-items: center;\n  padding: 2px 8px;\n  background: var(--bg-secondary, #f1f3f4);\n  color: var(--text-secondary, #666666);\n  border-radius: 10px;\n  font-size: 10px;\n  font-weight: 500;\n  text-transform: uppercase;\n  border: 1px solid var(--border-color, #e5e5e5);\n  transition: all 0.3s ease;\n}\n\n.mapping-type-tag:hover {\n  background: var(--bg-tertiary, #f8abbd);\n  color: #232222aa;\n  font-weight: 600;\n  transform: scale(1.05);\n}\n\n.drop-zone {\n  min-height: 50px;\n  border: 2px dashed var(--border-color, #e5e5e5);\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n  background: var(--bg-color, #ffffff);\n  position: relative;\n  overflow: hidden;\n}\n\n.drop-zone::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(84, 112, 198, 0.1), transparent);\n  transition: left 0.5s ease;\n}\n\n.drop-zone:hover::before {\n  left: 100%;\n}\n\n.drop-zone::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(84, 112, 198, 0.1), rgba(145, 204, 117, 0.1));\n  border-radius: 8px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  pointer-events: none;\n}\n\n.drop-zone:hover::after {\n  opacity: 1;\n}\n\n.drop-zone-active {\n  border-color: var(--primary-color, #5470c6);\n  background-color: rgba(84, 112, 198, 0.05);\n  transform: scale(1.02);\n  box-shadow: 0 4px 20px var(--shadow-color, rgba(84, 112, 198, 0.15));\n  border-style: solid;\n  animation: pulseGlow 2s infinite alternate;\n}\n\n.drop-zone-filled {\n  border-color: var(--success-color, #28a745);\n  background-color: rgba(40, 167, 69, 0.05);\n  border-style: solid;\n  min-height: auto;\n  padding: 8px;\n}\n\n.drop-zone-error {\n  border-color: var(--error-color, #dc3545);\n  background-color: rgba(220, 53, 69, 0.05);\n  animation: shake 0.5s ease-in-out;\n}\n\n.drop-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  color: var(--text-secondary, #666666);\n  padding: 12px;\n}\n\n.drop-icon {\n  font-size: 20px;\n  color: var(--primary-color, #5470c6);\n  animation: bounce 2s infinite;\n}\n\n.drop-text {\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.mapped-content {\n  width: 100%;\n}\n\n.mapped-field {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 12px;\n  margin-bottom: 4px;\n  background: var(--bg-secondary, #f8f9fa);\n  border-radius: 6px;\n  border: 1px solid var(--border-color, #e5e5e5);\n  transition: all 0.3s ease;\n}\n\n.mapped-field:hover {\n  background: var(--bg-tertiary, #e9ecef);\n  border-color: var(--primary-color, #5470c6);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(84, 112, 198, 0.1);\n}\n\n.field-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.field-name {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-color, #333333);\n}\n\n.field-type {\n  font-size: 11px;\n  color: var(--text-secondary, #666666);\n  background: var(--bg-color, #ffffff);\n  padding: 2px 6px;\n  border-radius: 4px;\n  border: 1px solid var(--border-color, #e5e5e5);\n}\n\n.remove-btn {\n  background: none;\n  border: none;\n  color: var(--error-color, #dc3545);\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.3s ease;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.remove-btn:hover {\n  background: var(--error-color, #dc3545);\n  color: white;\n  transform: scale(1.1);\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes pulseGlow {\n  from {\n    box-shadow: 0 4px 20px rgba(84, 112, 198, 0.15);\n  }\n  to {\n    box-shadow: 0 6px 30px rgba(84, 112, 198, 0.3);\n  }\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n  20%, 40%, 60%, 80% { transform: translateX(5px); }\n}\n\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-10px);\n  }\n  60% {\n    transform: translateY(-5px);\n  }\n}\n\n/* 暗黑主题适配 */\n[data-theme=\"dark\"] .mapping-type-tag,\n:root.dark .mapping-type-tag {\n  background: var(--bg-tertiary, #3d3d3d);\n  color: var(--text-secondary, #b0b0b0);\n  border-color: var(--border-color, #404040);\n}\n\n[data-theme=\"dark\"] .mapping-type-tag:hover,\n:root.dark .mapping-type-tag:hover {\n  background: var(--bg-secondary, #2d2d2d);\n  color: var(--text-color, #e0e0e0);\n}\n\n[data-theme=\"dark\"] .drop-zone,\n:root.dark .drop-zone {\n  border-color: var(--border-color, #555555);\n  background: var(--bg-color, #1e1e1e);\n}\n\n[data-theme=\"dark\"] .mapped-field,\n:root.dark .mapped-field {\n  background: var(--bg-secondary, #2d2d2d);\n  border-color: var(--border-color, #404040);\n}\n\n[data-theme=\"dark\"] .mapped-field:hover,\n:root.dark .mapped-field:hover {\n  background: var(--bg-tertiary, #3d3d3d);\n  border-color: var(--primary-color, #6b9eff);\n}\n\n[data-theme=\"dark\"] .field-name,\n:root.dark .field-name {\n  color: var(--text-color, #e0e0e0);\n}\n\n[data-theme=\"dark\"] .field-type,\n:root.dark .field-type {\n  color: var(--text-secondary, #b0b0b0);\n  background: var(--bg-color, #1e1e1e);\n  border-color: var(--border-color, #404040);\n}\n</style>\n"],"mappings":"AA+DA,SAASA,QAAQ,QAAQ,KAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;IAE7B,MAAMC,KAAK,GAAGC,OAAA;IAmBd,MAAMC,IAAI,GAAGC,MAAA;IASb,MAAMC,UAAU,GAAGL,QAAQ,CAAC,MAAM;MAChC,IAAIC,KAAK,CAACK,KAAK,CAACC,aAAa,EAAE;QAC7B,OAAOC,KAAK,CAACC,OAAO,CAACR,KAAK,CAACS,OAAO,CAAC,IAAIT,KAAK,CAACS,OAAO,CAACC,MAAM,GAAG;MAChE;MACA,OAAOV,KAAK,CAACS,OAAO,IAAIT,KAAK,CAACS,OAAO,CAACJ,KAAI;IAC5C,CAAC;IAED,SAASM,UAAUA,CAACC,KAAK,EAAE;MACzBV,IAAI,CAAC,MAAM,EAAEU,KAAK,EAAEZ,KAAK,CAACK,KAAK,CAACQ,IAAI;IACtC;IAEA,SAASC,eAAeA,CAACF,KAAK,EAAE;MAC9BV,IAAI,CAAC,YAAY,EAAEF,KAAK,CAACK,KAAK,CAACQ,IAAI;IACrC;IAEA,SAASE,eAAeA,CAACH,KAAK,EAAE;MAC9BV,IAAI,CAAC,YAAY,EAAEF,KAAK,CAACK,KAAK,CAACQ,IAAI;IACrC;IAEA,SAASG,cAAcA,CAACJ,KAAK,EAAE;MAC7BV,IAAI,CAAC,WAAW,EAAEU,KAAK,EAAEZ,KAAK,CAACK,KAAK,CAACQ,IAAI;IAC3C;IAEA,SAASI,aAAaA,CAAA,EAAG;MACvBf,IAAI,CAAC,gBAAgB,EAAEF,KAAK,CAACK,KAAK,CAACQ,IAAI;IACzC;IAEA,SAASK,YAAYA,CAACC,KAAK,EAAE;MAC3BjB,IAAI,CAAC,eAAe,EAAEF,KAAK,CAACK,KAAK,CAACQ,IAAI,EAAEM,KAAK;IAC/C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}