{"ast":null,"code":"import { ref, computed, watch } from 'vue';\nimport DataMappingSection from './DataMappingSection.vue';\nimport FilterSection from './FilterSection.vue';\nimport AdvancedSection from './AdvancedSection.vue';\nimport ActionSection from './ActionSection.vue';\nimport ErrorMessage from './ErrorMessage.vue';\n\n// Props\n\nexport default {\n  __name: 'ChartConfigPanel',\n  props: {\n    selectedChartType: {\n      type: String,\n      default: 'bar'\n    },\n    currentFile: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['config-change', 'generate-chart'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n\n    // 响应式数据\n    const showDataFilter = ref(false);\n    const showAdvancedConfig = ref(false);\n    const errorMessage = ref('');\n\n    // 字段映射数据\n    const fieldMappings = ref({\n      xAxis: {\n        field: '',\n        type: ''\n      },\n      yAxis: {\n        field: '',\n        type: ''\n      },\n      series: []\n    });\n\n    // 过滤器配置\n    const filters = ref({\n      dataRange: 'all',\n      nullHandling: 'ignore'\n    });\n\n    // 高级设置\n    const advancedSettings = ref({\n      title: '',\n      colorScheme: 'default',\n      animation: true\n    });\n\n    // 计算属性\n    const isConfigValid = computed(() => {\n      return fieldMappings.value.xAxis.field && (fieldMappings.value.yAxis.field || fieldMappings.value.series.length > 0);\n    });\n\n    // 计算完整的图表配置\n    const chartConfig = computed(() => ({\n      ...fieldMappings.value,\n      ...filters.value,\n      ...advancedSettings.value\n    }));\n\n    // 数据映射处理\n    function updateFieldMappings(newMappings) {\n      fieldMappings.value = newMappings;\n      emit('config-change', chartConfig.value);\n    }\n\n    // 过滤器处理\n    function updateFilters(newFilters) {\n      filters.value = newFilters;\n      emit('config-change', chartConfig.value);\n    }\n    function updateDataFilterExpanded(expanded) {\n      showDataFilter.value = expanded;\n    }\n\n    // 高级设置处理\n    function updateAdvancedSettings(newSettings) {\n      advancedSettings.value = newSettings;\n      emit('config-change', chartConfig.value);\n    }\n    function updateAdvancedConfigExpanded(expanded) {\n      showAdvancedConfig.value = expanded;\n    }\n\n    // 错误处理\n    function handleMappingError(error) {\n      errorMessage.value = error;\n      setTimeout(() => {\n        errorMessage.value = '';\n      }, 3000);\n    }\n    function handleColumnMapped(mapping) {\n      // 字段映射成功后的处理\n      console.log('Column mapped:', mapping);\n    }\n    function clearError() {\n      errorMessage.value = '';\n    }\n\n    // 图表生成\n    function generateChart() {\n      if (!isConfigValid.value) {\n        errorMessage.value = 'Please complete the required data mapping configuration';\n        return;\n      }\n      emit('generate-chart', chartConfig.value);\n    }\n\n    // 重置配置\n    function resetConfig() {\n      fieldMappings.value = {\n        xAxis: {\n          field: '',\n          type: ''\n        },\n        yAxis: {\n          field: '',\n          type: ''\n        },\n        series: []\n      };\n      filters.value = {\n        dataRange: 'all',\n        nullHandling: 'ignore'\n      };\n      advancedSettings.value = {\n        title: '',\n        colorScheme: 'default',\n        animation: true\n      };\n      errorMessage.value = '';\n      emit('config-change', chartConfig.value);\n    }\n\n    // 监听图表类型变化\n    watch(() => props.selectedChartType, newType => {\n      // 根据图表类型调整配置\n      if (newType === 'Pie' || newType === 'pie') {\n        // 饼图不需要Y轴\n        fieldMappings.value.yAxis = {\n          field: '',\n          type: ''\n        };\n        emit('config-change', chartConfig.value);\n      }\n    });\n    const __returned__ = {\n      props,\n      emit,\n      showDataFilter,\n      showAdvancedConfig,\n      errorMessage,\n      fieldMappings,\n      filters,\n      advancedSettings,\n      isConfigValid,\n      chartConfig,\n      updateFieldMappings,\n      updateFilters,\n      updateDataFilterExpanded,\n      updateAdvancedSettings,\n      updateAdvancedConfigExpanded,\n      handleMappingError,\n      handleColumnMapped,\n      clearError,\n      generateChart,\n      resetConfig,\n      ref,\n      computed,\n      watch,\n      DataMappingSection,\n      FilterSection,\n      AdvancedSection,\n      ActionSection,\n      ErrorMessage\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","DataMappingSection","FilterSection","AdvancedSection","ActionSection","ErrorMessage","props","__props","emit","__emit","showDataFilter","showAdvancedConfig","errorMessage","fieldMappings","xAxis","field","type","yAxis","series","filters","dataRange","nullHandling","advancedSettings","title","colorScheme","animation","isConfigValid","value","length","chartConfig","updateFieldMappings","newMappings","updateFilters","newFilters","updateDataFilterExpanded","expanded","updateAdvancedSettings","newSettings","updateAdvancedConfigExpanded","handleMappingError","error","setTimeout","handleColumnMapped","mapping","console","log","clearError","generateChart","resetConfig","selectedChartType","newType"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/ChartConfigPanel.vue"],"sourcesContent":["<template>\n  <div class=\"chart-config-panel\">\n    <!-- 右侧边栏总标题 -->\n    <div class=\"panel-header\">\n      <h3>Chart Configuration</h3>\n    </div>\n\n    <!-- 数据映射配置区域 -->\n    <DataMappingSection\n      :chart-type=\"selectedChartType\"\n      :field-mappings=\"fieldMappings\"\n      @update:field-mappings=\"updateFieldMappings\"\n      @mapping-error=\"handleMappingError\"\n      @column-mapped=\"handleColumnMapped\"\n    />\n\n    <!-- 数据过滤 -->\n    <FilterSection\n      :filters=\"filters\"\n      :expanded=\"showDataFilter\"\n      @update:filters=\"updateFilters\"\n      @update:expanded=\"updateDataFilterExpanded\"\n    />\n\n    <!-- 高级配置 -->\n    <AdvancedSection\n      :settings=\"advancedSettings\"\n      :expanded=\"showAdvancedConfig\"\n      @update:settings=\"updateAdvancedSettings\"\n      @update:expanded=\"updateAdvancedConfigExpanded\"\n    />\n\n    <!-- 操作按钮 -->\n    <ActionSection\n      :is-config-valid=\"isConfigValid\"\n      @apply=\"generateChart\"\n      @reset=\"resetConfig\"\n    />\n\n    <!-- 错误提示 -->\n    <ErrorMessage\n      :message=\"errorMessage\"\n      @close=\"clearError\"\n    />\n  </div>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, computed, watch } from 'vue'\nimport DataMappingSection from './DataMappingSection.vue'\nimport FilterSection from './FilterSection.vue'\nimport AdvancedSection from './AdvancedSection.vue'\nimport ActionSection from './ActionSection.vue'\nimport ErrorMessage from './ErrorMessage.vue'\n\n// Props\nconst props = defineProps({\n  selectedChartType: {\n    type: String,\n    default: 'bar'\n  },\n  currentFile: {\n    type: Object,\n    default: null\n  }\n})\n\n// Emits\nconst emit = defineEmits(['config-change', 'generate-chart'])\n\n// 响应式数据\nconst showDataFilter = ref(false)\nconst showAdvancedConfig = ref(false)\nconst errorMessage = ref('')\n\n// 字段映射数据\nconst fieldMappings = ref({\n  xAxis: { field: '', type: '' },\n  yAxis: { field: '', type: '' },\n  series: []\n})\n\n// 过滤器配置\nconst filters = ref({\n  dataRange: 'all',\n  nullHandling: 'ignore'\n})\n\n// 高级设置\nconst advancedSettings = ref({\n  title: '',\n  colorScheme: 'default',\n  animation: true\n})\n\n// 计算属性\nconst isConfigValid = computed(() => {\n  return fieldMappings.value.xAxis.field &&\n         (fieldMappings.value.yAxis.field || fieldMappings.value.series.length > 0)\n})\n\n// 计算完整的图表配置\nconst chartConfig = computed(() => ({\n  ...fieldMappings.value,\n  ...filters.value,\n  ...advancedSettings.value\n}))\n\n// 数据映射处理\nfunction updateFieldMappings(newMappings) {\n  fieldMappings.value = newMappings\n  emit('config-change', chartConfig.value)\n}\n\n// 过滤器处理\nfunction updateFilters(newFilters) {\n  filters.value = newFilters\n  emit('config-change', chartConfig.value)\n}\n\nfunction updateDataFilterExpanded(expanded) {\n  showDataFilter.value = expanded\n}\n\n// 高级设置处理\nfunction updateAdvancedSettings(newSettings) {\n  advancedSettings.value = newSettings\n  emit('config-change', chartConfig.value)\n}\n\nfunction updateAdvancedConfigExpanded(expanded) {\n  showAdvancedConfig.value = expanded\n}\n\n// 错误处理\nfunction handleMappingError(error) {\n  errorMessage.value = error\n  setTimeout(() => {\n    errorMessage.value = ''\n  }, 3000)\n}\n\nfunction handleColumnMapped(mapping) {\n  // 字段映射成功后的处理\n  console.log('Column mapped:', mapping)\n}\n\nfunction clearError() {\n  errorMessage.value = ''\n}\n\n// 图表生成\nfunction generateChart() {\n  if (!isConfigValid.value) {\n    errorMessage.value = 'Please complete the required data mapping configuration'\n    return\n  }\n\n  emit('generate-chart', chartConfig.value)\n}\n\n// 重置配置\nfunction resetConfig() {\n  fieldMappings.value = {\n    xAxis: { field: '', type: '' },\n    yAxis: { field: '', type: '' },\n    series: []\n  }\n  \n  filters.value = {\n    dataRange: 'all',\n    nullHandling: 'ignore'\n  }\n  \n  advancedSettings.value = {\n    title: '',\n    colorScheme: 'default',\n    animation: true\n  }\n\n  errorMessage.value = ''\n  emit('config-change', chartConfig.value)\n}\n\n// 监听图表类型变化\nwatch(() => props.selectedChartType, (newType) => {\n  // 根据图表类型调整配置\n  if (newType === 'Pie' || newType === 'pie') {\n    // 饼图不需要Y轴\n    fieldMappings.value.yAxis = { field: '', type: '' }\n    emit('config-change', chartConfig.value)\n  }\n})\n</script>\n\n<style scoped>\n/* 白天主题CSS变量 */\n:root {\n  --bg-color: #ffffff;\n  --bg-secondary: #f8f9fa;\n  --bg-tertiary: #e9ecef;\n  --text-color: #333333;\n  --text-secondary: #666666;\n  --border-color: #e5e5e5;\n  --primary-color: #5470c6;\n  --accent-color: #91cc75;\n  --error-color: #dc3545;\n  --success-color: #28a745;\n  --warning-color: #ffc107;\n  --secondary-color: #6c757d;\n  --primary-hover: #4c63b6;\n  --secondary-hover: #5a6268;\n  --disabled-color: #a8a8a8;\n  --shadow-color: rgba(0, 0, 0, 0.1);\n  --hover-bg: rgba(0, 0, 0, 0.02);\n}\n\n/* 暗黑主题CSS变量 */\n:root.dark,\n[data-theme=\"dark\"] {\n  --bg-color: #1e1e1e;\n  --bg-secondary: #2d2d2d;\n  --bg-tertiary: #3d3d3d;\n  --text-color: #e0e0e0;\n  --text-secondary: #b0b0b0;\n  --border-color: #404040;\n  --primary-color: #6b9eff;\n  --accent-color: #a8d068;\n  --error-color: #ff6b6b;\n  --success-color: #51cf66;\n  --warning-color: #ffd93d;\n  --secondary-color: #868e96;\n  --primary-hover: #5a8cff;\n  --secondary-hover: #767d84;\n  --disabled-color: #666666;\n  --shadow-color: rgba(0, 0, 0, 0.3);\n  --hover-bg: rgba(255, 255, 255, 0.05);\n}\n\n.chart-config-panel {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background: var(--bg-color, #ffffff);\n  overflow-y: auto;\n  transition: all 0.3s ease;\n  animation: slideIn 0.5s ease;\n  /* 隐藏滚动条 */\n  scrollbar-width: none; /* Firefox */\n  -ms-overflow-style: none; /* IE and Edge */\n}\n\n.chart-config-panel::-webkit-scrollbar {\n  display: none; /* Chrome, Safari and Opera */\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n/* 面板总标题 */\n.panel-header {\n  margin-bottom: 25px;\n  padding: 20px 0 15px 0;\n  border-bottom: 2px solid var(--border-color, #e5e5e5);\n  transition: all 0.3s ease;\n  position: relative;\n  animation: fadeInDown 0.5s ease;\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.panel-header::before {\n  content: '';\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  width: 0;\n  height: 2px;\n  background: linear-gradient(90deg, var(--primary-color), var(--accent-color));\n  transition: width 0.5s ease;\n}\n\n.panel-header:hover::before {\n  width: 100%;\n}\n\n.panel-header h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-color, #333333);\n  transition: color 0.3s ease;\n  position: relative;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}