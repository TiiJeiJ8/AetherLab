{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"preview-content\"\n};\nconst _hoisted_2 = {\n  class: \"preview-header\"\n};\nconst _hoisted_3 = {\n  class: \"header-info\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"file-info\"\n};\nconst _hoisted_5 = {\n  class: \"preview-table-wrapper\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"table-container\"\n};\nconst _hoisted_7 = {\n  class: \"preview-table\"\n};\nconst _hoisted_8 = [\"title\"];\nconst _hoisted_9 = {\n  class: \"row-number\"\n};\nconst _hoisted_10 = [\"title\"];\nconst _hoisted_11 = {\n  key: 1,\n  class: \"empty-tip\"\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createBlock(_Transition, {\n    name: \"modal-fade\"\n  }, {\n    default: _withCtx(() => [_ctx.show ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: \"preview-modal\",\n      onClick: _cache[1] || (_cache[1] = _withModifiers((...args) => _ctx.onClose && _ctx.onClose(...args), [\"self\"]))\n    }, [_createVNode(_Transition, {\n      name: \"modal-slide\",\n      appear: \"\"\n    }, {\n      default: _withCtx(() => [_ctx.show ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 头部 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", null, _toDisplayString(_ctx.currentFile?.name || 'Data Preview'), 1 /* TEXT */), _ctx.currentFile ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(_ctx.formatFileSize(_ctx.currentFile.size)) + \" | \" + _toDisplayString(_ctx.currentFile.rows || 0) + \" row × \" + _toDisplayString(_ctx.currentFile.columns || 0) + \" column (Only first 100 rows shown) \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n        class: \"close-btn\",\n        onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClose && _ctx.onClose(...args))\n      }, \"×\")]), _createCommentVNode(\" 数据表格预览 \"), _createElementVNode(\"div\", _hoisted_5, [_ctx.dataRows.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"table\", _hoisted_7, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"th\", {\n        class: \"row-number\"\n      }, \"#\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.tableHeaders, (header, idx) => {\n        return _openBlock(), _createElementBlock(\"th\", {\n          key: idx,\n          title: String(header).length > 12 ? String(header) : '',\n          class: \"column-header\"\n        }, _toDisplayString(String(header)), 9 /* TEXT, PROPS */, _hoisted_8);\n      }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.dataRows, (row, idx) => {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          key: idx\n        }, [_createElementVNode(\"td\", _hoisted_9, _toDisplayString(idx + 1), 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.tableHeaders, (header, headerIdx) => {\n          return _openBlock(), _createElementBlock(\"td\", {\n            key: headerIdx,\n            title: _ctx.getCellValue(row, header, headerIdx)\n          }, _toDisplayString(_ctx.getCellValue(row, header, headerIdx)), 9 /* TEXT, PROPS */, _hoisted_10);\n        }), 128 /* KEYED_FRAGMENT */))]);\n      }), 128 /* KEYED_FRAGMENT */))])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n        class: \"empty-icon\"\n      }, \"📊\", -1 /* HOISTED */), _createElementVNode(\"p\", null, \"No data available...\", -1 /* HOISTED */)])))])])) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    })])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["key","class","_createBlock","_Transition","name","default","_withCtx","_ctx","show","_createElementBlock","onClick","_cache","_withModifiers","args","onClose","_createVNode","appear","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","currentFile","_hoisted_4","formatFileSize","size","rows","columns","_hoisted_5","dataRows","length","_hoisted_6","_hoisted_7","_Fragment","_renderList","tableHeaders","header","idx","title","String","_hoisted_8","row","_hoisted_9","headerIdx","getCellValue","_hoisted_10","_hoisted_11","_"],"sources":["D:\\Learning Material\\Git\\Fuck-Charts\\frontend\\src\\components\\Common\\DataPreviewModal.vue"],"sourcesContent":["<template>\n<transition name=\"modal-fade\">\n    <div v-if=\"show\"\n        class=\"preview-modal\"\n        @click.self=\"onClose\">\n        <transition name=\"modal-slide\" appear>\n            <div class=\"preview-content\" v-if=\"show\">\n                <!-- 头部 -->\n                <div class=\"preview-header\">\n                    <div class=\"header-info\">\n                        <h3>{{ currentFile?.name || 'Data Preview' }}</h3>\n                        <span class=\"file-info\" v-if=\"currentFile\">\n                            {{ formatFileSize(currentFile.size) }} |\n                            {{ currentFile.rows || 0 }} row × {{ currentFile.columns || 0 }} column (Only first 100 rows shown)\n                        </span>\n                    </div>\n                    <button class=\"close-btn\" @click=\"onClose\">×</button>\n                </div>\n\n                <!-- 数据表格预览 -->\n                <div class=\"preview-table-wrapper\">\n                    <div v-if=\"dataRows.length\" class=\"table-container\">\n                        <table class=\"preview-table\">\n                            <thead>\n                                <tr>\n                                    <th class=\"row-number\">#</th>\n                                    <th v-for=\"(header, idx) in tableHeaders\"\n                                        :key=\"idx\"\n                                        :title=\"String(header).length > 12 ? String(header) : ''\"\n                                        class=\"column-header\">{{ String(header) }}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr v-for=\"(row, idx) in dataRows\"\n                                    :key=\"idx\">\n                                    <td class=\"row-number\">{{ idx + 1 }}</td>\n                                    <td v-for=\"(header, headerIdx) in tableHeaders\"\n                                        :key=\"headerIdx\"\n                                        :title=\"getCellValue(row, header, headerIdx)\">\n                                        {{ getCellValue(row, header, headerIdx) }}\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div v-else class=\"empty-tip\">\n                        <div class=\"empty-icon\">📊</div>\n                        <p>No data available...</p>\n                    </div>\n                </div>\n            </div>\n        </transition>\n    </div>\n</transition>\n</template>\n\n<script setup>\n/\nimport { computed } from 'vue'\nimport { getCellValue, formatFileSize } from '@/assets/JS/utils/dataPreviewUtils.js'\n\nconst props = defineProps({\n    show: Boolean,\n    currentFile: Object,\n    previewData: {\n        type: Array,\n        default: () => []\n    },\n    isSidePreview: {\n        type: Boolean,\n        default: false\n    }\n})\n\nconst emit = defineEmits(['close'])\n\n// 表头计算 - 修复数据类型处理逻辑\nconst tableHeaders = computed(() => {\n    if (!props.previewData.length) return []\n    const firstRow = props.previewData[0]\n    if (Array.isArray(firstRow)) {\n        return firstRow\n    } else if (typeof firstRow === 'object' && firstRow !== null) {\n        return Object.keys(firstRow)\n    }\n    return []\n})\n\n// 实际数据行（根据数据类型决定是否排除标题行）\nconst dataRows = computed(() => {\n    if (!props.previewData.length) return []\n    const firstRow = props.previewData[0]\n    if (Array.isArray(firstRow)) {\n        return props.previewData.slice(1)\n    } else if (typeof firstRow === 'object' && firstRow !== null) {\n        return props.previewData\n    }\n    return props.previewData\n})\n\nfunction onClose() {\n    emit('close')\n}\n</script>\n\n<style scoped>\n@import '../../assets/CSS/DataPreviewModal.css';\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}