{"ast":null,"code":"/* eslint-disable */\n\nimport { getFilePreview } from '../services/FileServices.js';\nimport { workspaceFiles, fileDataMap } from './dataStructureOptimize.js';\n\n// 数据预览相关\nexport const showDataPreview = ref(false);\nexport const currentDataFile = ref(null);\nexport const previewData = ref([]);\n// 工作区相关方法\nexport function handleWorkspaceUpdate(files) {\n  workspaceFiles.value = [...files];\n  console.log('Workspace updated:', workspaceFiles.value.length, 'files');\n  //! 调试：输出全局文件数据结构\n  console.log('workspaceFiles:', JSON.parse(JSON.stringify(workspaceFiles.value)));\n  console.log('fileDataMap:', JSON.parse(JSON.stringify(fileDataMap.value)));\n}\nexport function handleWorkspaceRemove(file) {\n  console.log('File removed from workspace:', file.name);\n  // 从工作区数组中移除文件\n  const index = workspaceFiles.value.findIndex(f => f.id === file.id);\n  if (index !== -1) {\n    workspaceFiles.value.splice(index, 1);\n  }\n}\nexport function handleWorkspacePreview(file) {\n  // 预览工作区中的文件\n  console.log('Preview workspace file:', file.name);\n  currentDataFile.value = file;\n\n  // 使用与 FileUploadModal 相同的预览逻辑\n  if (file.previewData) {\n    // 如果文件已经有预览数据，直接使用\n    previewData.value = file.previewData;\n    showDataPreview.value = true;\n  } else {\n    // 否则读取文件内容\n    loadFilePreview(file);\n  }\n}\n\n// 加载文件预览数据\nexport async function loadFilePreview(file) {\n  try {\n    const previewResult = await getFilePreview(file.id);\n    previewData.value = previewResult.data;\n    showDataPreview.value = true;\n  } catch (error) {\n    console.error('Preview failed:', error);\n    alert('Preview failed: ' + error.message);\n  }\n}\nexport function handleWorkspaceClear() {\n  console.log('Workspace cleared');\n  workspaceFiles.value = [];\n}","map":{"version":3,"names":["getFilePreview","workspaceFiles","fileDataMap","showDataPreview","ref","currentDataFile","previewData","handleWorkspaceUpdate","files","value","console","log","length","JSON","parse","stringify","handleWorkspaceRemove","file","name","index","findIndex","f","id","splice","handleWorkspacePreview","loadFilePreview","previewResult","data","error","alert","message","handleWorkspaceClear"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/assets/JS/utils/workforceUtils.js"],"sourcesContent":["/* eslint-disable */\n\nimport { getFilePreview } from '../services/FileServices.js'\nimport { workspaceFiles, fileDataMap } from './dataStructureOptimize.js'\n\n// 数据预览相关\nexport const showDataPreview = ref(false)\nexport const currentDataFile = ref(null)\nexport const previewData = ref([])\n// 工作区相关方法\nexport function handleWorkspaceUpdate(files) {\n    workspaceFiles.value = [...files]\n    console.log('Workspace updated:', workspaceFiles.value.length, 'files')\n    //! 调试：输出全局文件数据结构\n    console.log('workspaceFiles:', JSON.parse(JSON.stringify(workspaceFiles.value)))\n    console.log('fileDataMap:', JSON.parse(JSON.stringify(fileDataMap.value)))\n}\n\nexport function handleWorkspaceRemove(file) {\n    console.log('File removed from workspace:', file.name)\n    // 从工作区数组中移除文件\n    const index = workspaceFiles.value.findIndex(f => f.id === file.id)\n    if (index !== -1) {\n        workspaceFiles.value.splice(index, 1)\n    }\n}\n\nexport function handleWorkspacePreview(file) {\n    // 预览工作区中的文件\n    console.log('Preview workspace file:', file.name)\n    currentDataFile.value = file\n\n    // 使用与 FileUploadModal 相同的预览逻辑\n    if (file.previewData) {\n        // 如果文件已经有预览数据，直接使用\n        previewData.value = file.previewData\n        showDataPreview.value = true\n    } else {\n        // 否则读取文件内容\n        loadFilePreview(file)\n    }\n}\n\n// 加载文件预览数据\nexport async function loadFilePreview(file) {\n    try {\n        const previewResult = await getFilePreview(file.id)\n        previewData.value = previewResult.data\n        showDataPreview.value = true\n    } catch (error) {\n        console.error('Preview failed:', error)\n        alert('Preview failed: ' + error.message)\n    }\n}\n\nexport function handleWorkspaceClear() {\n    console.log('Workspace cleared')\n    workspaceFiles.value = []\n}"],"mappings":"AAAA;;AAEA,SAASA,cAAc,QAAQ,6BAA6B;AAC5D,SAASC,cAAc,EAAEC,WAAW,QAAQ,4BAA4B;;AAExE;AACA,OAAO,MAAMC,eAAe,GAAGC,GAAG,CAAC,KAAK,CAAC;AACzC,OAAO,MAAMC,eAAe,GAAGD,GAAG,CAAC,IAAI,CAAC;AACxC,OAAO,MAAME,WAAW,GAAGF,GAAG,CAAC,EAAE,CAAC;AAClC;AACA,OAAO,SAASG,qBAAqBA,CAACC,KAAK,EAAE;EACzCP,cAAc,CAACQ,KAAK,GAAG,CAAC,GAAGD,KAAK,CAAC;EACjCE,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEV,cAAc,CAACQ,KAAK,CAACG,MAAM,EAAE,OAAO,CAAC;EACvE;EACAF,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACd,cAAc,CAACQ,KAAK,CAAC,CAAC,CAAC;EAChFC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACb,WAAW,CAACO,KAAK,CAAC,CAAC,CAAC;AAC9E;AAEA,OAAO,SAASO,qBAAqBA,CAACC,IAAI,EAAE;EACxCP,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEM,IAAI,CAACC,IAAI,CAAC;EACtD;EACA,MAAMC,KAAK,GAAGlB,cAAc,CAACQ,KAAK,CAACW,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,IAAI,CAACK,EAAE,CAAC;EACnE,IAAIH,KAAK,KAAK,CAAC,CAAC,EAAE;IACdlB,cAAc,CAACQ,KAAK,CAACc,MAAM,CAACJ,KAAK,EAAE,CAAC,CAAC;EACzC;AACJ;AAEA,OAAO,SAASK,sBAAsBA,CAACP,IAAI,EAAE;EACzC;EACAP,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEM,IAAI,CAACC,IAAI,CAAC;EACjDb,eAAe,CAACI,KAAK,GAAGQ,IAAI;;EAE5B;EACA,IAAIA,IAAI,CAACX,WAAW,EAAE;IAClB;IACAA,WAAW,CAACG,KAAK,GAAGQ,IAAI,CAACX,WAAW;IACpCH,eAAe,CAACM,KAAK,GAAG,IAAI;EAChC,CAAC,MAAM;IACH;IACAgB,eAAe,CAACR,IAAI,CAAC;EACzB;AACJ;;AAEA;AACA,OAAO,eAAeQ,eAAeA,CAACR,IAAI,EAAE;EACxC,IAAI;IACA,MAAMS,aAAa,GAAG,MAAM1B,cAAc,CAACiB,IAAI,CAACK,EAAE,CAAC;IACnDhB,WAAW,CAACG,KAAK,GAAGiB,aAAa,CAACC,IAAI;IACtCxB,eAAe,CAACM,KAAK,GAAG,IAAI;EAChC,CAAC,CAAC,OAAOmB,KAAK,EAAE;IACZlB,OAAO,CAACkB,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;IACvCC,KAAK,CAAC,kBAAkB,GAAGD,KAAK,CAACE,OAAO,CAAC;EAC7C;AACJ;AAEA,OAAO,SAASC,oBAAoBA,CAAA,EAAG;EACnCrB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAChCV,cAAc,CAACQ,KAAK,GAAG,EAAE;AAC7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}