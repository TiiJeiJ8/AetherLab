{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch, onMounted, onUnmounted, nextTick } from 'vue';\nimport { getThemeIcon } from '@/assets/JS/SVG/icons.js';\nimport { inferDataType, calculateColumnStats, getColumnTypeClass } from '@/assets/JS/utils/columnAnalyzeUtils.js';\n\n// Props\n\nexport default {\n  __name: 'FileStructurePanel',\n  props: {\n    fileInfo: {\n      type: Object,\n      required: true\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'minimize', 'column-drag'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n\n    // 面板状态\n    const isVisible = ref(false);\n    const isMinimized = ref(false);\n    const isFocused = ref(true);\n    const isDragging = ref(false);\n    const draggedColumn = ref(null);\n\n    // 拖拽相关状态\n    const dragOffset = ref({\n      x: 0,\n      y: 0\n    });\n    const panelPosition = ref({\n      position: 'fixed',\n      top: '10%',\n      right: '24%',\n      width: '22.4%',\n      maxHeight: '70vh'\n    });\n\n    // DOM 引用\n    const panelRef = ref(null);\n\n    // 文件列结构数据\n    const columns = ref([]);\n\n    // 计算实际数据行数（排除标题行）\n    const dataRows = computed(() => {\n      if (!props.fileInfo || !props.fileInfo.data || !Array.isArray(props.fileInfo.data)) {\n        return 0;\n      }\n      return Math.max(0, props.fileInfo.data.length - 1); // 减去标题行\n    });\n\n    // 监听 visible 属性变化\n    watch(() => props.visible, newVal => {\n      isVisible.value = newVal;\n      if (newVal) {\n        isFocused.value = true;\n        isMinimized.value = false;\n        nextTick(() => {\n          analyzeFileStructure();\n        });\n      }\n    }, {\n      immediate: true\n    });\n\n    // 监听文件信息变化\n    watch(() => props.fileInfo, newFileInfo => {\n      if (newFileInfo && isVisible.value) {\n        analyzeFileStructure();\n      }\n    }, {\n      deep: true\n    });\n\n    // 分析文件结构\n    async function analyzeFileStructure() {\n      if (!props.fileInfo || !props.fileInfo.data) {\n        console.warn('No file data available for structure analysis');\n        return;\n      }\n      const data = props.fileInfo.data;\n      if (!Array.isArray(data) || data.length === 0) {\n        console.warn('Invalid data format for structure analysis');\n        return;\n      }\n      const headers = props.fileInfo.headers || Object.keys(data[0]);\n      const analyzedColumns = [];\n      const chunkSize = 5; // 每次处理5列，防止主线程阻塞\n      let i = 0;\n      function processChunk() {\n        const end = Math.min(i + chunkSize, headers.length);\n        for (; i < end; i++) {\n          const header = headers[i];\n          const columnData = data.slice(1).map(row => {\n            if (Array.isArray(row)) {\n              return row[i];\n            } else if (typeof row === 'object') {\n              return row[header];\n            }\n            return null;\n          }).filter(val => val !== null && val !== undefined && val !== '');\n          // 推断数据类型\n          const type = inferDataType(columnData);\n          // 获取样本数据（跳过标题行）\n          const sample = columnData.slice(0, 3).join(', ') || 'No data';\n          // 统计信息 (总行数需要减去标题行)\n          const stats = calculateColumnStats(columnData, data.length - 1);\n          analyzedColumns.push({\n            name: header,\n            type,\n            sample,\n            stats,\n            index: i\n          });\n        }\n        columns.value = [...analyzedColumns];\n        if (i < headers.length) {\n          setTimeout(processChunk, 0);\n        }\n      }\n      processChunk();\n    }\n\n    // 格式化文件大小\n    function formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n\n    // 鼠标事件处理\n    function handleMouseEnter() {\n      isFocused.value = true;\n    }\n    function handleMouseLeave() {\n      if (!isDragging.value) {\n        isFocused.value = false;\n      }\n    }\n    function handleMouseDown() {\n      isFocused.value = true;\n    }\n\n    // 面板拖拽功能\n    function startDrag(event) {\n      isDragging.value = true;\n      isFocused.value = true;\n      const rect = panelRef.value.getBoundingClientRect();\n      dragOffset.value = {\n        x: event.clientX - rect.left,\n        y: event.clientY - rect.top\n      };\n      document.addEventListener('mousemove', handlePanelDrag, {\n        passive: false\n      });\n      document.addEventListener('mouseup', stopDrag, {\n        passive: false\n      });\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    let lastDragRAF = null;\n    function handlePanelDrag(event) {\n      if (!isDragging.value) return;\n      if (lastDragRAF) return; // 节流\n      lastDragRAF = requestAnimationFrame(() => {\n        lastDragRAF = null;\n        const newX = event.clientX - dragOffset.value.x;\n        const newY = event.clientY - dragOffset.value.y;\n        // 确保面板不会拖拽到屏幕外\n        const maxX = window.innerWidth - 400;\n        const maxY = window.innerHeight - 300;\n        const clampedX = Math.max(0, Math.min(newX, maxX));\n        const clampedY = Math.max(0, Math.min(newY, maxY));\n        panelPosition.value = {\n          ...panelPosition.value,\n          top: `${clampedY}px`,\n          left: `${clampedX}px`,\n          right: 'auto'\n        };\n      });\n      event.preventDefault();\n    }\n    function stopDrag(event) {\n      isDragging.value = false;\n      document.removeEventListener('mousemove', handlePanelDrag);\n      document.removeEventListener('mouseup', stopDrag);\n      setTimeout(() => {\n        if (!isDragging.value) {\n          isFocused.value = false;\n        }\n      }, 150);\n      event.preventDefault();\n    }\n\n    // 列拖拽功能\n    function handleDragStart(column, index, event) {\n      draggedColumn.value = index;\n\n      // 设置拖拽数据， file 和 index 字段，确保唯一性\n      const dragData = {\n        type: 'column',\n        column: {\n          ...column,\n          type: column.type,\n          // 明确携带类型\n          file: props.fileInfo?.name || '',\n          index // 唯一标识同文件内的同名列\n        },\n        source: 'file-structure'\n      };\n      event.dataTransfer.setData('application/json', JSON.stringify(dragData));\n      event.dataTransfer.effectAllowed = 'copy';\n\n      // 自定义拖拽图像\n      const dragImage = createDragImage(column);\n      event.dataTransfer.setDragImage(dragImage, 0, 0);\n      emit('column-drag', {\n        action: 'start',\n        column,\n        index\n      });\n    }\n    function handleDragEnd() {\n      draggedColumn.value = null;\n      emit('column-drag', {\n        action: 'end'\n      });\n    }\n\n    // 创建拖拽图像\n    function createDragImage(column) {\n      const dragElement = document.createElement('div');\n      dragElement.className = 'drag-preview';\n      dragElement.innerHTML = `\n    <div class=\"drag-preview-content\">\n      <span class=\"drag-column-name\">${column.name}</span>\n      <span class=\"drag-column-type\">${column.type}</span>\n    </div>\n  `;\n\n      // 添加样式\n      dragElement.style.cssText = `\n    position: absolute;\n    top: -1000px;\n    left: -1000px;\n    background: rgba(59, 130, 246, 0.9);\n    color: white;\n    padding: 8px 12px;\n    border-radius: 6px;\n    font-size: 12px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n    pointer-events: none;\n    z-index: 10000;\n  `;\n      document.body.appendChild(dragElement);\n\n      // 清理\n      setTimeout(() => {\n        document.body.removeChild(dragElement);\n      }, 100);\n      return dragElement;\n    }\n\n    // 面板控制\n    function minimize() {\n      isMinimized.value = !isMinimized.value;\n      emit('minimize', isMinimized.value);\n    }\n    function close() {\n      isVisible.value = false;\n      emit('close');\n    }\n\n    // 组件挂载时添加全局点击监听\n    onMounted(() => {\n      document.addEventListener('click', handleGlobalClick);\n    });\n    onUnmounted(() => {\n      document.removeEventListener('click', handleGlobalClick);\n      document.removeEventListener('mousemove', handlePanelDrag);\n      document.removeEventListener('mouseup', stopDrag);\n    });\n\n    // 全局点击处理\n    function handleGlobalClick(event) {\n      if (panelRef.value && !panelRef.value.contains(event.target)) {\n        isFocused.value = false;\n      }\n    }\n    const __returned__ = {\n      props,\n      emit,\n      isVisible,\n      isMinimized,\n      isFocused,\n      isDragging,\n      draggedColumn,\n      dragOffset,\n      panelPosition,\n      panelRef,\n      columns,\n      dataRows,\n      analyzeFileStructure,\n      formatFileSize,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleMouseDown,\n      startDrag,\n      get lastDragRAF() {\n        return lastDragRAF;\n      },\n      set lastDragRAF(v) {\n        lastDragRAF = v;\n      },\n      handlePanelDrag,\n      stopDrag,\n      handleDragStart,\n      handleDragEnd,\n      createDragImage,\n      minimize,\n      close,\n      handleGlobalClick,\n      ref,\n      computed,\n      watch,\n      onMounted,\n      onUnmounted,\n      nextTick,\n      get getThemeIcon() {\n        return getThemeIcon;\n      },\n      get inferDataType() {\n        return inferDataType;\n      },\n      get calculateColumnStats() {\n        return calculateColumnStats;\n      },\n      get getColumnTypeClass() {\n        return getColumnTypeClass;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","onMounted","onUnmounted","nextTick","getThemeIcon","inferDataType","calculateColumnStats","getColumnTypeClass","props","__props","emit","__emit","isVisible","isMinimized","isFocused","isDragging","draggedColumn","dragOffset","x","y","panelPosition","position","top","right","width","maxHeight","panelRef","columns","dataRows","fileInfo","data","Array","isArray","Math","max","length","visible","newVal","value","analyzeFileStructure","immediate","newFileInfo","deep","console","warn","headers","Object","keys","analyzedColumns","chunkSize","i","processChunk","end","min","header","columnData","slice","map","row","filter","val","undefined","type","sample","join","stats","push","name","index","setTimeout","formatFileSize","bytes","k","sizes","floor","log","parseFloat","pow","toFixed","handleMouseEnter","handleMouseLeave","handleMouseDown","startDrag","event","rect","getBoundingClientRect","clientX","left","clientY","document","addEventListener","handlePanelDrag","passive","stopDrag","preventDefault","stopPropagation","lastDragRAF","requestAnimationFrame","newX","newY","maxX","window","innerWidth","maxY","innerHeight","clampedX","clampedY","removeEventListener","handleDragStart","column","dragData","file","source","dataTransfer","setData","JSON","stringify","effectAllowed","dragImage","createDragImage","setDragImage","action","handleDragEnd","dragElement","createElement","className","innerHTML","style","cssText","body","appendChild","removeChild","minimize","close","handleGlobalClick","contains","target"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/Common/FileStructurePanel.vue"],"sourcesContent":["<template>\n  <transition name=\"fade-panel\">\n    <div\n      v-show=\"isVisible\"\n      class=\"file-structure-panel\"\n      :class=\"{\n        'is-focused': isFocused,\n        'dragging': isDragging\n      }\"\n      :style=\"panelPosition\"\n      @mouseenter=\"handleMouseEnter\"\n      @mouseleave=\"handleMouseLeave\"\n      @mousedown=\"handleMouseDown\"\n      ref=\"panelRef\">\n    <!-- 面板头部 -->\n    <div\n      class=\"panel-header\"\n      @mousedown.prevent=\"startDrag\">\n      <div class=\"panel-title\">\n        <span class=\"panel-icon\" v-html=\"getThemeIcon('structure')\"></span>\n        <span>{{ fileInfo.name }} - Structure</span>\n      </div>\n      <div class=\"panel-controls\">\n        <button class=\"control-btn minimize-btn\" @click=\"minimize\" title=\"Minimize\">\n          <span v-html=\"getThemeIcon('minimize')\"></span>\n        </button>\n        <button class=\"control-btn close-btn\" @click=\"close\" title=\"Close\">\n          <span v-html=\"getThemeIcon('close')\"></span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 面板内容 -->\n    <div class=\"panel-content\" v-if=\"!isMinimized\">\n      <!-- 文件信息摘要 -->\n      <div class=\"file-summary\">\n        <div class=\"summary-item\">\n          <span class=\"summary-label\">Rows:</span>\n          <span class=\"summary-value\">{{ dataRows }}</span>\n        </div>\n        <div class=\"summary-item\">\n          <span class=\"summary-label\">Columns:</span>\n          <span class=\"summary-value\">{{ fileInfo.columns || 0 }}</span>\n        </div>\n        <div class=\"summary-item\">\n          <span class=\"summary-label\">Size:</span>\n          <span class=\"summary-value\">{{ formatFileSize(fileInfo.size) }}</span>\n        </div>\n      </div>\n\n      <!-- 列结构列表 -->\n      <div class=\"columns-container\">\n        <div class=\"columns-header\">\n          <h4>Data Columns</h4>\n          <span class=\"columns-count\">{{ columns.length }} columns</span>\n        </div>\n        <div class=\"columns-list\">\n          <div\n            v-for=\"(column, index) in columns\"\n            :key=\"index\"\n            class=\"column-item\"\n            :class=\"{ 'dragging': draggedColumn === index }\"\n            draggable=\"true\"\n            @dragstart=\"handleDragStart(column, index, $event)\"\n            @dragend=\"handleDragEnd\">\n            <div class=\"column-info\">\n              <div class=\"column-header\">\n                <span class=\"column-name\">{{ column.name }}</span>\n                <span class=\"column-type\" :class=\"getColumnTypeClass(column.type)\">\n                  {{ column.type }}\n                </span>\n              </div>\n              <div class=\"column-details\">\n                <div class=\"sample-data\">\n                  <span class=\"sample-label\">Sample:</span>\n                  <span class=\"sample-value\">{{ column.sample }}</span>\n                </div>\n                <div class=\"column-stats\" v-if=\"column.stats\">\n                  <span class=\"stat-item\" v-if=\"column.stats.nullCount !== undefined\">\n                    Nulls: {{ column.stats.nullCount }}\n                  </span>\n                  <span class=\"stat-item\" v-if=\"column.stats.uniqueCount !== undefined\">\n                    Unique: {{ column.stats.uniqueCount }}\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div class=\"drag-handle\" title=\"Drag to configure chart\">\n              <span v-html=\"getThemeIcon('drag')\"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n  </transition>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, computed, watch, onMounted, onUnmounted, nextTick } from 'vue'\nimport { getThemeIcon } from '@/assets/JS/SVG/icons.js'\nimport { inferDataType, calculateColumnStats, getColumnTypeClass } from '@/assets/JS/utils/columnAnalyzeUtils.js'\n\n// Props\nconst props = defineProps({\n  fileInfo: {\n    type: Object,\n    required: true\n  },\n  visible: {\n    type: Boolean,\n    default: false\n  }\n})\n\n// Emits\nconst emit = defineEmits(['close', 'minimize', 'column-drag'])\n\n// 面板状态\nconst isVisible = ref(false)\nconst isMinimized = ref(false)\nconst isFocused = ref(true)\nconst isDragging = ref(false)\nconst draggedColumn = ref(null)\n\n// 拖拽相关状态\nconst dragOffset = ref({ x: 0, y: 0 })\nconst panelPosition = ref({\n  position: 'fixed',\n  top: '10%',\n  right: '24%',\n  width: '22.4%',\n  maxHeight: '70vh'\n})\n\n// DOM 引用\nconst panelRef = ref(null)\n\n// 文件列结构数据\nconst columns = ref([])\n\n// 计算实际数据行数（排除标题行）\nconst dataRows = computed(() => {\n  if (!props.fileInfo || !props.fileInfo.data || !Array.isArray(props.fileInfo.data)) {\n    return 0\n  }\n  return Math.max(0, props.fileInfo.data.length - 1) // 减去标题行\n})\n\n// 监听 visible 属性变化\nwatch(() => props.visible, (newVal) => {\n  isVisible.value = newVal\n  if (newVal) {\n    isFocused.value = true\n    isMinimized.value = false\n    nextTick(() => {\n      analyzeFileStructure()\n    })\n  }\n}, { immediate: true })\n\n// 监听文件信息变化\nwatch(() => props.fileInfo, (newFileInfo) => {\n  if (newFileInfo && isVisible.value) {\n    analyzeFileStructure()\n  }\n}, { deep: true })\n\n// 分析文件结构\nasync function analyzeFileStructure() {\n  if (!props.fileInfo || !props.fileInfo.data) {\n    console.warn('No file data available for structure analysis')\n    return\n  }\n  const data = props.fileInfo.data\n  if (!Array.isArray(data) || data.length === 0) {\n    console.warn('Invalid data format for structure analysis')\n    return\n  }\n  const headers = props.fileInfo.headers || Object.keys(data[0])\n  const analyzedColumns = []\n  const chunkSize = 5 // 每次处理5列，防止主线程阻塞\n  let i = 0\n  function processChunk() {\n    const end = Math.min(i + chunkSize, headers.length)\n    for (; i < end; i++) {\n      const header = headers[i]\n      const columnData = data.slice(1).map(row => {\n        if (Array.isArray(row)) {\n          return row[i]\n        } else if (typeof row === 'object') {\n          return row[header]\n        }\n        return null\n      }).filter(val => val !== null && val !== undefined && val !== '')\n      // 推断数据类型\n      const type = inferDataType(columnData)\n      // 获取样本数据（跳过标题行）\n      const sample = columnData.slice(0, 3).join(', ') || 'No data'\n      // 统计信息 (总行数需要减去标题行)\n      const stats = calculateColumnStats(columnData, data.length - 1)\n      analyzedColumns.push({\n        name: header,\n        type,\n        sample,\n        stats,\n        index: i\n      })\n    }\n    columns.value = [...analyzedColumns]\n    if (i < headers.length) {\n      setTimeout(processChunk, 0)\n    }\n  }\n  processChunk()\n}\n\n// 格式化文件大小\nfunction formatFileSize(bytes) {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// 鼠标事件处理\nfunction handleMouseEnter() {\n  isFocused.value = true\n}\n\nfunction handleMouseLeave() {\n  if (!isDragging.value) {\n    isFocused.value = false\n  }\n}\n\nfunction handleMouseDown() {\n  isFocused.value = true\n}\n\n// 面板拖拽功能\nfunction startDrag(event) {\n  isDragging.value = true\n  isFocused.value = true\n  const rect = panelRef.value.getBoundingClientRect()\n  dragOffset.value = {\n    x: event.clientX - rect.left,\n    y: event.clientY - rect.top\n  }\n  document.addEventListener('mousemove', handlePanelDrag, { passive: false })\n  document.addEventListener('mouseup', stopDrag, { passive: false })\n  event.preventDefault()\n  event.stopPropagation()\n}\n\nlet lastDragRAF = null\nfunction handlePanelDrag(event) {\n  if (!isDragging.value) return\n  if (lastDragRAF) return // 节流\n  lastDragRAF = requestAnimationFrame(() => {\n    lastDragRAF = null\n    const newX = event.clientX - dragOffset.value.x\n    const newY = event.clientY - dragOffset.value.y\n    // 确保面板不会拖拽到屏幕外\n    const maxX = window.innerWidth - 400\n    const maxY = window.innerHeight - 300\n    const clampedX = Math.max(0, Math.min(newX, maxX))\n    const clampedY = Math.max(0, Math.min(newY, maxY))\n    panelPosition.value = {\n      ...panelPosition.value,\n      top: `${clampedY}px`,\n      left: `${clampedX}px`,\n      right: 'auto'\n    }\n  })\n  event.preventDefault()\n}\n\nfunction stopDrag(event) {\n  isDragging.value = false\n  \n  document.removeEventListener('mousemove', handlePanelDrag)\n  document.removeEventListener('mouseup', stopDrag)\n  \n  setTimeout(() => {\n    if (!isDragging.value) {\n      isFocused.value = false\n    }\n  }, 150)\n  \n  event.preventDefault()\n}\n\n// 列拖拽功能\nfunction handleDragStart(column, index, event) {\n  draggedColumn.value = index\n\n  // 设置拖拽数据， file 和 index 字段，确保唯一性\n  const dragData = {\n    type: 'column',\n    column: {\n      ...column,\n      type: column.type, // 明确携带类型\n      file: props.fileInfo?.name || '',\n      index // 唯一标识同文件内的同名列\n    },\n    source: 'file-structure'\n  }\n\n  event.dataTransfer.setData('application/json', JSON.stringify(dragData))\n  event.dataTransfer.effectAllowed = 'copy'\n\n  // 自定义拖拽图像\n  const dragImage = createDragImage(column)\n  event.dataTransfer.setDragImage(dragImage, 0, 0)\n\n  emit('column-drag', { action: 'start', column, index })\n}\n\nfunction handleDragEnd() {\n  draggedColumn.value = null\n  emit('column-drag', { action: 'end' })\n}\n\n// 创建拖拽图像\nfunction createDragImage(column) {\n  const dragElement = document.createElement('div')\n  dragElement.className = 'drag-preview'\n  dragElement.innerHTML = `\n    <div class=\"drag-preview-content\">\n      <span class=\"drag-column-name\">${column.name}</span>\n      <span class=\"drag-column-type\">${column.type}</span>\n    </div>\n  `\n  \n  // 添加样式\n  dragElement.style.cssText = `\n    position: absolute;\n    top: -1000px;\n    left: -1000px;\n    background: rgba(59, 130, 246, 0.9);\n    color: white;\n    padding: 8px 12px;\n    border-radius: 6px;\n    font-size: 12px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n    pointer-events: none;\n    z-index: 10000;\n  `\n  \n  document.body.appendChild(dragElement)\n  \n  // 清理\n  setTimeout(() => {\n    document.body.removeChild(dragElement)\n  }, 100)\n  \n  return dragElement\n}\n\n// 面板控制\nfunction minimize() {\n  isMinimized.value = !isMinimized.value\n  emit('minimize', isMinimized.value)\n}\n\nfunction close() {\n  isVisible.value = false\n  emit('close')\n}\n\n// 组件挂载时添加全局点击监听\nonMounted(() => {\n  document.addEventListener('click', handleGlobalClick)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleGlobalClick)\n  document.removeEventListener('mousemove', handlePanelDrag)\n  document.removeEventListener('mouseup', stopDrag)\n})\n\n// 全局点击处理\nfunction handleGlobalClick(event) {\n  if (panelRef.value && !panelRef.value.contains(event.target)) {\n    isFocused.value = false\n  }\n}\n</script>\n\n<style scoped>\n@import '../../assets/CSS/FileStructurePanel.css';\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}