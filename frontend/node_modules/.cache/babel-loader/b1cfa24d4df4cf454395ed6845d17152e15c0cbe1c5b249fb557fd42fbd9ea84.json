{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\n/* eslint-disable */\n\n// K线图生成器\nexport default function candlestickOption(config, fileDataMap, xData, yDataArr, selectedChartType, seriesData, customOption = {}) {\n  // 网格线显示控制\n  let xGrid = false,\n    yGrid = false;\n  switch (config.gridVisible) {\n    case 'x':\n      xGrid = true;\n      yGrid = false;\n      break;\n    case 'y':\n      xGrid = false;\n      yGrid = true;\n      break;\n    case 'both':\n      xGrid = true;\n      yGrid = true;\n      break;\n    case 'none':\n    default:\n      xGrid = false;\n      yGrid = false;\n  }\n  // 标记最大/最小值\n  let markPoint = undefined;\n  if (config.showMaxMin) {\n    markPoint = {\n      data: [{\n        type: 'max',\n        name: 'Max'\n      }, {\n        type: 'min',\n        name: 'Min'\n      }],\n      symbolSize: 60,\n      label: {\n        fontSize: 12\n      }\n    };\n  }\n  const {\n    yAxis,\n    title,\n    animation\n  } = config;\n  const yArr = Array.isArray(yAxis) ? yAxis : [yAxis];\n  // K线图数据处理\n  const seriesDataProcessed = yDataArr.map((data, idx) => ({\n    name: yArr[idx].field,\n    type: 'candlestick',\n    data: yDataArr[0],\n    animationDuration: animation ? 1500 : 0,\n    ...(markPoint ? {\n      markPoint\n    } : {})\n  }));\n\n  // MA均线计算函数\n  function calcMA(data, period) {\n    return data.map((item, idx) => {\n      if (idx < period - 1) return '-';\n      // ECharts K线数据格式：[open, close, low, high]\n      // 取收盘价（第2项）\n      const sum = data.slice(idx - period + 1, idx + 1).reduce((acc, cur) => acc + cur[1], 0);\n      return +(sum / period).toFixed(2);\n    });\n  }\n\n  // 生成MA系列\n  const maSeries = [];\n  if (config.ma5) {\n    maSeries.push({\n      name: 'MA5',\n      type: 'line',\n      data: calcMA(yDataArr[0], 5),\n      smooth: true,\n      showSymbol: false,\n      lineStyle: {\n        width: 1\n      }\n    });\n  }\n  if (config.ma10) {\n    maSeries.push({\n      name: 'MA10',\n      type: 'line',\n      data: calcMA(yDataArr[0], 10),\n      smooth: true,\n      showSymbol: false,\n      lineStyle: {\n        width: 1\n      }\n    });\n  }\n  if (config.ma20) {\n    maSeries.push({\n      name: 'MA20',\n      type: 'line',\n      data: calcMA(yDataArr[0], 20),\n      smooth: true,\n      showSymbol: false,\n      lineStyle: {\n        width: 1\n      }\n    });\n  }\n  if (config.ma30) {\n    maSeries.push({\n      name: 'MA30',\n      type: 'line',\n      data: calcMA(yDataArr[0], 30),\n      smooth: true,\n      showSymbol: false,\n      lineStyle: {\n        width: 1\n      }\n    });\n  }\n\n  // legend需包含均线\n  const legendData = [...yArr.map(y => y.field), ...maSeries.map(ma => ma.name)];\n  return {\n    title: {\n      text: config.title || 'Chart of Candlestick',\n      subtext: config.subtext,\n      left: config.titlePosition === 'left' ? 'left' : config.titlePosition === 'center' ? 'center' : config.titlePosition === 'right' ? 'right' : 'center',\n      // bottom 也用 center\n      top: config.titlePosition === 'bottom' ? 'bottom' : 'top',\n      textStyle: {\n        fontSize: 16,\n        fontWeight: 'bold'\n      },\n      subtextStyle: {\n        fontSize: 12\n      }\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      type: 'scroll',\n      show: config.legendVisible !== false,\n      data: legendData,\n      top: config.legendPosition || 'bottom'\n    },\n    toolbox: {\n      show: true,\n      feature: {\n        dataZoom: {\n          show: true\n        },\n        dataView: {\n          show: true,\n          readOnly: false\n        },\n        restore: {\n          show: true\n        },\n        saveAsImage: {\n          show: true\n        }\n      }\n    },\n    xAxis: {\n      type: 'category',\n      data: xData,\n      axisLabel: {\n        interval: 0,\n        rotate: xData.length > 10 ? 45 : 0\n      },\n      splitLine: {\n        show: xGrid\n      }\n    },\n    yAxis: {\n      type: 'value',\n      name: yArr.map(y => y.field).join(','),\n      splitLine: {\n        show: yGrid\n      }\n    },\n    series: [...seriesDataProcessed, ...maSeries],\n    animation,\n    animationDuration: animation ? 1500 : 0,\n    ...customOption\n  };\n}","map":{"version":3,"names":["candlestickOption","config","fileDataMap","xData","yDataArr","selectedChartType","seriesData","customOption","xGrid","yGrid","gridVisible","markPoint","undefined","showMaxMin","data","type","name","symbolSize","label","fontSize","yAxis","title","animation","yArr","Array","isArray","seriesDataProcessed","map","idx","field","animationDuration","calcMA","period","item","sum","slice","reduce","acc","cur","toFixed","maSeries","ma5","push","smooth","showSymbol","lineStyle","width","ma10","ma20","ma30","legendData","y","ma","text","subtext","left","titlePosition","top","textStyle","fontWeight","subtextStyle","tooltip","trigger","axisPointer","legend","show","legendVisible","legendPosition","toolbox","feature","dataZoom","dataView","readOnly","restore","saveAsImage","xAxis","axisLabel","interval","rotate","length","splitLine","join","series"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/assets/JS/chartOptions/candlestick.js"],"sourcesContent":["/* eslint-disable */\n\n// K线图生成器\nexport default function candlestickOption(config, fileDataMap, xData, yDataArr, selectedChartType, seriesData, customOption = {}) {\n    // 网格线显示控制\n    let xGrid = false, yGrid = false;\n    switch (config.gridVisible) {\n        case 'x':\n            xGrid = true; yGrid = false; break;\n        case 'y':\n            xGrid = false; yGrid = true; break;\n        case 'both':\n            xGrid = true; yGrid = true; break;\n        case 'none':\n        default:\n            xGrid = false; yGrid = false;\n    }\n    // 标记最大/最小值\n    let markPoint = undefined;\n    if (config.showMaxMin) {\n        markPoint = {\n            data: [\n                { type: 'max', name: 'Max' },\n                { type: 'min', name: 'Min' }\n            ],\n            symbolSize: 60,\n            label: { fontSize: 12 }\n        };\n    }\n    const { yAxis, title, animation } = config;\n    const yArr = Array.isArray(yAxis) ? yAxis : [yAxis];\n    // K线图数据处理\n    const seriesDataProcessed = yDataArr.map((data, idx) => ({\n        name: yArr[idx].field,\n        type: 'candlestick',\n        data: yDataArr[0],\n        animationDuration: animation ? 1500 : 0,\n        ...(markPoint ? { markPoint } : {})\n    }));\n\n    // MA均线计算函数\n    function calcMA(data, period) {\n        return data.map((item, idx) => {\n            if (idx < period - 1) return '-';\n            // ECharts K线数据格式：[open, close, low, high]\n            // 取收盘价（第2项）\n            const sum = data.slice(idx - period + 1, idx + 1).reduce((acc, cur) => acc + cur[1], 0);\n            return +(sum / period).toFixed(2);\n        });\n    }\n\n    // 生成MA系列\n    const maSeries = [];\n    if (config.ma5) {\n        maSeries.push({\n            name: 'MA5',\n            type: 'line',\n            data: calcMA(yDataArr[0], 5),\n            smooth: true,\n            showSymbol: false,\n            lineStyle: { width: 1 }\n        });\n    }\n    if (config.ma10) {\n        maSeries.push({\n            name: 'MA10',\n            type: 'line',\n            data: calcMA(yDataArr[0], 10),\n            smooth: true,\n            showSymbol: false,\n            lineStyle: { width: 1 }\n        });\n    }\n    if (config.ma20) {\n        maSeries.push({\n            name: 'MA20',\n            type: 'line',\n            data: calcMA(yDataArr[0], 20),\n            smooth: true,\n            showSymbol: false,\n            lineStyle: { width: 1 }\n        });\n    }\n    if (config.ma30) {\n        maSeries.push({\n            name: 'MA30',\n            type: 'line',\n            data: calcMA(yDataArr[0], 30),\n            smooth: true,\n            showSymbol: false,\n            lineStyle: { width: 1 }\n        });\n    }\n\n    // legend需包含均线\n    const legendData = [...yArr.map(y => y.field), ...maSeries.map(ma => ma.name)];\n\n    return {\n        title: {\n            text: config.title || 'Chart of Candlestick',\n            subtext: config.subtext,\n            left: config.titlePosition === 'left' ? 'left'\n                : config.titlePosition === 'center' ? 'center'\n                    : config.titlePosition === 'right' ? 'right'\n                        : 'center', // bottom 也用 center\n            top: config.titlePosition === 'bottom' ? 'bottom' : 'top',\n            textStyle: { fontSize: 16, fontWeight: 'bold' },\n            subtextStyle: { fontSize: 12 }\n        },\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: { type: 'cross' }\n        },\n        legend: {\n            type: 'scroll',\n            show: config.legendVisible !== false,\n            data: legendData,\n            top: config.legendPosition || 'bottom',\n        },\n        toolbox: {\n            show: true,\n            feature: {\n                dataZoom: { show: true },\n                dataView: { show: true, readOnly: false },\n                restore: { show: true },\n                saveAsImage: { show: true }\n            }\n        },\n        xAxis: {\n            type: 'category',\n            data: xData,\n            axisLabel: { interval: 0, rotate: xData.length > 10 ? 45 : 0 },\n            splitLine: { show: xGrid }\n        },\n        yAxis: {\n            type: 'value',\n            name: yArr.map(y => y.field).join(','),\n            splitLine: { show: yGrid }\n        },\n        series: [...seriesDataProcessed, ...maSeries],\n        animation,\n        animationDuration: animation ? 1500 : 0,\n        ...customOption\n    };\n}"],"mappings":";;;;AAAA;;AAEA;AACA,eAAe,SAASA,iBAAiBA,CAACC,MAAM,EAAEC,WAAW,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,iBAAiB,EAAEC,UAAU,EAAEC,YAAY,GAAG,CAAC,CAAC,EAAE;EAC9H;EACA,IAAIC,KAAK,GAAG,KAAK;IAAEC,KAAK,GAAG,KAAK;EAChC,QAAQR,MAAM,CAACS,WAAW;IACtB,KAAK,GAAG;MACJF,KAAK,GAAG,IAAI;MAAEC,KAAK,GAAG,KAAK;MAAE;IACjC,KAAK,GAAG;MACJD,KAAK,GAAG,KAAK;MAAEC,KAAK,GAAG,IAAI;MAAE;IACjC,KAAK,MAAM;MACPD,KAAK,GAAG,IAAI;MAAEC,KAAK,GAAG,IAAI;MAAE;IAChC,KAAK,MAAM;IACX;MACID,KAAK,GAAG,KAAK;MAAEC,KAAK,GAAG,KAAK;EACpC;EACA;EACA,IAAIE,SAAS,GAAGC,SAAS;EACzB,IAAIX,MAAM,CAACY,UAAU,EAAE;IACnBF,SAAS,GAAG;MACRG,IAAI,EAAE,CACF;QAAEC,IAAI,EAAE,KAAK;QAAEC,IAAI,EAAE;MAAM,CAAC,EAC5B;QAAED,IAAI,EAAE,KAAK;QAAEC,IAAI,EAAE;MAAM,CAAC,CAC/B;MACDC,UAAU,EAAE,EAAE;MACdC,KAAK,EAAE;QAAEC,QAAQ,EAAE;MAAG;IAC1B,CAAC;EACL;EACA,MAAM;IAAEC,KAAK;IAAEC,KAAK;IAAEC;EAAU,CAAC,GAAGrB,MAAM;EAC1C,MAAMsB,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACL,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;EACnD;EACA,MAAMM,mBAAmB,GAAGtB,QAAQ,CAACuB,GAAG,CAAC,CAACb,IAAI,EAAEc,GAAG,MAAM;IACrDZ,IAAI,EAAEO,IAAI,CAACK,GAAG,CAAC,CAACC,KAAK;IACrBd,IAAI,EAAE,aAAa;IACnBD,IAAI,EAAEV,QAAQ,CAAC,CAAC,CAAC;IACjB0B,iBAAiB,EAAER,SAAS,GAAG,IAAI,GAAG,CAAC;IACvC,IAAIX,SAAS,GAAG;MAAEA;IAAU,CAAC,GAAG,CAAC,CAAC;EACtC,CAAC,CAAC,CAAC;;EAEH;EACA,SAASoB,MAAMA,CAACjB,IAAI,EAAEkB,MAAM,EAAE;IAC1B,OAAOlB,IAAI,CAACa,GAAG,CAAC,CAACM,IAAI,EAAEL,GAAG,KAAK;MAC3B,IAAIA,GAAG,GAAGI,MAAM,GAAG,CAAC,EAAE,OAAO,GAAG;MAChC;MACA;MACA,MAAME,GAAG,GAAGpB,IAAI,CAACqB,KAAK,CAACP,GAAG,GAAGI,MAAM,GAAG,CAAC,EAAEJ,GAAG,GAAG,CAAC,CAAC,CAACQ,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACvF,OAAO,CAAC,CAACJ,GAAG,GAAGF,MAAM,EAAEO,OAAO,CAAC,CAAC,CAAC;IACrC,CAAC,CAAC;EACN;;EAEA;EACA,MAAMC,QAAQ,GAAG,EAAE;EACnB,IAAIvC,MAAM,CAACwC,GAAG,EAAE;IACZD,QAAQ,CAACE,IAAI,CAAC;MACV1B,IAAI,EAAE,KAAK;MACXD,IAAI,EAAE,MAAM;MACZD,IAAI,EAAEiB,MAAM,CAAC3B,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MAC5BuC,MAAM,EAAE,IAAI;MACZC,UAAU,EAAE,KAAK;MACjBC,SAAS,EAAE;QAAEC,KAAK,EAAE;MAAE;IAC1B,CAAC,CAAC;EACN;EACA,IAAI7C,MAAM,CAAC8C,IAAI,EAAE;IACbP,QAAQ,CAACE,IAAI,CAAC;MACV1B,IAAI,EAAE,MAAM;MACZD,IAAI,EAAE,MAAM;MACZD,IAAI,EAAEiB,MAAM,CAAC3B,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7BuC,MAAM,EAAE,IAAI;MACZC,UAAU,EAAE,KAAK;MACjBC,SAAS,EAAE;QAAEC,KAAK,EAAE;MAAE;IAC1B,CAAC,CAAC;EACN;EACA,IAAI7C,MAAM,CAAC+C,IAAI,EAAE;IACbR,QAAQ,CAACE,IAAI,CAAC;MACV1B,IAAI,EAAE,MAAM;MACZD,IAAI,EAAE,MAAM;MACZD,IAAI,EAAEiB,MAAM,CAAC3B,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7BuC,MAAM,EAAE,IAAI;MACZC,UAAU,EAAE,KAAK;MACjBC,SAAS,EAAE;QAAEC,KAAK,EAAE;MAAE;IAC1B,CAAC,CAAC;EACN;EACA,IAAI7C,MAAM,CAACgD,IAAI,EAAE;IACbT,QAAQ,CAACE,IAAI,CAAC;MACV1B,IAAI,EAAE,MAAM;MACZD,IAAI,EAAE,MAAM;MACZD,IAAI,EAAEiB,MAAM,CAAC3B,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7BuC,MAAM,EAAE,IAAI;MACZC,UAAU,EAAE,KAAK;MACjBC,SAAS,EAAE;QAAEC,KAAK,EAAE;MAAE;IAC1B,CAAC,CAAC;EACN;;EAEA;EACA,MAAMI,UAAU,GAAG,CAAC,GAAG3B,IAAI,CAACI,GAAG,CAACwB,CAAC,IAAIA,CAAC,CAACtB,KAAK,CAAC,EAAE,GAAGW,QAAQ,CAACb,GAAG,CAACyB,EAAE,IAAIA,EAAE,CAACpC,IAAI,CAAC,CAAC;EAE9E,OAAO;IACHK,KAAK,EAAE;MACHgC,IAAI,EAAEpD,MAAM,CAACoB,KAAK,IAAI,sBAAsB;MAC5CiC,OAAO,EAAErD,MAAM,CAACqD,OAAO;MACvBC,IAAI,EAAEtD,MAAM,CAACuD,aAAa,KAAK,MAAM,GAAG,MAAM,GACxCvD,MAAM,CAACuD,aAAa,KAAK,QAAQ,GAAG,QAAQ,GACxCvD,MAAM,CAACuD,aAAa,KAAK,OAAO,GAAG,OAAO,GACtC,QAAQ;MAAE;MACxBC,GAAG,EAAExD,MAAM,CAACuD,aAAa,KAAK,QAAQ,GAAG,QAAQ,GAAG,KAAK;MACzDE,SAAS,EAAE;QAAEvC,QAAQ,EAAE,EAAE;QAAEwC,UAAU,EAAE;MAAO,CAAC;MAC/CC,YAAY,EAAE;QAAEzC,QAAQ,EAAE;MAAG;IACjC,CAAC;IACD0C,OAAO,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,WAAW,EAAE;QAAEhD,IAAI,EAAE;MAAQ;IACjC,CAAC;IACDiD,MAAM,EAAE;MACJjD,IAAI,EAAE,QAAQ;MACdkD,IAAI,EAAEhE,MAAM,CAACiE,aAAa,KAAK,KAAK;MACpCpD,IAAI,EAAEoC,UAAU;MAChBO,GAAG,EAAExD,MAAM,CAACkE,cAAc,IAAI;IAClC,CAAC;IACDC,OAAO,EAAE;MACLH,IAAI,EAAE,IAAI;MACVI,OAAO,EAAE;QACLC,QAAQ,EAAE;UAAEL,IAAI,EAAE;QAAK,CAAC;QACxBM,QAAQ,EAAE;UAAEN,IAAI,EAAE,IAAI;UAAEO,QAAQ,EAAE;QAAM,CAAC;QACzCC,OAAO,EAAE;UAAER,IAAI,EAAE;QAAK,CAAC;QACvBS,WAAW,EAAE;UAAET,IAAI,EAAE;QAAK;MAC9B;IACJ,CAAC;IACDU,KAAK,EAAE;MACH5D,IAAI,EAAE,UAAU;MAChBD,IAAI,EAAEX,KAAK;MACXyE,SAAS,EAAE;QAAEC,QAAQ,EAAE,CAAC;QAAEC,MAAM,EAAE3E,KAAK,CAAC4E,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG;MAAE,CAAC;MAC9DC,SAAS,EAAE;QAAEf,IAAI,EAAEzD;MAAM;IAC7B,CAAC;IACDY,KAAK,EAAE;MACHL,IAAI,EAAE,OAAO;MACbC,IAAI,EAAEO,IAAI,CAACI,GAAG,CAACwB,CAAC,IAAIA,CAAC,CAACtB,KAAK,CAAC,CAACoD,IAAI,CAAC,GAAG,CAAC;MACtCD,SAAS,EAAE;QAAEf,IAAI,EAAExD;MAAM;IAC7B,CAAC;IACDyE,MAAM,EAAE,CAAC,GAAGxD,mBAAmB,EAAE,GAAGc,QAAQ,CAAC;IAC7ClB,SAAS;IACTQ,iBAAiB,EAAER,SAAS,GAAG,IAAI,GAAG,CAAC;IACvC,GAAGf;EACP,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}