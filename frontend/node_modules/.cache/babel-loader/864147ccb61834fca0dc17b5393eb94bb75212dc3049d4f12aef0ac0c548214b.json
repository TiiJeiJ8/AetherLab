{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue';\nimport { globalDragHandler, validateDragData } from '../utils/dragDropUtils.js';\nimport { globalDataMapper } from '../utils/dataMappingUtils.js';\n\n// Props\nconst mappingIcon = '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/></svg>';\nconst autoIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>';\nconst manualIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8-1.41-1.42z\"/></svg>';\nconst clearIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"/></svg>';\nconst xAxisIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4zm2.59 1.41L21 17l-1.41-1.41L21 14.17 19.59 12.76 18.17 14.17 16.76 12.76 15.34 14.17 13.93 12.76 12.52 14.17 11.1 12.76 9.69 14.17 8.28 12.76 6.86 14.17 5.45 12.76 4.04 14.17 2.62 12.76 1.21 14.17 3.04 17l1.41 1.41L6.86 16l1.41 1.41L10.69 16l1.41 1.41L14.52 16l1.41 1.41L18.34 16l1.41 1.41L22.17 16z\"/></svg>';\nconst yAxisIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M16 17H9v-2h7v2zm0-4H9V7h7v6zm0-8H9V3h7v2zM7 3v14l-3-3m0 0l3 3m-3-3h18\"/></svg>';\nconst seriesIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\"/></svg>';\nconst sizeIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>';\nconst colorIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z\"/></svg>';\nconst filterIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z\"/></svg>';\nconst dragIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M20 9H4v2h16V9zM4 15h16v-2H4v2z\"/></svg>';\nconst removeIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg>';\nconst expandIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 10l5 5 5-5z\"/></svg>';\nconst collapseIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 14l5-5 5 5z\"/></svg>';\nconst addIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>';\nconst previewIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"/></svg>';\nconst generateIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"/></svg>';\n\n// 方法\n\nexport default {\n  __name: 'DataMappingPanel',\n  props: {\n    selectedChartType: {\n      type: String,\n      default: ''\n    }\n  },\n  emits: ['chart-generated', 'preview-chart'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n\n    // 响应式数据\n    const realTimeRender = ref(true);\n    const isDragActive = ref(false);\n    const isFilterExpanded = ref(false);\n    const mappings = ref({\n      xAxis: null,\n      yAxis: null,\n      series: null,\n      size: null,\n      color: null\n    });\n    const filterConfig = ref({\n      type: 'all',\n      range: {\n        start: 0,\n        end: -1\n      },\n      conditions: []\n    });\n    const previewData = ref([]);\n\n    // 计算属性\n    const showSeriesMapping = computed(() => {\n      return ['bar', 'line', 'area'].includes(props.selectedChartType);\n    });\n    const showSizeMapping = computed(() => {\n      return ['scatter', 'bubble'].includes(props.selectedChartType);\n    });\n    const showColorMapping = computed(() => {\n      return ['scatter', 'bubble', 'heatmap'].includes(props.selectedChartType);\n    });\n    const availableFields = computed(() => {\n      const fields = [];\n      Object.values(mappings.value).forEach(mapping => {\n        if (mapping && mapping.columnName) {\n          fields.push(mapping.columnName);\n        }\n      });\n      return fields;\n    });\n    const previewFields = computed(() => {\n      const fields = [];\n      Object.entries(mappings.value).forEach(([key, mapping]) => {\n        if (mapping && mapping.columnName) {\n          fields.push(key);\n        }\n      });\n      return fields;\n    });\n    const canPreview = computed(() => {\n      return mappings.value.xAxis && mappings.value.yAxis;\n    });\n    const canGenerate = computed(() => {\n      const requirements = getChartRequirements(props.selectedChartType);\n      return requirements.every(req => isMappingFulfilled(req));\n    });\n\n    // 图标\n    function getChartIcon(chartType) {\n      const icons = {\n        'bar': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/></svg>',\n        'line': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z\"/></svg>',\n        'pie': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z\"/></svg>',\n        'scatter': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 17.5c1.38 0 2.5-1.12 2.5-2.5S8.38 12.5 7 12.5 4.5 13.62 4.5 15 5.62 17.5 7 17.5zm10-7c1.38 0 2.5-1.12 2.5-2.5S18.38 7.5 17 7.5 14.5 8.62 14.5 10s1.12 2.5 2.5 2.5zm-5 1c1.38 0 2.5-1.12 2.5-2.5S13.38 9 12 9s-2.5 1.12-2.5 2.5 1.12 2.5 2.5 2.5z\"/></svg>'\n      };\n      return icons[chartType] || icons['bar'];\n    }\n    function getColumnIcon(type) {\n      const icons = {\n        'string': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 4v3h5v12h3V7h5V4H9zM3 12h3v7h3v-7h3V9H3v3z\"/></svg>',\n        'number': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 17h2v-6H7v6zm4 0h2V7h-2v10zm4-4h2v-2.5h-2V13z\"/></svg>',\n        'date': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\"/></svg>',\n        'boolean': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>'\n      };\n      return icons[type] || icons['string'];\n    }\n    function getChartRequirements(chartType) {\n      const requirements = {\n        'bar': ['xAxis', 'yAxis'],\n        'line': ['xAxis', 'yAxis'],\n        'pie': ['xAxis', 'yAxis'],\n        'scatter': ['xAxis', 'yAxis'],\n        'bubble': ['xAxis', 'yAxis', 'size'],\n        'heatmap': ['xAxis', 'yAxis', 'color']\n      };\n      return requirements[chartType] || ['xAxis', 'yAxis'];\n    }\n    function isRequiredMapping(mappingType) {\n      const requirements = getChartRequirements(props.selectedChartType);\n      return requirements.includes(mappingType);\n    }\n    function isMappingFulfilled(requirement) {\n      return mappings.value[requirement] !== null;\n    }\n    function isValidDrop(targetType) {\n      // 这里可以添加更复杂的验证逻辑\n      return true;\n    }\n    function toggleRealTimeRender() {\n      realTimeRender.value = !realTimeRender.value;\n    }\n    function clearAllMappings() {\n      mappings.value = {\n        xAxis: null,\n        yAxis: null,\n        series: null,\n        size: null,\n        color: null\n      };\n      globalDataMapper.clearAll();\n      updatePreview();\n    }\n    function toggleFilterExpanded() {\n      isFilterExpanded.value = !isFilterExpanded.value;\n    }\n\n    // 拖拽处理\n    function handleDragOver(event) {\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'move';\n    }\n    function handleDragEnter(event) {\n      event.preventDefault();\n      event.target.classList.add('drop-zone-hover');\n    }\n    function handleDragLeave(event) {\n      event.target.classList.remove('drop-zone-hover');\n    }\n    function handleDrop(mappingType, event) {\n      event.preventDefault();\n      event.target.classList.remove('drop-zone-hover');\n      let dragData;\n      try {\n        dragData = JSON.parse(event.dataTransfer.getData('text/plain'));\n      } catch (e) {\n        console.error('Invalid drag data:', e);\n        return;\n      }\n      if (validateDragData(dragData, mappingType)) {\n        mappings.value[mappingType] = dragData;\n        globalDataMapper.setMapping(mappingType, dragData);\n        updatePreview();\n      }\n    }\n    function removeMapping(mappingType) {\n      mappings.value[mappingType] = null;\n      globalDataMapper.removeMapping(mappingType);\n      updatePreview();\n    }\n\n    // 过滤器处理\n    function onFilterChange() {\n      globalDataMapper.setFilter(filterConfig.value);\n      updatePreview();\n    }\n    function addCondition() {\n      filterConfig.value.conditions.push({\n        field: '',\n        operator: 'equals',\n        value: ''\n      });\n    }\n    function removeCondition(index) {\n      filterConfig.value.conditions.splice(index, 1);\n      onFilterChange();\n    }\n\n    // 预览和生成\n    async function updatePreview() {\n      if (!realTimeRender.value) return;\n      try {\n        const data = await globalDataMapper.updatePreviewData();\n        previewData.value = data;\n      } catch (error) {\n        console.error('Preview update failed:', error);\n        previewData.value = [];\n      }\n    }\n    function formatPreviewValue(value) {\n      if (value === null || value === undefined) return '-';\n      if (typeof value === 'string' && value.length > 12) {\n        return value.substring(0, 12) + '...';\n      }\n      return String(value);\n    }\n    async function previewChart() {\n      if (!realTimeRender.value) {\n        await updatePreview();\n      }\n      const chartOption = globalDataMapper.generateChartOption(props.selectedChartType);\n      if (chartOption) {\n        emit('preview-chart', chartOption);\n      }\n    }\n    async function generateChart() {\n      await updatePreview();\n      const chartOption = globalDataMapper.generateChartOption(props.selectedChartType);\n      if (chartOption) {\n        emit('chart-generated', {\n          option: chartOption,\n          config: globalDataMapper.exportConfig(),\n          timestamp: Date.now()\n        });\n      }\n    }\n\n    // 生命周期\n    onMounted(() => {\n      // 注册全局拖拽事件\n      document.addEventListener('dragover', e => {\n        isDragActive.value = true;\n        e.preventDefault();\n      });\n      document.addEventListener('dragleave', e => {\n        if (!e.relatedTarget) {\n          isDragActive.value = false;\n        }\n      });\n      document.addEventListener('drop', () => {\n        isDragActive.value = false;\n      });\n    });\n    onUnmounted(() => {\n      // 清理事件监听器\n      document.removeEventListener('dragover', () => {});\n      document.removeEventListener('dragleave', () => {});\n      document.removeEventListener('drop', () => {});\n    });\n\n    // 监听器\n    watch(() => props.selectedChartType, () => {\n      // 当图表类型改变时，清理不兼容的映射\n      if (mappings.value.series && !showSeriesMapping.value) {\n        removeMapping('series');\n      }\n      if (mappings.value.size && !showSizeMapping.value) {\n        removeMapping('size');\n      }\n      if (mappings.value.color && !showColorMapping.value) {\n        removeMapping('color');\n      }\n    });\n    watch(() => realTimeRender.value, newValue => {\n      if (newValue) {\n        updatePreview();\n      }\n    });\n    const __returned__ = {\n      props,\n      emit,\n      realTimeRender,\n      isDragActive,\n      isFilterExpanded,\n      mappings,\n      filterConfig,\n      previewData,\n      showSeriesMapping,\n      showSizeMapping,\n      showColorMapping,\n      availableFields,\n      previewFields,\n      canPreview,\n      canGenerate,\n      mappingIcon,\n      autoIcon,\n      manualIcon,\n      clearIcon,\n      xAxisIcon,\n      yAxisIcon,\n      seriesIcon,\n      sizeIcon,\n      colorIcon,\n      filterIcon,\n      dragIcon,\n      removeIcon,\n      expandIcon,\n      collapseIcon,\n      addIcon,\n      previewIcon,\n      generateIcon,\n      getChartIcon,\n      getColumnIcon,\n      getChartRequirements,\n      isRequiredMapping,\n      isMappingFulfilled,\n      isValidDrop,\n      toggleRealTimeRender,\n      clearAllMappings,\n      toggleFilterExpanded,\n      handleDragOver,\n      handleDragEnter,\n      handleDragLeave,\n      handleDrop,\n      removeMapping,\n      onFilterChange,\n      addCondition,\n      removeCondition,\n      updatePreview,\n      formatPreviewValue,\n      previewChart,\n      generateChart,\n      ref,\n      computed,\n      watch,\n      onMounted,\n      onUnmounted,\n      get globalDragHandler() {\n        return globalDragHandler;\n      },\n      get validateDragData() {\n        return validateDragData;\n      },\n      get globalDataMapper() {\n        return globalDataMapper;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","onMounted","onUnmounted","globalDragHandler","validateDragData","globalDataMapper","mappingIcon","autoIcon","manualIcon","clearIcon","xAxisIcon","yAxisIcon","seriesIcon","sizeIcon","colorIcon","filterIcon","dragIcon","removeIcon","expandIcon","collapseIcon","addIcon","previewIcon","generateIcon","props","__props","emit","__emit","realTimeRender","isDragActive","isFilterExpanded","mappings","xAxis","yAxis","series","size","color","filterConfig","type","range","start","end","conditions","previewData","showSeriesMapping","includes","selectedChartType","showSizeMapping","showColorMapping","availableFields","fields","Object","values","value","forEach","mapping","columnName","push","previewFields","entries","key","canPreview","canGenerate","requirements","getChartRequirements","every","req","isMappingFulfilled","getChartIcon","chartType","icons","getColumnIcon","isRequiredMapping","mappingType","requirement","isValidDrop","targetType","toggleRealTimeRender","clearAllMappings","clearAll","updatePreview","toggleFilterExpanded","handleDragOver","event","preventDefault","dataTransfer","dropEffect","handleDragEnter","target","classList","add","handleDragLeave","remove","handleDrop","dragData","JSON","parse","getData","e","console","error","setMapping","removeMapping","onFilterChange","setFilter","addCondition","field","operator","removeCondition","index","splice","data","updatePreviewData","formatPreviewValue","undefined","length","substring","String","previewChart","chartOption","generateChartOption","generateChart","option","config","exportConfig","timestamp","Date","now","document","addEventListener","relatedTarget","removeEventListener","newValue"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/DataMappingPanel.vue"],"sourcesContent":["/* eslint-disable */\n<template>\n  <div class=\"data-mapping-panel\">\n    <!-- 面板头部 -->\n    <div class=\"panel-header\">\n      <div class=\"panel-title\">\n        <span class=\"panel-icon\" v-html=\"mappingIcon\"></span>\n        <span>Data Mapping</span>\n      </div>\n      <div class=\"panel-controls\">\n        <button \n          class=\"panel-control-btn\"\n          @click=\"toggleRealTimeRender\"\n          :class=\"{ 'active': realTimeRender }\"\n          :title=\"realTimeRender ? 'Real-time rendering ON' : 'Real-time rendering OFF'\">\n          <span v-html=\"realTimeRender ? autoIcon : manualIcon\"></span>\n        </button>\n        <button \n          class=\"panel-control-btn\"\n          @click=\"clearAllMappings\"\n          title=\"Clear all mappings\">\n          <span v-html=\"clearIcon\"></span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 图表类型信息 -->\n    <div class=\"chart-type-info\" v-if=\"selectedChartType\">\n      <div class=\"chart-type-label\">\n        <span class=\"chart-icon\" v-html=\"getChartIcon(selectedChartType)\"></span>\n        <span>{{ selectedChartType }}</span>\n      </div>\n      <div class=\"chart-requirements\">\n        <span v-for=\"req in getChartRequirements(selectedChartType)\" \n              :key=\"req\" \n              class=\"requirement-badge\"\n              :class=\"{ 'fulfilled': isMappingFulfilled(req) }\">\n          {{ req }}\n        </span>\n      </div>\n    </div>\n\n    <!-- 映射配置区域 -->\n    <div class=\"mapping-sections\">\n      <!-- X轴配置 -->\n      <div class=\"mapping-section\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\" v-html=\"xAxisIcon\"></span>\n          <span class=\"section-title\">X Axis</span>\n          <span class=\"section-required\" v-if=\"isRequiredMapping('xAxis')\">*</span>\n        </div>\n        <div \n          class=\"drop-zone\"\n          :class=\"{ \n            'has-mapping': mappings.xAxis,\n            'drop-zone-active': isDragActive && isValidDrop('xAxis')\n          }\"\n          @dragover.prevent=\"handleDragOver\"\n          @dragenter.prevent=\"handleDragEnter\"\n          @dragleave.prevent=\"handleDragLeave\"\n          @drop.prevent=\"handleDrop('xAxis', $event)\">\n          \n          <div v-if=\"mappings.xAxis\" class=\"mapping-item\">\n            <div class=\"mapping-info\">\n              <span class=\"mapping-icon\" v-html=\"getColumnIcon(mappings.xAxis.columnType)\"></span>\n              <div class=\"mapping-details\">\n                <div class=\"mapping-name\">{{ mappings.xAxis.columnName }}</div>\n                <div class=\"mapping-source\">{{ mappings.xAxis.fileName }}</div>\n              </div>\n            </div>\n            <button \n              class=\"remove-mapping-btn\"\n              @click=\"removeMapping('xAxis')\"\n              title=\"Remove mapping\">\n              <span v-html=\"removeIcon\"></span>\n            </button>\n          </div>\n          \n          <div v-else class=\"drop-placeholder\">\n            <span class=\"placeholder-icon\" v-html=\"dragIcon\"></span>\n            <span class=\"placeholder-text\">Drop column here for X axis</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Y轴配置 -->\n      <div class=\"mapping-section\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\" v-html=\"yAxisIcon\"></span>\n          <span class=\"section-title\">Y Axis</span>\n          <span class=\"section-required\" v-if=\"isRequiredMapping('yAxis')\">*</span>\n        </div>\n        <div \n          class=\"drop-zone\"\n          :class=\"{ \n            'has-mapping': mappings.yAxis,\n            'drop-zone-active': isDragActive && isValidDrop('yAxis')\n          }\"\n          @dragover.prevent=\"handleDragOver\"\n          @dragenter.prevent=\"handleDragEnter\"\n          @dragleave.prevent=\"handleDragLeave\"\n          @drop.prevent=\"handleDrop('yAxis', $event)\">\n          \n          <div v-if=\"mappings.yAxis\" class=\"mapping-item\">\n            <div class=\"mapping-info\">\n              <span class=\"mapping-icon\" v-html=\"getColumnIcon(mappings.yAxis.columnType)\"></span>\n              <div class=\"mapping-details\">\n                <div class=\"mapping-name\">{{ mappings.yAxis.columnName }}</div>\n                <div class=\"mapping-source\">{{ mappings.yAxis.fileName }}</div>\n              </div>\n            </div>\n            <button \n              class=\"remove-mapping-btn\"\n              @click=\"removeMapping('yAxis')\"\n              title=\"Remove mapping\">\n              <span v-html=\"removeIcon\"></span>\n            </button>\n          </div>\n          \n          <div v-else class=\"drop-placeholder\">\n            <span class=\"placeholder-icon\" v-html=\"dragIcon\"></span>\n            <span class=\"placeholder-text\">Drop column here for Y axis</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- 系列配置 -->\n      <div class=\"mapping-section\" v-if=\"showSeriesMapping\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\" v-html=\"seriesIcon\"></span>\n          <span class=\"section-title\">Series</span>\n          <span class=\"section-optional\">(Optional)</span>\n        </div>\n        <div \n          class=\"drop-zone\"\n          :class=\"{ \n            'has-mapping': mappings.series,\n            'drop-zone-active': isDragActive && isValidDrop('series')\n          }\"\n          @dragover.prevent=\"handleDragOver\"\n          @dragenter.prevent=\"handleDragEnter\"\n          @dragleave.prevent=\"handleDragLeave\"\n          @drop.prevent=\"handleDrop('series', $event)\">\n          \n          <div v-if=\"mappings.series\" class=\"mapping-item\">\n            <div class=\"mapping-info\">\n              <span class=\"mapping-icon\" v-html=\"getColumnIcon(mappings.series.columnType)\"></span>\n              <div class=\"mapping-details\">\n                <div class=\"mapping-name\">{{ mappings.series.columnName }}</div>\n                <div class=\"mapping-source\">{{ mappings.series.fileName }}</div>\n              </div>\n            </div>\n            <button \n              class=\"remove-mapping-btn\"\n              @click=\"removeMapping('series')\"\n              title=\"Remove mapping\">\n              <span v-html=\"removeIcon\"></span>\n            </button>\n          </div>\n          \n          <div v-else class=\"drop-placeholder\">\n            <span class=\"placeholder-icon\" v-html=\"dragIcon\"></span>\n            <span class=\"placeholder-text\">Drop column here for grouping</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- 尺寸配置 -->\n      <div class=\"mapping-section\" v-if=\"showSizeMapping\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\" v-html=\"sizeIcon\"></span>\n          <span class=\"section-title\">Size</span>\n          <span class=\"section-optional\">(Optional)</span>\n        </div>\n        <div \n          class=\"drop-zone\"\n          :class=\"{ \n            'has-mapping': mappings.size,\n            'drop-zone-active': isDragActive && isValidDrop('size')\n          }\"\n          @dragover.prevent=\"handleDragOver\"\n          @dragenter.prevent=\"handleDragEnter\"\n          @dragleave.prevent=\"handleDragLeave\"\n          @drop.prevent=\"handleDrop('size', $event)\">\n          \n          <div v-if=\"mappings.size\" class=\"mapping-item\">\n            <div class=\"mapping-info\">\n              <span class=\"mapping-icon\" v-html=\"getColumnIcon(mappings.size.columnType)\"></span>\n              <div class=\"mapping-details\">\n                <div class=\"mapping-name\">{{ mappings.size.columnName }}</div>\n                <div class=\"mapping-source\">{{ mappings.size.fileName }}</div>\n              </div>\n            </div>\n            <button \n              class=\"remove-mapping-btn\"\n              @click=\"removeMapping('size')\"\n              title=\"Remove mapping\">\n              <span v-html=\"removeIcon\"></span>\n            </button>\n          </div>\n          \n          <div v-else class=\"drop-placeholder\">\n            <span class=\"placeholder-icon\" v-html=\"dragIcon\"></span>\n            <span class=\"placeholder-text\">Drop column here for size</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- 颜色配置 -->\n      <div class=\"mapping-section\" v-if=\"showColorMapping\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\" v-html=\"colorIcon\"></span>\n          <span class=\"section-title\">Color</span>\n          <span class=\"section-optional\">(Optional)</span>\n        </div>\n        <div \n          class=\"drop-zone\"\n          :class=\"{ \n            'has-mapping': mappings.color,\n            'drop-zone-active': isDragActive && isValidDrop('color')\n          }\"\n          @dragover.prevent=\"handleDragOver\"\n          @dragenter.prevent=\"handleDragEnter\"\n          @dragleave.prevent=\"handleDragLeave\"\n          @drop.prevent=\"handleDrop('color', $event)\">\n          \n          <div v-if=\"mappings.color\" class=\"mapping-item\">\n            <div class=\"mapping-info\">\n              <span class=\"mapping-icon\" v-html=\"getColumnIcon(mappings.color.columnType)\"></span>\n              <div class=\"mapping-details\">\n                <div class=\"mapping-name\">{{ mappings.color.columnName }}</div>\n                <div class=\"mapping-source\">{{ mappings.color.fileName }}</div>\n              </div>\n            </div>\n            <button \n              class=\"remove-mapping-btn\"\n              @click=\"removeMapping('color')\"\n              title=\"Remove mapping\">\n              <span v-html=\"removeIcon\"></span>\n            </button>\n          </div>\n          \n          <div v-else class=\"drop-placeholder\">\n            <span class=\"placeholder-icon\" v-html=\"dragIcon\"></span>\n            <span class=\"placeholder-text\">Drop column here for color</span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 数据过滤配置 -->\n    <div class=\"filter-section\">\n      <div class=\"section-header\">\n        <span class=\"section-icon\" v-html=\"filterIcon\"></span>\n        <span class=\"section-title\">Data Filter</span>\n        <button \n          class=\"section-toggle-btn\"\n          @click=\"toggleFilterExpanded\"\n          :class=\"{ 'expanded': isFilterExpanded }\">\n          <span v-html=\"isFilterExpanded ? collapseIcon : expandIcon\"></span>\n        </button>\n      </div>\n      \n      <div v-if=\"isFilterExpanded\" class=\"filter-content\">\n        <div class=\"filter-type-selector\">\n          <label class=\"filter-type-option\">\n            <input \n              type=\"radio\" \n              value=\"all\" \n              v-model=\"filterConfig.type\"\n              @change=\"onFilterChange\">\n            <span>All rows</span>\n          </label>\n          <label class=\"filter-type-option\">\n            <input \n              type=\"radio\" \n              value=\"range\" \n              v-model=\"filterConfig.type\"\n              @change=\"onFilterChange\">\n            <span>Range</span>\n          </label>\n          <label class=\"filter-type-option\">\n            <input \n              type=\"radio\" \n              value=\"condition\" \n              v-model=\"filterConfig.type\"\n              @change=\"onFilterChange\">\n            <span>Condition</span>\n          </label>\n        </div>\n\n        <!-- 范围过滤 -->\n        <div v-if=\"filterConfig.type === 'range'\" class=\"range-filter\">\n          <div class=\"range-inputs\">\n            <label>\n              <span>From row:</span>\n              <input \n                type=\"number\" \n                v-model.number=\"filterConfig.range.start\"\n                @change=\"onFilterChange\"\n                min=\"0\"\n                class=\"range-input\">\n            </label>\n            <label>\n              <span>To row:</span>\n              <input \n                type=\"number\" \n                v-model.number=\"filterConfig.range.end\"\n                @change=\"onFilterChange\"\n                min=\"1\"\n                class=\"range-input\">\n            </label>\n          </div>\n        </div>\n\n        <!-- 条件过滤 -->\n        <div v-if=\"filterConfig.type === 'condition'\" class=\"condition-filter\">\n          <div \n            v-for=\"(condition, index) in filterConfig.conditions\"\n            :key=\"index\"\n            class=\"condition-item\">\n            <select \n              v-model=\"condition.field\"\n              @change=\"onFilterChange\"\n              class=\"condition-field\">\n              <option value=\"\">Select field</option>\n              <option \n                v-for=\"field in availableFields\"\n                :key=\"field\"\n                :value=\"field\">\n                {{ field }}\n              </option>\n            </select>\n            <select \n              v-model=\"condition.operator\"\n              @change=\"onFilterChange\"\n              class=\"condition-operator\">\n              <option value=\"equals\">Equals</option>\n              <option value=\"not_equals\">Not equals</option>\n              <option value=\"greater_than\">Greater than</option>\n              <option value=\"less_than\">Less than</option>\n              <option value=\"contains\">Contains</option>\n              <option value=\"not_contains\">Not contains</option>\n            </select>\n            <input \n              type=\"text\"\n              v-model=\"condition.value\"\n              @change=\"onFilterChange\"\n              placeholder=\"Value\"\n              class=\"condition-value\">\n            <button \n              @click=\"removeCondition(index)\"\n              class=\"remove-condition-btn\"\n              title=\"Remove condition\">\n              <span v-html=\"removeIcon\"></span>\n            </button>\n          </div>\n          <button \n            @click=\"addCondition\"\n            class=\"add-condition-btn\">\n            <span v-html=\"addIcon\"></span>\n            <span>Add condition</span>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 数据预览 -->\n    <div class=\"preview-section\" v-if=\"previewData.length > 0\">\n      <div class=\"section-header\">\n        <span class=\"section-icon\" v-html=\"previewIcon\"></span>\n        <span class=\"section-title\">Preview</span>\n        <span class=\"preview-count\">({{ previewData.length }} rows)</span>\n      </div>\n      <div class=\"preview-content\">\n        <div class=\"preview-table\">\n          <table>\n            <thead>\n              <tr>\n                <th v-for=\"field in previewFields\" :key=\"field\">{{ field }}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"(row, index) in previewData.slice(0, 5)\" :key=\"index\">\n                <td v-for=\"field in previewFields\" :key=\"field\">\n                  {{ formatPreviewValue(row[field]) }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <!-- 操作按钮 -->\n    <div class=\"action-buttons\">\n      <button \n        class=\"action-btn secondary\"\n        @click=\"previewChart\"\n        :disabled=\"!canPreview\">\n        <span v-html=\"previewIcon\"></span>\n        <span>Preview</span>\n      </button>\n      <button \n        class=\"action-btn primary\"\n        @click=\"generateChart\"\n        :disabled=\"!canGenerate\">\n        <span v-html=\"generateIcon\"></span>\n        <span>Generate Chart</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue'\nimport { globalDragHandler, validateDragData } from '../utils/dragDropUtils.js'\nimport { globalDataMapper } from '../utils/dataMappingUtils.js'\n\n// Props\nconst props = defineProps({\n  selectedChartType: {\n    type: String,\n    default: ''\n  }\n})\n\n// Emits\nconst emit = defineEmits(['chart-generated', 'preview-chart'])\n\n// 响应式数据\nconst realTimeRender = ref(true)\nconst isDragActive = ref(false)\nconst isFilterExpanded = ref(false)\nconst mappings = ref({\n  xAxis: null,\n  yAxis: null,\n  series: null,\n  size: null,\n  color: null\n})\nconst filterConfig = ref({\n  type: 'all',\n  range: { start: 0, end: -1 },\n  conditions: []\n})\nconst previewData = ref([])\n\n// 计算属性\nconst showSeriesMapping = computed(() => {\n  return ['bar', 'line', 'area'].includes(props.selectedChartType)\n})\n\nconst showSizeMapping = computed(() => {\n  return ['scatter', 'bubble'].includes(props.selectedChartType)\n})\n\nconst showColorMapping = computed(() => {\n  return ['scatter', 'bubble', 'heatmap'].includes(props.selectedChartType)\n})\n\nconst availableFields = computed(() => {\n  const fields = []\n  Object.values(mappings.value).forEach(mapping => {\n    if (mapping && mapping.columnName) {\n      fields.push(mapping.columnName)\n    }\n  })\n  return fields\n})\n\nconst previewFields = computed(() => {\n  const fields = []\n  Object.entries(mappings.value).forEach(([key, mapping]) => {\n    if (mapping && mapping.columnName) {\n      fields.push(key)\n    }\n  })\n  return fields\n})\n\nconst canPreview = computed(() => {\n  return mappings.value.xAxis && mappings.value.yAxis\n})\n\nconst canGenerate = computed(() => {\n  const requirements = getChartRequirements(props.selectedChartType)\n  return requirements.every(req => isMappingFulfilled(req))\n})\n\n// 图标\nconst mappingIcon = '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/></svg>'\nconst autoIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>'\nconst manualIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8-1.41-1.42z\"/></svg>'\nconst clearIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"/></svg>'\nconst xAxisIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4zm2.59 1.41L21 17l-1.41-1.41L21 14.17 19.59 12.76 18.17 14.17 16.76 12.76 15.34 14.17 13.93 12.76 12.52 14.17 11.1 12.76 9.69 14.17 8.28 12.76 6.86 14.17 5.45 12.76 4.04 14.17 2.62 12.76 1.21 14.17 3.04 17l1.41 1.41L6.86 16l1.41 1.41L10.69 16l1.41 1.41L14.52 16l1.41 1.41L18.34 16l1.41 1.41L22.17 16z\"/></svg>'\nconst yAxisIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M16 17H9v-2h7v2zm0-4H9V7h7v6zm0-8H9V3h7v2zM7 3v14l-3-3m0 0l3 3m-3-3h18\"/></svg>'\nconst seriesIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\"/></svg>'\nconst sizeIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>'\nconst colorIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z\"/></svg>'\nconst filterIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z\"/></svg>'\nconst dragIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M20 9H4v2h16V9zM4 15h16v-2H4v2z\"/></svg>'\nconst removeIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg>'\nconst expandIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 10l5 5 5-5z\"/></svg>'\nconst collapseIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 14l5-5 5 5z\"/></svg>'\nconst addIcon = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>'\nconst previewIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"/></svg>'\nconst generateIcon = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"/></svg>'\n\n// 方法\nfunction getChartIcon(chartType) {\n  const icons = {\n    'bar': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/></svg>',\n    'line': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z\"/></svg>',\n    'pie': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z\"/></svg>',\n    'scatter': '<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 17.5c1.38 0 2.5-1.12 2.5-2.5S8.38 12.5 7 12.5 4.5 13.62 4.5 15 5.62 17.5 7 17.5zm10-7c1.38 0 2.5-1.12 2.5-2.5S18.38 7.5 17 7.5 14.5 8.62 14.5 10s1.12 2.5 2.5 2.5zm-5 1c1.38 0 2.5-1.12 2.5-2.5S13.38 9 12 9s-2.5 1.12-2.5 2.5 1.12 2.5 2.5 2.5z\"/></svg>'\n  }\n  return icons[chartType] || icons['bar']\n}\n\nfunction getColumnIcon(type) {\n  const icons = {\n    'string': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 4v3h5v12h3V7h5V4H9zM3 12h3v7h3v-7h3V9H3v3z\"/></svg>',\n    'number': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7 17h2v-6H7v6zm4 0h2V7h-2v10zm4-4h2v-2.5h-2V13z\"/></svg>',\n    'date': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\"/></svg>',\n    'boolean': '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>'\n  }\n  return icons[type] || icons['string']\n}\n\nfunction getChartRequirements(chartType) {\n  const requirements = {\n    'bar': ['xAxis', 'yAxis'],\n    'line': ['xAxis', 'yAxis'],\n    'pie': ['xAxis', 'yAxis'],\n    'scatter': ['xAxis', 'yAxis'],\n    'bubble': ['xAxis', 'yAxis', 'size'],\n    'heatmap': ['xAxis', 'yAxis', 'color']\n  }\n  return requirements[chartType] || ['xAxis', 'yAxis']\n}\n\nfunction isRequiredMapping(mappingType) {\n  const requirements = getChartRequirements(props.selectedChartType)\n  return requirements.includes(mappingType)\n}\n\nfunction isMappingFulfilled(requirement) {\n  return mappings.value[requirement] !== null\n}\n\nfunction isValidDrop(targetType) {\n  // 这里可以添加更复杂的验证逻辑\n  return true\n}\n\nfunction toggleRealTimeRender() {\n  realTimeRender.value = !realTimeRender.value\n}\n\nfunction clearAllMappings() {\n  mappings.value = {\n    xAxis: null,\n    yAxis: null,\n    series: null,\n    size: null,\n    color: null\n  }\n  globalDataMapper.clearAll()\n  updatePreview()\n}\n\nfunction toggleFilterExpanded() {\n  isFilterExpanded.value = !isFilterExpanded.value\n}\n\n// 拖拽处理\nfunction handleDragOver(event) {\n  event.preventDefault()\n  event.dataTransfer.dropEffect = 'move'\n}\n\nfunction handleDragEnter(event) {\n  event.preventDefault()\n  event.target.classList.add('drop-zone-hover')\n}\n\nfunction handleDragLeave(event) {\n  event.target.classList.remove('drop-zone-hover')\n}\n\nfunction handleDrop(mappingType, event) {\n  event.preventDefault()\n  event.target.classList.remove('drop-zone-hover')\n  \n  let dragData\n  try {\n    dragData = JSON.parse(event.dataTransfer.getData('text/plain'))\n  } catch (e) {\n    console.error('Invalid drag data:', e)\n    return\n  }\n  \n  if (validateDragData(dragData, mappingType)) {\n    mappings.value[mappingType] = dragData\n    globalDataMapper.setMapping(mappingType, dragData)\n    updatePreview()\n  }\n}\n\nfunction removeMapping(mappingType) {\n  mappings.value[mappingType] = null\n  globalDataMapper.removeMapping(mappingType)\n  updatePreview()\n}\n\n// 过滤器处理\nfunction onFilterChange() {\n  globalDataMapper.setFilter(filterConfig.value)\n  updatePreview()\n}\n\nfunction addCondition() {\n  filterConfig.value.conditions.push({\n    field: '',\n    operator: 'equals',\n    value: ''\n  })\n}\n\nfunction removeCondition(index) {\n  filterConfig.value.conditions.splice(index, 1)\n  onFilterChange()\n}\n\n// 预览和生成\nasync function updatePreview() {\n  if (!realTimeRender.value) return\n  \n  try {\n    const data = await globalDataMapper.updatePreviewData()\n    previewData.value = data\n  } catch (error) {\n    console.error('Preview update failed:', error)\n    previewData.value = []\n  }\n}\n\nfunction formatPreviewValue(value) {\n  if (value === null || value === undefined) return '-'\n  if (typeof value === 'string' && value.length > 12) {\n    return value.substring(0, 12) + '...'\n  }\n  return String(value)\n}\n\nasync function previewChart() {\n  if (!realTimeRender.value) {\n    await updatePreview()\n  }\n  \n  const chartOption = globalDataMapper.generateChartOption(props.selectedChartType)\n  if (chartOption) {\n    emit('preview-chart', chartOption)\n  }\n}\n\nasync function generateChart() {\n  await updatePreview()\n  const chartOption = globalDataMapper.generateChartOption(props.selectedChartType)\n  if (chartOption) {\n    emit('chart-generated', {\n      option: chartOption,\n      config: globalDataMapper.exportConfig(),\n      timestamp: Date.now()\n    })\n  }\n}\n\n// 生命周期\nonMounted(() => {\n  // 注册全局拖拽事件\n  document.addEventListener('dragover', (e) => {\n    isDragActive.value = true\n    e.preventDefault()\n  })\n  \n  document.addEventListener('dragleave', (e) => {\n    if (!e.relatedTarget) {\n      isDragActive.value = false\n    }\n  })\n  \n  document.addEventListener('drop', () => {\n    isDragActive.value = false\n  })\n})\n\nonUnmounted(() => {\n  // 清理事件监听器\n  document.removeEventListener('dragover', () => {})\n  document.removeEventListener('dragleave', () => {})\n  document.removeEventListener('drop', () => {})\n})\n\n// 监听器\nwatch(() => props.selectedChartType, () => {\n  // 当图表类型改变时，清理不兼容的映射\n  if (mappings.value.series && !showSeriesMapping.value) {\n    removeMapping('series')\n  }\n  if (mappings.value.size && !showSizeMapping.value) {\n    removeMapping('size')\n  }\n  if (mappings.value.color && !showColorMapping.value) {\n    removeMapping('color')\n  }\n})\n\nwatch(() => realTimeRender.value, (newValue) => {\n  if (newValue) {\n    updatePreview()\n  }\n})\n</script>\n\n<style scoped>\n.data-mapping-panel {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--bg-color, #fff);\n  border-radius: 8px;\n  border: 1px solid var(--border-color, #e0e0e0);\n  overflow: hidden;\n}\n\n.panel-header {\n  padding: 16px;\n  background: var(--header-bg, #f8f9fa);\n  border-bottom: 1px solid var(--border-color, #e0e0e0);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-shrink: 0;\n}\n\n.panel-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: var(--text-color, #333);\n}\n\n.panel-icon {\n  color: var(--primary-color, #5470c6);\n}\n\n.panel-controls {\n  display: flex;\n  gap: 8px;\n}\n\n.panel-control-btn {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: transparent;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  color: var(--text-secondary, #666);\n}\n\n.panel-control-btn:hover {\n  background: var(--hover-bg, rgba(0, 0, 0, 0.05));\n  color: var(--text-color, #333);\n}\n\n.panel-control-btn.active {\n  background: var(--primary-color, #5470c6);\n  color: white;\n}\n\n.chart-type-info {\n  padding: 12px 16px;\n  background: var(--bg-secondary, #f8f9fa);\n  border-bottom: 1px solid var(--border-color, #e0e0e0);\n  flex-shrink: 0;\n}\n\n.chart-type-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: var(--text-color, #333);\n  margin-bottom: 8px;\n}\n\n.chart-icon {\n  color: var(--primary-color, #5470c6);\n}\n\n.chart-requirements {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n\n.requirement-badge {\n  padding: 2px 6px;\n  background: var(--bg-color, #fff);\n  border: 1px solid var(--border-color, #e0e0e0);\n  border-radius: 3px;\n  font-size: 11px;\n  color: var(--text-secondary, #666);\n}\n\n.requirement-badge.fulfilled {\n  background: var(--success-color, #52c41a);\n  color: white;\n  border-color: var(--success-color, #52c41a);\n}\n\n.mapping-sections {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n}\n\n.mapping-section {\n  margin-bottom: 16px;\n}\n\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n  font-weight: 600;\n  color: var(--text-color, #333);\n}\n\n.section-icon {\n  color: var(--primary-color, #5470c6);\n}\n\n.section-required {\n  color: var(--error-color, #ff4757);\n}\n\n.section-optional {\n  color: var(--text-secondary, #666);\n  font-weight: normal;\n  font-size: 12px;\n}\n\n.section-toggle-btn {\n  margin-left: auto;\n  width: 20px;\n  height: 20px;\n  border: none;\n  background: transparent;\n  border-radius: 2px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  color: var(--text-secondary, #666);\n}\n\n.section-toggle-btn:hover {\n  background: var(--hover-bg, rgba(0, 0, 0, 0.05));\n}\n\n.section-toggle-btn.expanded {\n  transform: rotate(180deg);\n}\n\n.drop-zone {\n  min-height: 60px;\n  border: 2px dashed var(--border-color, #e0e0e0);\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  background: var(--bg-color, #fff);\n}\n\n.drop-zone.drop-zone-active {\n  border-color: var(--primary-color, #5470c6);\n  background: var(--primary-bg, rgba(84, 112, 198, 0.05));\n}\n\n.drop-zone.drop-zone-hover {\n  border-color: var(--primary-color, #5470c6);\n  background: var(--primary-bg, rgba(84, 112, 198, 0.1));\n}\n\n.drop-zone.has-mapping {\n  border-style: solid;\n  border-color: var(--success-color, #52c41a);\n  background: var(--success-bg, rgba(82, 196, 26, 0.05));\n}\n\n.mapping-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 8px 12px;\n}\n\n.mapping-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mapping-icon {\n  color: var(--primary-color, #5470c6);\n}\n\n.mapping-details {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mapping-name {\n  font-weight: 600;\n  color: var(--text-color, #333);\n  font-size: 13px;\n}\n\n.mapping-source {\n  font-size: 11px;\n  color: var(--text-secondary, #666);\n}\n\n.remove-mapping-btn {\n  width: 24px;\n  height: 24px;\n  border: none;\n  background: transparent;\n  border-radius: 3px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  color: var(--text-secondary, #666);\n}\n\n.remove-mapping-btn:hover {\n  background: var(--error-color, #ff4757);\n  color: white;\n}\n\n.drop-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  color: var(--text-secondary, #666);\n}\n\n.placeholder-icon {\n  opacity: 0.5;\n}\n\n.placeholder-text {\n  font-size: 12px;\n  text-align: center;\n}\n\n.filter-section {\n  border-top: 1px solid var(--border-color, #e0e0e0);\n  padding: 16px;\n  flex-shrink: 0;\n}\n\n.filter-content {\n  margin-top: 12px;\n}\n\n.filter-type-selector {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.filter-type-option {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: 13px;\n  color: var(--text-color, #333);\n}\n\n.filter-type-option input[type=\"radio\"] {\n  margin: 0;\n}\n\n.range-filter {\n  margin-top: 12px;\n}\n\n.range-inputs {\n  display: flex;\n  gap: 12px;\n}\n\n.range-inputs label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  font-size: 12px;\n  color: var(--text-secondary, #666);\n}\n\n.range-input {\n  width: 80px;\n  padding: 6px 8px;\n  border: 1px solid var(--border-color, #e0e0e0);\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n.condition-filter {\n  margin-top: 12px;\n}\n\n.condition-item {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n  align-items: center;\n}\n\n.condition-field,\n.condition-operator {\n  flex: 1;\n  padding: 6px 8px;\n  border: 1px solid var(--border-color, #e0e0e0);\n  border-radius: 4px;\n  font-size: 12px;\n  background: var(--bg-color, #fff);\n}\n\n.condition-value {\n  flex: 1;\n  padding: 6px 8px;\n  border: 1px solid var(--border-color, #e0e0e0);\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n.remove-condition-btn {\n  width: 24px;\n  height: 24px;\n  border: none;\n  background: transparent;\n  border-radius: 3px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  color: var(--text-secondary, #666);\n}\n\n.remove-condition-btn:hover {\n  background: var(--error-color, #ff4757);\n  color: white;\n}\n\n.add-condition-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  border: 1px dashed var(--border-color, #e0e0e0);\n  background: transparent;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  color: var(--text-secondary, #666);\n  transition: all 0.2s;\n}\n\n.add-condition-btn:hover {\n  border-color: var(--primary-color, #5470c6);\n  color: var(--primary-color, #5470c6);\n}\n\n.preview-section {\n  border-top: 1px solid var(--border-color, #e0e0e0);\n  padding: 16px;\n  flex-shrink: 0;\n}\n\n.preview-count {\n  color: var(--text-secondary, #666);\n  font-weight: normal;\n  font-size: 12px;\n}\n\n.preview-content {\n  margin-top: 12px;\n}\n\n.preview-table {\n  overflow-x: auto;\n  max-height: 120px;\n}\n\n.preview-table table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 11px;\n}\n\n.preview-table th,\n.preview-table td {\n  padding: 4px 8px;\n  border-bottom: 1px solid var(--border-color, #e0e0e0);\n  text-align: left;\n}\n\n.preview-table th {\n  background: var(--header-bg, #f8f9fa);\n  font-weight: 600;\n  color: var(--text-color, #333);\n  position: sticky;\n  top: 0;\n}\n\n.preview-table td {\n  color: var(--text-secondary, #666);\n  font-family: monospace;\n}\n\n.action-buttons {\n  padding: 16px;\n  border-top: 1px solid var(--border-color, #e0e0e0);\n  display: flex;\n  gap: 12px;\n  flex-shrink: 0;\n}\n\n.action-btn {\n  flex: 1;\n  padding: 10px 16px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  transition: all 0.2s;\n  font-size: 13px;\n}\n\n.action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.action-btn.secondary {\n  background: var(--bg-color, #fff);\n  color: var(--text-color, #333);\n  border: 1px solid var(--border-color, #e0e0e0);\n}\n\n.action-btn.secondary:hover:not(:disabled) {\n  background: var(--hover-bg, rgba(0, 0, 0, 0.05));\n}\n\n.action-btn.primary {\n  background: var(--primary-color, #5470c6);\n  color: white;\n}\n\n.action-btn.primary:hover:not(:disabled) {\n  background: var(--primary-hover, #4c63d2);\n}\n\n/* 滚动条样式 */\n.mapping-sections::-webkit-scrollbar,\n.preview-table::-webkit-scrollbar {\n  width: 4px;\n}\n\n.mapping-sections::-webkit-scrollbar-track,\n.preview-table::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.mapping-sections::-webkit-scrollbar-thumb,\n.preview-table::-webkit-scrollbar-thumb {\n  background: var(--border-color, #e0e0e0);\n  border-radius: 2px;\n}\n\n.mapping-sections::-webkit-scrollbar-thumb:hover,\n.preview-table::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary, #666);\n}\n\n/* 暗黑模式 */\n@media (prefers-color-scheme: dark) {\n  .data-mapping-panel {\n    --bg-color: #1a1a1a;\n    --header-bg: #2d2d2d;\n    --bg-secondary: #2d2d2d;\n    --border-color: #404040;\n    --text-color: #e0e0e0;\n    --text-secondary: #b0b0b0;\n    --hover-bg: rgba(255, 255, 255, 0.05);\n    --primary-color: #6366f1;\n    --primary-hover: #7c3aed;\n    --primary-bg: rgba(99, 102, 241, 0.1);\n    --success-color: #10b981;\n    --success-bg: rgba(16, 185, 129, 0.1);\n    --error-color: #ef4444;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}