{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, watch } from 'vue';\nexport default {\n  __name: 'ChartSaveModal',\n  props: {\n    show: {\n      type: Boolean,\n      default: false\n    },\n    chartConfig: {\n      type: Object,\n      default: () => ({})\n    },\n    mappingConfig: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: ['close', 'save'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // 表单数据\n    const chartTitle = ref('');\n    const chartDescription = ref('');\n    const tags = ref([]);\n    const newTag = ref('');\n    const saveToCloud = ref(false);\n    const saveFormat = ref('config');\n\n    // 监听弹窗显示状态，重置表单\n    watch(() => props.show, newVal => {\n      if (newVal) {\n        // 从图表配置中提取标题\n        if (props.chartConfig.title && props.chartConfig.title.text) {\n          chartTitle.value = props.chartConfig.title.text;\n        } else {\n          chartTitle.value = '';\n        }\n        chartDescription.value = '';\n        tags.value = [];\n        newTag.value = '';\n        saveToCloud.value = false;\n        saveFormat.value = 'config';\n      }\n    });\n\n    // 添加标签\n    function addTag() {\n      const tag = newTag.value.trim();\n      if (tag && !tags.value.includes(tag)) {\n        tags.value.push(tag);\n        newTag.value = '';\n      }\n    }\n\n    // 移除标签\n    function removeTag(index) {\n      tags.value.splice(index, 1);\n    }\n\n    // 处理保存\n    function handleSave() {\n      const saveData = {\n        title: chartTitle.value.trim(),\n        description: chartDescription.value.trim(),\n        tags: tags.value,\n        chartConfig: props.chartConfig,\n        mappingConfig: props.mappingConfig,\n        saveToCloud: saveToCloud.value,\n        saveFormat: saveFormat.value,\n        createdAt: new Date().toISOString(),\n        id: Date.now().toString()\n      };\n      emit('save', saveData);\n    }\n    const __returned__ = {\n      props,\n      emit,\n      chartTitle,\n      chartDescription,\n      tags,\n      newTag,\n      saveToCloud,\n      saveFormat,\n      addTag,\n      removeTag,\n      handleSave,\n      ref,\n      watch\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","props","__props","emit","__emit","chartTitle","chartDescription","tags","newTag","saveToCloud","saveFormat","show","newVal","chartConfig","title","text","value","addTag","tag","trim","includes","push","removeTag","index","splice","handleSave","saveData","description","mappingConfig","createdAt","Date","toISOString","id","now","toString"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/ChartSaveModal.vue"],"sourcesContent":["<template>\n  <div class=\"chart-save-modal\" v-if=\"show\" @click.self=\"$emit('close')\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h3>保存图表</h3>\n        <button class=\"close-btn\" @click=\"$emit('close')\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"modal-body\">\n        <div class=\"form-group\">\n          <label for=\"chart-title\">图表标题</label>\n          <input \n            id=\"chart-title\"\n            type=\"text\" \n            v-model=\"chartTitle\"\n            placeholder=\"请输入图表标题\"\n            class=\"form-input\"\n          >\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"chart-description\">描述信息</label>\n          <textarea \n            id=\"chart-description\"\n            v-model=\"chartDescription\"\n            placeholder=\"请输入图表描述（可选）\"\n            class=\"form-textarea\"\n            rows=\"3\"\n          ></textarea>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"chart-tags\">标签</label>\n          <div class=\"tags-input\">\n            <div class=\"tag-list\">\n              <span \n                v-for=\"(tag, index) in tags\" \n                :key=\"index\"\n                class=\"tag\"\n              >\n                {{ tag }}\n                <button type=\"button\" @click=\"removeTag(index)\">×</button>\n              </span>\n            </div>\n            <input \n              type=\"text\" \n              v-model=\"newTag\"\n              placeholder=\"添加标签\"\n              class=\"tag-input\"\n              @keyup.enter=\"addTag\"\n              @keyup.space=\"addTag\"\n            >\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"checkbox-label\">\n            <input \n              type=\"checkbox\" \n              v-model=\"saveToCloud\"\n              class=\"checkbox\"\n            >\n            <span class=\"checkbox-text\">同步到云端</span>\n          </label>\n        </div>\n\n        <div class=\"save-options\">\n          <div class=\"option-group\">\n            <h4>保存选项</h4>\n            <label class=\"radio-label\">\n              <input \n                type=\"radio\" \n                v-model=\"saveFormat\" \n                value=\"config\"\n                class=\"radio\"\n              >\n              <span class=\"radio-text\">仅保存配置</span>\n            </label>\n            <label class=\"radio-label\">\n              <input \n                type=\"radio\" \n                v-model=\"saveFormat\" \n                value=\"with-data\"\n                class=\"radio\"\n              >\n              <span class=\"radio-text\">保存配置和数据</span>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-secondary\" @click=\"$emit('close')\">\n          取消\n        </button>\n        <button \n          class=\"btn btn-primary\" \n          @click=\"handleSave\"\n          :disabled=\"!chartTitle.trim()\"\n        >\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"/>\n            <polyline points=\"17,21 17,13 7,13 7,21\"/>\n            <polyline points=\"7,3 7,8 15,8\"/>\n          </svg>\n          保存图表\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\n\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false\n  },\n  chartConfig: {\n    type: Object,\n    default: () => ({})\n  },\n  mappingConfig: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\nconst emit = defineEmits(['close', 'save'])\n\n// 表单数据\nconst chartTitle = ref('')\nconst chartDescription = ref('')\nconst tags = ref([])\nconst newTag = ref('')\nconst saveToCloud = ref(false)\nconst saveFormat = ref('config')\n\n// 监听弹窗显示状态，重置表单\nwatch(() => props.show, (newVal) => {\n  if (newVal) {\n    // 从图表配置中提取标题\n    if (props.chartConfig.title && props.chartConfig.title.text) {\n      chartTitle.value = props.chartConfig.title.text\n    } else {\n      chartTitle.value = ''\n    }\n    chartDescription.value = ''\n    tags.value = []\n    newTag.value = ''\n    saveToCloud.value = false\n    saveFormat.value = 'config'\n  }\n})\n\n// 添加标签\nfunction addTag() {\n  const tag = newTag.value.trim()\n  if (tag && !tags.value.includes(tag)) {\n    tags.value.push(tag)\n    newTag.value = ''\n  }\n}\n\n// 移除标签\nfunction removeTag(index) {\n  tags.value.splice(index, 1)\n}\n\n// 处理保存\nfunction handleSave() {\n  const saveData = {\n    title: chartTitle.value.trim(),\n    description: chartDescription.value.trim(),\n    tags: tags.value,\n    chartConfig: props.chartConfig,\n    mappingConfig: props.mappingConfig,\n    saveToCloud: saveToCloud.value,\n    saveFormat: saveFormat.value,\n    createdAt: new Date().toISOString(),\n    id: Date.now().toString()\n  }\n\n  emit('save', saveData)\n}\n</script>\n\n<style scoped>\n.chart-save-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n}\n\n.modal-content {\n  background: var(--bg-color);\n  border-radius: var(--radius-xl);\n  box-shadow: var(--shadow-xl);\n  width: 90%;\n  max-width: 500px;\n  max-height: 90vh;\n  overflow-y: auto;\n  animation: modalSlideIn 0.3s ease-out;\n}\n\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n\n.close-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: var(--radius-md);\n  background: transparent;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--transition-normal);\n}\n\n.close-btn:hover {\n  background: var(--bg-hover);\n  color: var(--text-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 0.5rem;\n  color: var(--text-color);\n  font-weight: 500;\n}\n\n.form-input,\n.form-textarea {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  background: var(--bg-color);\n  color: var(--text-color);\n  font-size: 0.875rem;\n  transition: border-color var(--transition-normal);\n}\n\n.form-input:focus,\n.form-textarea:focus {\n  outline: none;\n  border-color: var(--primary-color);\n}\n\n.form-textarea {\n  resize: vertical;\n  min-height: 80px;\n}\n\n.tags-input {\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  padding: 0.5rem;\n  background: var(--bg-color);\n  transition: border-color var(--transition-normal);\n}\n\n.tags-input:focus-within {\n  border-color: var(--primary-color);\n}\n\n.tag-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.tag {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  background: var(--primary-bg);\n  color: var(--primary-color);\n  border-radius: var(--radius-sm);\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n.tag button {\n  border: none;\n  background: none;\n  color: var(--primary-color);\n  cursor: pointer;\n  font-size: 1rem;\n  line-height: 1;\n  padding: 0;\n  margin: 0;\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background var(--transition-normal);\n}\n\n.tag button:hover {\n  background: var(--primary-color);\n  color: white;\n}\n\n.tag-input {\n  border: none;\n  outline: none;\n  background: none;\n  color: var(--text-color);\n  font-size: 0.875rem;\n  width: 100%;\n}\n\n.checkbox-label,\n.radio-label {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  margin-bottom: 0.5rem;\n}\n\n.checkbox,\n.radio {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n}\n\n.checkbox-text,\n.radio-text {\n  color: var(--text-color);\n  font-size: 0.875rem;\n}\n\n.save-options {\n  background: var(--bg-secondary);\n  border-radius: var(--radius-md);\n  padding: 1rem;\n}\n\n.option-group h4 {\n  margin: 0 0 0.75rem 0;\n  color: var(--text-color);\n  font-size: 0.875rem;\n  font-weight: 600;\n}\n\n.modal-footer {\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n  padding: 1.5rem;\n  border-top: 1px solid var(--border-color);\n}\n\n.btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--transition-normal);\n}\n\n.btn-secondary {\n  background: var(--bg-secondary);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n}\n\n.btn-secondary:hover {\n  background: var(--bg-hover);\n}\n\n.btn-primary {\n  background: var(--primary-color);\n  color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background: var(--primary-color-hover);\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n@media (max-width: 640px) {\n  .modal-content {\n    width: 95%;\n    margin: 1rem;\n  }\n  \n  .modal-header,\n  .modal-body,\n  .modal-footer {\n    padding: 1rem;\n  }\n  \n  .modal-footer {\n    flex-direction: column;\n  }\n  \n  .btn {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n"],"mappings":";AAsHA,SAASA,GAAG,EAAEC,KAAK,QAAQ,KAAI;;;;;;;;;;;;;;;;;;;;;;;IAE/B,MAAMC,KAAK,GAAGC,OAAA;IAed,MAAMC,IAAI,GAAGC,MAAA;;IAEb;IACA,MAAMC,UAAU,GAAGN,GAAG,CAAC,EAAE;IACzB,MAAMO,gBAAgB,GAAGP,GAAG,CAAC,EAAE;IAC/B,MAAMQ,IAAI,GAAGR,GAAG,CAAC,EAAE;IACnB,MAAMS,MAAM,GAAGT,GAAG,CAAC,EAAE;IACrB,MAAMU,WAAW,GAAGV,GAAG,CAAC,KAAK;IAC7B,MAAMW,UAAU,GAAGX,GAAG,CAAC,QAAQ;;IAE/B;IACAC,KAAK,CAAC,MAAMC,KAAK,CAACU,IAAI,EAAGC,MAAM,IAAK;MAClC,IAAIA,MAAM,EAAE;QACV;QACA,IAAIX,KAAK,CAACY,WAAW,CAACC,KAAK,IAAIb,KAAK,CAACY,WAAW,CAACC,KAAK,CAACC,IAAI,EAAE;UAC3DV,UAAU,CAACW,KAAK,GAAGf,KAAK,CAACY,WAAW,CAACC,KAAK,CAACC,IAAG;QAChD,CAAC,MAAM;UACLV,UAAU,CAACW,KAAK,GAAG,EAAC;QACtB;QACAV,gBAAgB,CAACU,KAAK,GAAG,EAAC;QAC1BT,IAAI,CAACS,KAAK,GAAG,EAAC;QACdR,MAAM,CAACQ,KAAK,GAAG,EAAC;QAChBP,WAAW,CAACO,KAAK,GAAG,KAAI;QACxBN,UAAU,CAACM,KAAK,GAAG,QAAO;MAC5B;IACF,CAAC;;IAED;IACA,SAASC,MAAMA,CAAA,EAAG;MAChB,MAAMC,GAAG,GAAGV,MAAM,CAACQ,KAAK,CAACG,IAAI,CAAC;MAC9B,IAAID,GAAG,IAAI,CAACX,IAAI,CAACS,KAAK,CAACI,QAAQ,CAACF,GAAG,CAAC,EAAE;QACpCX,IAAI,CAACS,KAAK,CAACK,IAAI,CAACH,GAAG;QACnBV,MAAM,CAACQ,KAAK,GAAG,EAAC;MAClB;IACF;;IAEA;IACA,SAASM,SAASA,CAACC,KAAK,EAAE;MACxBhB,IAAI,CAACS,KAAK,CAACQ,MAAM,CAACD,KAAK,EAAE,CAAC;IAC5B;;IAEA;IACA,SAASE,UAAUA,CAAA,EAAG;MACpB,MAAMC,QAAQ,GAAG;QACfZ,KAAK,EAAET,UAAU,CAACW,KAAK,CAACG,IAAI,CAAC,CAAC;QAC9BQ,WAAW,EAAErB,gBAAgB,CAACU,KAAK,CAACG,IAAI,CAAC,CAAC;QAC1CZ,IAAI,EAAEA,IAAI,CAACS,KAAK;QAChBH,WAAW,EAAEZ,KAAK,CAACY,WAAW;QAC9Be,aAAa,EAAE3B,KAAK,CAAC2B,aAAa;QAClCnB,WAAW,EAAEA,WAAW,CAACO,KAAK;QAC9BN,UAAU,EAAEA,UAAU,CAACM,KAAK;QAC5Ba,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACnCC,EAAE,EAAEF,IAAI,CAACG,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC;MAC1B;MAEA/B,IAAI,CAAC,MAAM,EAAEuB,QAAQ;IACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}