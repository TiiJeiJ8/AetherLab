{"ast":null,"code":"import { unref as _unref, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chart-mapping-scatter\"\n};\nconst _hoisted_2 = {\n  class: \"mapping-area\"\n};\nconst _hoisted_3 = {\n  class: \"mapping-header\"\n};\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"mapped-field\"\n};\nconst _hoisted_6 = {\n  class: \"field-name\"\n};\nconst _hoisted_7 = {\n  class: \"field-type\"\n};\nconst _hoisted_8 = [\"innerHTML\"];\nconst _hoisted_9 = {\n  key: 1,\n  class: \"empty-drop-zone\"\n};\nconst _hoisted_10 = {\n  class: \"mapping-area\"\n};\nconst _hoisted_11 = {\n  class: \"mapping-header\"\n};\nconst _hoisted_12 = [\"innerHTML\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"mapped-field\"\n};\nconst _hoisted_14 = {\n  class: \"field-name\"\n};\nconst _hoisted_15 = {\n  class: \"field-type\"\n};\nconst _hoisted_16 = [\"innerHTML\"];\nconst _hoisted_17 = {\n  key: 1,\n  class: \"empty-drop-zone\"\n};\nconst _hoisted_18 = {\n  class: \"mapping-area\"\n};\nconst _hoisted_19 = {\n  class: \"mapping-header\"\n};\nconst _hoisted_20 = [\"innerHTML\"];\nconst _hoisted_21 = {\n  key: 0,\n  class: \"mapped-field\"\n};\nconst _hoisted_22 = {\n  class: \"field-name\"\n};\nconst _hoisted_23 = {\n  class: \"field-type\"\n};\nconst _hoisted_24 = [\"innerHTML\"];\nconst _hoisted_25 = {\n  key: 1,\n  class: \"empty-drop-zone\"\n};\nconst _hoisted_26 = {\n  class: \"mapping-area\"\n};\nconst _hoisted_27 = {\n  class: \"mapping-header\"\n};\nconst _hoisted_28 = [\"innerHTML\"];\nconst _hoisted_29 = {\n  key: 0,\n  class: \"mapped-field\"\n};\nconst _hoisted_30 = {\n  class: \"field-name\"\n};\nconst _hoisted_31 = {\n  class: \"field-type\"\n};\nconst _hoisted_32 = [\"innerHTML\"];\nconst _hoisted_33 = {\n  key: 1,\n  class: \"empty-drop-zone\"\n};\nconst _hoisted_34 = {\n  class: \"mapping-area\"\n};\nconst _hoisted_35 = {\n  class: \"mapping-header\"\n};\nconst _hoisted_36 = [\"innerHTML\"];\nconst _hoisted_37 = {\n  class: \"scatter-style-options\"\n};\nconst _hoisted_38 = {\n  class: \"style-option\"\n};\nconst _hoisted_39 = {\n  class: \"slider-option\"\n};\nconst _hoisted_40 = {\n  class: \"slider-value\"\n};\nconst _hoisted_41 = {\n  class: \"style-option\"\n};\nconst _hoisted_42 = {\n  class: \"style-option\"\n};\nconst _hoisted_43 = {\n  class: \"slider-option\"\n};\nconst _hoisted_44 = {\n  class: \"slider-value\"\n};\nconst _hoisted_45 = {\n  class: \"style-option\"\n};\nconst _hoisted_46 = {\n  class: \"checkbox-option\"\n};\nconst _hoisted_47 = {\n  class: \"style-option\"\n};\nconst _hoisted_48 = {\n  class: \"checkbox-option\"\n};\nimport { ref, reactive, computed, watch } from 'vue';\nimport { getThemeIcon } from '@/assets/JS/icons.js';\n\n// Props\n\nexport default {\n  __name: 'ChartMappingScatter',\n  props: {\n    chartType: {\n      type: String,\n      required: true\n    },\n    draggedColumn: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['field-mapped', 'field-removed'],\n  setup(__props, {\n    emit: __emit\n  }) {\n    /* eslint-disable */\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n\n    // 映射状态\n    const mappings = reactive({\n      xAxis: null,\n      yAxis: null,\n      size: null,\n      color: null\n    });\n\n    // 拖拽状态\n    const dragStates = reactive({\n      xAxis: false,\n      yAxis: false,\n      size: false,\n      color: false\n    });\n\n    // 散点图配置\n    const scatterConfig = reactive({\n      pointSize: 6,\n      pointShape: 'circle',\n      opacity: 0.8,\n      showRegression: false,\n      showGrid: true\n    });\n\n    // 检查是否可以放置到X轴\n    function canDropToXAxis(column) {\n      if (!column) return false;\n      return ['number', 'integer'].includes(column.type);\n    }\n\n    // 检查是否可以放置到Y轴\n    function canDropToYAxis(column) {\n      if (!column) return false;\n      return ['number', 'integer'].includes(column.type);\n    }\n\n    // 检查是否可以放置到尺寸\n    function canDropToSize(column) {\n      if (!column) return false;\n      return ['number', 'integer'].includes(column.type);\n    }\n\n    // 检查是否可以放置到颜色\n    function canDropToColor(column) {\n      if (!column) return false;\n      return ['string', 'category', 'number', 'integer'].includes(column.type);\n    }\n\n    // 处理拖拽悬停\n    function handleDragOver(area) {\n      dragStates[area] = true;\n    }\n\n    // 处理拖拽离开\n    function handleDragLeave(area) {\n      dragStates[area] = false;\n    }\n\n    // 处理拖放\n    function handleDrop(event, area) {\n      event.preventDefault();\n      dragStates[area] = false;\n      const columnData = JSON.parse(event.dataTransfer.getData('text/plain'));\n\n      // 验证是否可以放置\n      let canDrop = false;\n      switch (area) {\n        case 'xAxis':\n          canDrop = canDropToXAxis(columnData);\n          break;\n        case 'yAxis':\n          canDrop = canDropToYAxis(columnData);\n          break;\n        case 'size':\n          canDrop = canDropToSize(columnData);\n          break;\n        case 'color':\n          canDrop = canDropToColor(columnData);\n          break;\n      }\n      if (!canDrop) {\n        return;\n      }\n\n      // 设置映射\n      mappings[area] = columnData;\n\n      // 发送映射事件\n      const mappingData = {\n        [area]: columnData\n      };\n      emit('field-mapped', mappingData);\n    }\n\n    // 移除映射\n    function removeMapping(area) {\n      mappings[area] = null;\n      emit('field-removed', area);\n    }\n\n    // 更新散点图配置\n    function updateScatterConfig() {\n      const configData = {\n        scatterConfig: scatterConfig\n      };\n      emit('field-mapped', configData);\n    }\n\n    // 监听拖拽的列变化\n    watch(() => props.draggedColumn, newColumn => {\n      // 可以在这里添加拖拽预览逻辑\n    }, {\n      deep: true\n    });\n\n    // 初始化散点图配置\n    updateScatterConfig();\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", {\n        class: \"mapping-icon\",\n        innerHTML: _unref(getThemeIcon)('x-axis')\n      }, null, 8, _hoisted_4), _cache[25] || (_cache[25] = _createElementVNode(\"span\", {\n        class: \"mapping-label\"\n      }, \"X-Axis\", -1)), _cache[26] || (_cache[26] = _createElementVNode(\"span\", {\n        class: \"mapping-required\"\n      }, \"*\", -1))]), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"drop-zone\", {\n          'has-field': mappings.xAxis,\n          'drag-over': dragStates.xAxis,\n          'invalid-drop': dragStates.xAxis && !canDropToXAxis(__props.draggedColumn)\n        }]),\n        onDrop: _cache[1] || (_cache[1] = $event => handleDrop($event, 'xAxis')),\n        onDragover: _cache[2] || (_cache[2] = _withModifiers($event => handleDragOver('xAxis'), [\"prevent\"])),\n        onDragleave: _cache[3] || (_cache[3] = $event => handleDragLeave('xAxis')),\n        onDragenter: _cache[4] || (_cache[4] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [mappings.xAxis ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"span\", _hoisted_6, _toDisplayString(mappings.xAxis.name), 1), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(mappings.xAxis.type), 1), _createElementVNode(\"button\", {\n        class: \"remove-field\",\n        onClick: _cache[0] || (_cache[0] = $event => removeMapping('xAxis'))\n      }, [_createElementVNode(\"span\", {\n        innerHTML: _unref(getThemeIcon)('x')\n      }, null, 8, _hoisted_8)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _cache[27] || (_cache[27] = [_createElementVNode(\"span\", null, \"Drop numerical column for X-axis\", -1)])))], 34)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"span\", {\n        class: \"mapping-icon\",\n        innerHTML: _unref(getThemeIcon)('y-axis')\n      }, null, 8, _hoisted_12), _cache[28] || (_cache[28] = _createElementVNode(\"span\", {\n        class: \"mapping-label\"\n      }, \"Y-Axis\", -1)), _cache[29] || (_cache[29] = _createElementVNode(\"span\", {\n        class: \"mapping-required\"\n      }, \"*\", -1))]), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"drop-zone\", {\n          'has-field': mappings.yAxis,\n          'drag-over': dragStates.yAxis,\n          'invalid-drop': dragStates.yAxis && !canDropToYAxis(__props.draggedColumn)\n        }]),\n        onDrop: _cache[6] || (_cache[6] = $event => handleDrop($event, 'yAxis')),\n        onDragover: _cache[7] || (_cache[7] = _withModifiers($event => handleDragOver('yAxis'), [\"prevent\"])),\n        onDragleave: _cache[8] || (_cache[8] = $event => handleDragLeave('yAxis')),\n        onDragenter: _cache[9] || (_cache[9] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [mappings.yAxis ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, _toDisplayString(mappings.yAxis.name), 1), _createElementVNode(\"span\", _hoisted_15, _toDisplayString(mappings.yAxis.type), 1), _createElementVNode(\"button\", {\n        class: \"remove-field\",\n        onClick: _cache[5] || (_cache[5] = $event => removeMapping('yAxis'))\n      }, [_createElementVNode(\"span\", {\n        innerHTML: _unref(getThemeIcon)('x')\n      }, null, 8, _hoisted_16)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _cache[30] || (_cache[30] = [_createElementVNode(\"span\", null, \"Drop numerical column for Y-axis\", -1)])))], 34)]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"span\", {\n        class: \"mapping-icon\",\n        innerHTML: _unref(getThemeIcon)('circle')\n      }, null, 8, _hoisted_20), _cache[31] || (_cache[31] = _createElementVNode(\"span\", {\n        class: \"mapping-label\"\n      }, \"Size (Optional)\", -1))]), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"drop-zone optional\", {\n          'has-field': mappings.size,\n          'drag-over': dragStates.size,\n          'invalid-drop': dragStates.size && !canDropToSize(__props.draggedColumn)\n        }]),\n        onDrop: _cache[11] || (_cache[11] = $event => handleDrop($event, 'size')),\n        onDragover: _cache[12] || (_cache[12] = _withModifiers($event => handleDragOver('size'), [\"prevent\"])),\n        onDragleave: _cache[13] || (_cache[13] = $event => handleDragLeave('size')),\n        onDragenter: _cache[14] || (_cache[14] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [mappings.size ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_createElementVNode(\"span\", _hoisted_22, _toDisplayString(mappings.size.name), 1), _createElementVNode(\"span\", _hoisted_23, _toDisplayString(mappings.size.type), 1), _createElementVNode(\"button\", {\n        class: \"remove-field\",\n        onClick: _cache[10] || (_cache[10] = $event => removeMapping('size'))\n      }, [_createElementVNode(\"span\", {\n        innerHTML: _unref(getThemeIcon)('x')\n      }, null, 8, _hoisted_24)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_25, _cache[32] || (_cache[32] = [_createElementVNode(\"span\", null, \"Drop numerical column for point size\", -1)])))], 34)]), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"span\", {\n        class: \"mapping-icon\",\n        innerHTML: _unref(getThemeIcon)('group')\n      }, null, 8, _hoisted_28), _cache[33] || (_cache[33] = _createElementVNode(\"span\", {\n        class: \"mapping-label\"\n      }, \"Color (Optional)\", -1))]), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"drop-zone optional\", {\n          'has-field': mappings.color,\n          'drag-over': dragStates.color,\n          'invalid-drop': dragStates.color && !canDropToColor(__props.draggedColumn)\n        }]),\n        onDrop: _cache[16] || (_cache[16] = $event => handleDrop($event, 'color')),\n        onDragover: _cache[17] || (_cache[17] = _withModifiers($event => handleDragOver('color'), [\"prevent\"])),\n        onDragleave: _cache[18] || (_cache[18] = $event => handleDragLeave('color')),\n        onDragenter: _cache[19] || (_cache[19] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [mappings.color ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_createElementVNode(\"span\", _hoisted_30, _toDisplayString(mappings.color.name), 1), _createElementVNode(\"span\", _hoisted_31, _toDisplayString(mappings.color.type), 1), _createElementVNode(\"button\", {\n        class: \"remove-field\",\n        onClick: _cache[15] || (_cache[15] = $event => removeMapping('color'))\n      }, [_createElementVNode(\"span\", {\n        innerHTML: _unref(getThemeIcon)('x')\n      }, null, 8, _hoisted_32)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_33, _cache[34] || (_cache[34] = [_createElementVNode(\"span\", null, \"Drop categorical column for color grouping\", -1)])))], 34)]), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"span\", {\n        class: \"mapping-icon\",\n        innerHTML: _unref(getThemeIcon)('settings')\n      }, null, 8, _hoisted_36), _cache[35] || (_cache[35] = _createElementVNode(\"span\", {\n        class: \"mapping-label\"\n      }, \"Scatter Plot Style\", -1))]), _createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"div\", _hoisted_38, [_cache[36] || (_cache[36] = _createElementVNode(\"label\", {\n        class: \"option-label\"\n      }, \"Point Size\", -1)), _createElementVNode(\"div\", _hoisted_39, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"range\",\n        min: \"2\",\n        max: \"20\",\n        \"onUpdate:modelValue\": _cache[20] || (_cache[20] = $event => scatterConfig.pointSize = $event),\n        onChange: updateScatterConfig\n      }, null, 544), [[_vModelText, scatterConfig.pointSize]]), _createElementVNode(\"span\", _hoisted_40, _toDisplayString(scatterConfig.pointSize) + \"px\", 1)])]), _createElementVNode(\"div\", _hoisted_41, [_cache[38] || (_cache[38] = _createElementVNode(\"label\", {\n        class: \"option-label\"\n      }, \"Point Shape\", -1)), _withDirectives(_createElementVNode(\"select\", {\n        class: \"option-select\",\n        \"onUpdate:modelValue\": _cache[21] || (_cache[21] = $event => scatterConfig.pointShape = $event),\n        onChange: updateScatterConfig\n      }, _cache[37] || (_cache[37] = [_createElementVNode(\"option\", {\n        value: \"circle\"\n      }, \"Circle\", -1), _createElementVNode(\"option\", {\n        value: \"square\"\n      }, \"Square\", -1), _createElementVNode(\"option\", {\n        value: \"diamond\"\n      }, \"Diamond\", -1), _createElementVNode(\"option\", {\n        value: \"triangle\"\n      }, \"Triangle\", -1)]), 544), [[_vModelSelect, scatterConfig.pointShape]])]), _createElementVNode(\"div\", _hoisted_42, [_cache[39] || (_cache[39] = _createElementVNode(\"label\", {\n        class: \"option-label\"\n      }, \"Opacity\", -1)), _createElementVNode(\"div\", _hoisted_43, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"range\",\n        min: \"0.1\",\n        max: \"1\",\n        step: \"0.1\",\n        \"onUpdate:modelValue\": _cache[22] || (_cache[22] = $event => scatterConfig.opacity = $event),\n        onChange: updateScatterConfig\n      }, null, 544), [[_vModelText, scatterConfig.opacity]]), _createElementVNode(\"span\", _hoisted_44, _toDisplayString(Math.round(scatterConfig.opacity * 100)) + \"%\", 1)])]), _createElementVNode(\"div\", _hoisted_45, [_cache[41] || (_cache[41] = _createElementVNode(\"label\", {\n        class: \"option-label\"\n      }, \"Show Regression Line\", -1)), _createElementVNode(\"div\", _hoisted_46, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"checkbox\",\n        id: \"show-regression\",\n        \"onUpdate:modelValue\": _cache[23] || (_cache[23] = $event => scatterConfig.showRegression = $event),\n        onChange: updateScatterConfig\n      }, null, 544), [[_vModelCheckbox, scatterConfig.showRegression]]), _cache[40] || (_cache[40] = _createElementVNode(\"label\", {\n        for: \"show-regression\"\n      }, \"Display Trend Line\", -1))])]), _createElementVNode(\"div\", _hoisted_47, [_cache[43] || (_cache[43] = _createElementVNode(\"label\", {\n        class: \"option-label\"\n      }, \"Show Grid\", -1)), _createElementVNode(\"div\", _hoisted_48, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"checkbox\",\n        id: \"show-grid\",\n        \"onUpdate:modelValue\": _cache[24] || (_cache[24] = $event => scatterConfig.showGrid = $event),\n        onChange: updateScatterConfig\n      }, null, 544), [[_vModelCheckbox, scatterConfig.showGrid]]), _cache[42] || (_cache[42] = _createElementVNode(\"label\", {\n        for: \"show-grid\"\n      }, \"Show Grid Lines\", -1))])])])])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","watch","getThemeIcon","props","__props","emit","__emit","mappings","xAxis","yAxis","size","color","dragStates","scatterConfig","pointSize","pointShape","opacity","showRegression","showGrid","canDropToXAxis","column","includes","type","canDropToYAxis","canDropToSize","canDropToColor","handleDragOver","area","handleDragLeave","handleDrop","event","preventDefault","columnData","JSON","parse","dataTransfer","getData","canDrop","mappingData","removeMapping","updateScatterConfig","configData","draggedColumn","newColumn","deep"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/chart-mappings/ChartMappingScatter.vue"],"sourcesContent":["<template>\n  <div class=\"chart-mapping-scatter\">\n    <!-- X轴 -->\n    <div class=\"mapping-area\">\n      <div class=\"mapping-header\">\n        <span class=\"mapping-icon\" v-html=\"getThemeIcon('x-axis')\"></span>\n        <span class=\"mapping-label\">X-Axis</span>\n        <span class=\"mapping-required\">*</span>\n      </div>\n      \n      <div \n        class=\"drop-zone\" \n        :class=\"{ \n          'has-field': mappings.xAxis,\n          'drag-over': dragStates.xAxis,\n          'invalid-drop': dragStates.xAxis && !canDropToXAxis(draggedColumn)\n        }\"\n        @drop=\"handleDrop($event, 'xAxis')\"\n        @dragover.prevent=\"handleDragOver('xAxis')\"\n        @dragleave=\"handleDragLeave('xAxis')\"\n        @dragenter.prevent\n      >\n        <div v-if=\"mappings.xAxis\" class=\"mapped-field\">\n          <span class=\"field-name\">{{ mappings.xAxis.name }}</span>\n          <span class=\"field-type\">{{ mappings.xAxis.type }}</span>\n          <button class=\"remove-field\" @click=\"removeMapping('xAxis')\">\n            <span v-html=\"getThemeIcon('x')\"></span>\n          </button>\n        </div>\n        <div v-else class=\"empty-drop-zone\">\n          <span>Drop numerical column for X-axis</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Y轴 -->\n    <div class=\"mapping-area\">\n      <div class=\"mapping-header\">\n        <span class=\"mapping-icon\" v-html=\"getThemeIcon('y-axis')\"></span>\n        <span class=\"mapping-label\">Y-Axis</span>\n        <span class=\"mapping-required\">*</span>\n      </div>\n      \n      <div \n        class=\"drop-zone\" \n        :class=\"{ \n          'has-field': mappings.yAxis,\n          'drag-over': dragStates.yAxis,\n          'invalid-drop': dragStates.yAxis && !canDropToYAxis(draggedColumn)\n        }\"\n        @drop=\"handleDrop($event, 'yAxis')\"\n        @dragover.prevent=\"handleDragOver('yAxis')\"\n        @dragleave=\"handleDragLeave('yAxis')\"\n        @dragenter.prevent\n      >\n        <div v-if=\"mappings.yAxis\" class=\"mapped-field\">\n          <span class=\"field-name\">{{ mappings.yAxis.name }}</span>\n          <span class=\"field-type\">{{ mappings.yAxis.type }}</span>\n          <button class=\"remove-field\" @click=\"removeMapping('yAxis')\">\n            <span v-html=\"getThemeIcon('x')\"></span>\n          </button>\n        </div>\n        <div v-else class=\"empty-drop-zone\">\n          <span>Drop numerical column for Y-axis</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 尺寸（可选） -->\n    <div class=\"mapping-area\">\n      <div class=\"mapping-header\">\n        <span class=\"mapping-icon\" v-html=\"getThemeIcon('circle')\"></span>\n        <span class=\"mapping-label\">Size (Optional)</span>\n      </div>\n      \n      <div \n        class=\"drop-zone optional\" \n        :class=\"{ \n          'has-field': mappings.size,\n          'drag-over': dragStates.size,\n          'invalid-drop': dragStates.size && !canDropToSize(draggedColumn)\n        }\"\n        @drop=\"handleDrop($event, 'size')\"\n        @dragover.prevent=\"handleDragOver('size')\"\n        @dragleave=\"handleDragLeave('size')\"\n        @dragenter.prevent\n      >\n        <div v-if=\"mappings.size\" class=\"mapped-field\">\n          <span class=\"field-name\">{{ mappings.size.name }}</span>\n          <span class=\"field-type\">{{ mappings.size.type }}</span>\n          <button class=\"remove-field\" @click=\"removeMapping('size')\">\n            <span v-html=\"getThemeIcon('x')\"></span>\n          </button>\n        </div>\n        <div v-else class=\"empty-drop-zone\">\n          <span>Drop numerical column for point size</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 颜色分组（可选） -->\n    <div class=\"mapping-area\">\n      <div class=\"mapping-header\">\n        <span class=\"mapping-icon\" v-html=\"getThemeIcon('group')\"></span>\n        <span class=\"mapping-label\">Color (Optional)</span>\n      </div>\n      \n      <div \n        class=\"drop-zone optional\" \n        :class=\"{ \n          'has-field': mappings.color,\n          'drag-over': dragStates.color,\n          'invalid-drop': dragStates.color && !canDropToColor(draggedColumn)\n        }\"\n        @drop=\"handleDrop($event, 'color')\"\n        @dragover.prevent=\"handleDragOver('color')\"\n        @dragleave=\"handleDragLeave('color')\"\n        @dragenter.prevent\n      >\n        <div v-if=\"mappings.color\" class=\"mapped-field\">\n          <span class=\"field-name\">{{ mappings.color.name }}</span>\n          <span class=\"field-type\">{{ mappings.color.type }}</span>\n          <button class=\"remove-field\" @click=\"removeMapping('color')\">\n            <span v-html=\"getThemeIcon('x')\"></span>\n          </button>\n        </div>\n        <div v-else class=\"empty-drop-zone\">\n          <span>Drop categorical column for color grouping</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 散点图样式配置 -->\n    <div class=\"mapping-area\">\n      <div class=\"mapping-header\">\n        <span class=\"mapping-icon\" v-html=\"getThemeIcon('settings')\"></span>\n        <span class=\"mapping-label\">Scatter Plot Style</span>\n      </div>\n      \n      <div class=\"scatter-style-options\">\n        <div class=\"style-option\">\n          <label class=\"option-label\">Point Size</label>\n          <div class=\"slider-option\">\n            <input \n              type=\"range\" \n              min=\"2\" \n              max=\"20\" \n              v-model=\"scatterConfig.pointSize\" \n              @change=\"updateScatterConfig\"\n            >\n            <span class=\"slider-value\">{{ scatterConfig.pointSize }}px</span>\n          </div>\n        </div>\n        \n        <div class=\"style-option\">\n          <label class=\"option-label\">Point Shape</label>\n          <select class=\"option-select\" v-model=\"scatterConfig.pointShape\" @change=\"updateScatterConfig\">\n            <option value=\"circle\">Circle</option>\n            <option value=\"square\">Square</option>\n            <option value=\"diamond\">Diamond</option>\n            <option value=\"triangle\">Triangle</option>\n          </select>\n        </div>\n        \n        <div class=\"style-option\">\n          <label class=\"option-label\">Opacity</label>\n          <div class=\"slider-option\">\n            <input \n              type=\"range\" \n              min=\"0.1\" \n              max=\"1\" \n              step=\"0.1\"\n              v-model=\"scatterConfig.opacity\" \n              @change=\"updateScatterConfig\"\n            >\n            <span class=\"slider-value\">{{ Math.round(scatterConfig.opacity * 100) }}%</span>\n          </div>\n        </div>\n        \n        <div class=\"style-option\">\n          <label class=\"option-label\">Show Regression Line</label>\n          <div class=\"checkbox-option\">\n            <input \n              type=\"checkbox\" \n              id=\"show-regression\"\n              v-model=\"scatterConfig.showRegression\" \n              @change=\"updateScatterConfig\"\n            >\n            <label for=\"show-regression\">Display Trend Line</label>\n          </div>\n        </div>\n        \n        <div class=\"style-option\">\n          <label class=\"option-label\">Show Grid</label>\n          <div class=\"checkbox-option\">\n            <input \n              type=\"checkbox\" \n              id=\"show-grid\"\n              v-model=\"scatterConfig.showGrid\" \n              @change=\"updateScatterConfig\"\n            >\n            <label for=\"show-grid\">Show Grid Lines</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, reactive, computed, watch } from 'vue'\nimport { getThemeIcon } from '@/assets/JS/icons.js'\n\n// Props\nconst props = defineProps({\n  chartType: {\n    type: String,\n    required: true\n  },\n  draggedColumn: {\n    type: Object,\n    default: null\n  }\n})\n\n// Emits\nconst emit = defineEmits(['field-mapped', 'field-removed'])\n\n// 映射状态\nconst mappings = reactive({\n  xAxis: null,\n  yAxis: null,\n  size: null,\n  color: null\n})\n\n// 拖拽状态\nconst dragStates = reactive({\n  xAxis: false,\n  yAxis: false,\n  size: false,\n  color: false\n})\n\n// 散点图配置\nconst scatterConfig = reactive({\n  pointSize: 6,\n  pointShape: 'circle',\n  opacity: 0.8,\n  showRegression: false,\n  showGrid: true\n})\n\n// 检查是否可以放置到X轴\nfunction canDropToXAxis(column) {\n  if (!column) return false\n  return ['number', 'integer'].includes(column.type)\n}\n\n// 检查是否可以放置到Y轴\nfunction canDropToYAxis(column) {\n  if (!column) return false\n  return ['number', 'integer'].includes(column.type)\n}\n\n// 检查是否可以放置到尺寸\nfunction canDropToSize(column) {\n  if (!column) return false\n  return ['number', 'integer'].includes(column.type)\n}\n\n// 检查是否可以放置到颜色\nfunction canDropToColor(column) {\n  if (!column) return false\n  return ['string', 'category', 'number', 'integer'].includes(column.type)\n}\n\n// 处理拖拽悬停\nfunction handleDragOver(area) {\n  dragStates[area] = true\n}\n\n// 处理拖拽离开\nfunction handleDragLeave(area) {\n  dragStates[area] = false\n}\n\n// 处理拖放\nfunction handleDrop(event, area) {\n  event.preventDefault()\n  dragStates[area] = false\n  \n  const columnData = JSON.parse(event.dataTransfer.getData('text/plain'))\n  \n  // 验证是否可以放置\n  let canDrop = false\n  switch (area) {\n    case 'xAxis':\n      canDrop = canDropToXAxis(columnData)\n      break\n    case 'yAxis':\n      canDrop = canDropToYAxis(columnData)\n      break\n    case 'size':\n      canDrop = canDropToSize(columnData)\n      break\n    case 'color':\n      canDrop = canDropToColor(columnData)\n      break\n  }\n  \n  if (!canDrop) {\n    return\n  }\n  \n  // 设置映射\n  mappings[area] = columnData\n  \n  // 发送映射事件\n  const mappingData = { [area]: columnData }\n  emit('field-mapped', mappingData)\n}\n\n// 移除映射\nfunction removeMapping(area) {\n  mappings[area] = null\n  emit('field-removed', area)\n}\n\n// 更新散点图配置\nfunction updateScatterConfig() {\n  const configData = { scatterConfig: scatterConfig }\n  emit('field-mapped', configData)\n}\n\n// 监听拖拽的列变化\nwatch(() => props.draggedColumn, (newColumn) => {\n  // 可以在这里添加拖拽预览逻辑\n}, { deep: true })\n\n// 初始化散点图配置\nupdateScatterConfig()\n</script>\n\n<style scoped>\n.chart-mapping-scatter {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.mapping-area {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.mapping-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.mapping-icon {\n  display: flex;\n  align-items: center;\n  width: 16px;\n  height: 16px;\n}\n\n.mapping-icon svg {\n  width: 14px;\n  height: 14px;\n}\n\n.mapping-label {\n  flex: 1;\n}\n\n.mapping-required {\n  color: #ef4444;\n  font-weight: 600;\n}\n\n.drop-zone {\n  min-height: 48px;\n  border: 2px dashed rgba(0, 0, 0, 0.2);\n  border-radius: 8px;\n  padding: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n\n.drop-zone.optional {\n  border-color: rgba(0, 0, 0, 0.1);\n}\n\n.drop-zone.drag-over {\n  border-color: #3b82f6;\n  background: rgba(59, 130, 246, 0.05);\n}\n\n.drop-zone.invalid-drop {\n  border-color: #ef4444;\n  background: rgba(239, 68, 68, 0.05);\n}\n\n.drop-zone.has-field {\n  border-color: #22c55e;\n  background: rgba(34, 197, 94, 0.05);\n}\n\n[data-theme=\"dark\"] .drop-zone {\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .drop-zone.optional {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .drop-zone.drag-over {\n  background: rgba(59, 130, 246, 0.1);\n}\n\n[data-theme=\"dark\"] .drop-zone.invalid-drop {\n  background: rgba(239, 68, 68, 0.1);\n}\n\n[data-theme=\"dark\"] .drop-zone.has-field {\n  background: rgba(34, 197, 94, 0.1);\n}\n\n.mapped-field {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  width: 100%;\n}\n\n.field-name {\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.field-type {\n  font-size: 11px;\n  color: var(--text-secondary);\n  background: rgba(0, 0, 0, 0.1);\n  padding: 2px 6px;\n  border-radius: 4px;\n}\n\n[data-theme=\"dark\"] .field-type {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.remove-field {\n  margin-left: auto;\n  padding: 4px;\n  background: rgba(239, 68, 68, 0.1);\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  color: #ef4444;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s ease;\n}\n\n.remove-field:hover {\n  background: rgba(239, 68, 68, 0.2);\n}\n\n.remove-field svg {\n  width: 12px;\n  height: 12px;\n}\n\n.empty-drop-zone {\n  color: var(--text-secondary);\n  font-size: 13px;\n  text-align: center;\n}\n\n/* 散点图样式配置 */\n.scatter-style-options {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  background: rgba(0, 0, 0, 0.02);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  border-radius: 6px;\n  padding: 12px;\n}\n\n[data-theme=\"dark\"] .scatter-style-options {\n  background: rgba(255, 255, 255, 0.02);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.style-option {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.option-label {\n  font-size: 12px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.option-select {\n  padding: 6px 8px;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 4px;\n  background: var(--bg-color);\n  color: var(--text-color);\n  font-size: 12px;\n}\n\n.option-select:focus {\n  outline: none;\n  border-color: #3b82f6;\n}\n\n[data-theme=\"dark\"] .option-select {\n  border: 1px solid rgba(255, 255, 255, 0.15);\n}\n\n.checkbox-option {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.checkbox-option input[type=\"checkbox\"] {\n  width: 14px;\n  height: 14px;\n  accent-color: #3b82f6;\n}\n\n.checkbox-option label {\n  font-size: 12px;\n  color: var(--text-color);\n  cursor: pointer;\n}\n\n.slider-option {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.slider-option input[type=\"range\"] {\n  flex: 1;\n  height: 6px;\n  border-radius: 3px;\n  background: rgba(0, 0, 0, 0.1);\n  outline: none;\n  appearance: none;\n}\n\n.slider-option input[type=\"range\"]::-webkit-slider-thumb {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: #3b82f6;\n  cursor: pointer;\n  appearance: none;\n}\n\n.slider-option input[type=\"range\"]::-moz-range-thumb {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: #3b82f6;\n  cursor: pointer;\n  border: none;\n}\n\n[data-theme=\"dark\"] .slider-option input[type=\"range\"] {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.slider-value {\n  font-size: 12px;\n  color: var(--text-secondary);\n  min-width: 40px;\n  text-align: right;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}