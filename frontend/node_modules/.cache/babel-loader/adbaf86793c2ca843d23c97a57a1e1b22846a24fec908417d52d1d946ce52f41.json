{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\n// 引入主题分发器\nimport { getVisualMapInRangeColor } from '../utils/';\n\n// 旭日图生成器\nexport default function sunburstOption(config, fileDataMap, xData, yDataArr, selectedChartType, seriesData, customOption = {}) {\n  // 获取视觉编码色\n  let visualColors = getVisualMapInRangeColor(config.colorScheme);\n  // 递归获取所有节点 value\n  function getValueRange(data) {\n    let values = [];\n    function traverse(nodes) {\n      if (!nodes) return;\n      for (let i = 0; i < nodes.length; i++) {\n        if (typeof nodes[i].value === 'number') {\n          values.push(nodes[i].value);\n        }\n        if (nodes[i].children && nodes[i].children.length > 0) {\n          traverse(nodes[i].children);\n        }\n      }\n    }\n    traverse(data);\n    return {\n      min: values.length ? Math.min(...values) : 1,\n      max: values.length ? Math.max(...values) : 100\n    };\n  }\n\n  // 自动计算最大层级\n  function getMaxDepth(data, depth) {\n    depth = depth || 1;\n    if (!Array.isArray(data)) return depth;\n    let max = depth;\n    for (var i = 0; i < data.length; i++) {\n      var node = data[i];\n      if (node.children && node.children.length > 0) {\n        max = Math.max(max, getMaxDepth(node.children, depth + 1));\n      }\n    }\n    return max;\n  }\n  var maxDepth = getMaxDepth(seriesData);\n  // 缩小最外层半径\n  var outerRadius = config.outerRadius || '80%';\n  // 均匀分配每层 r0/r\n  var levels = [];\n  for (var i = 0; i < maxDepth; i++) {\n    var r0 = i === 0 ? '0%' : Math.round(i / maxDepth * 80) + '%';\n    var r = Math.round((i + 1) / maxDepth * 80) + '%';\n    var label = {};\n    var itemStyle = {};\n    if (i === 0) {\n      label = {\n        show: false\n      };\n    } else if (i === maxDepth - 1) {\n      label = {\n        position: 'outside',\n        padding: 3,\n        silent: false,\n        rotate: 'radial'\n      };\n      itemStyle = {\n        borderWidth: 3\n      };\n    } else if (i === 1) {\n      label = {\n        rotate: 'radial',\n        minAngle: 6\n      };\n      itemStyle = {\n        borderWidth: 2\n      };\n    } else {\n      label = {\n        align: 'right'\n      };\n    }\n    levels.push({\n      r0: r0,\n      r: r,\n      label: label,\n      itemStyle: itemStyle\n    });\n  }\n  let orient = 'horizontal';\n  if (config.position === 'left' || config.position === 'right') {\n    orient = 'vertical';\n  } else {\n    orient = 'horizontal';\n  }\n  let visualMap = {};\n  const valueRange = getValueRange(seriesData);\n  if (config.legendVisible === true) {\n    visualMap = config.visualMap || {\n      show: true,\n      type: 'continuous',\n      inRange: {\n        color: visualColors\n      },\n      min: valueRange.min,\n      max: valueRange.max,\n      dimension: 'value',\n      orient,\n      left: 'center',\n      top: config.legendPosition || 'bottom'\n    };\n  } else {\n    visualMap = {\n      show: false,\n      type: 'continuous',\n      min: valueRange.min,\n      max: valueRange.max,\n      dimension: 'value',\n      orient,\n      left: 'center',\n      top: config.legendPosition || 'bottom'\n    };\n  }\n  const baseOption = {\n    title: {\n      text: config.title || 'Chart of Sunburst',\n      subtext: config.subtext || '',\n      textStyle: {\n        fontSize: 16\n      },\n      left: 'center',\n      top: 'top'\n    },\n    tooltip: {\n      trigger: 'item',\n      formatter: info => `${info.name} : ${info.value}`\n    },\n    toolbox: {\n      show: true,\n      feature: {\n        dataView: {\n          show: true,\n          readOnly: false\n        },\n        restore: {\n          show: true\n        },\n        saveAsImage: {\n          show: true\n        }\n      }\n    },\n    series: [{\n      type: 'sunburst',\n      data: seriesData,\n      radius: [0, outerRadius],\n      // 修改为 0 到 80%\n      sort: config.sort || 'undefined',\n      emphasis: {\n        focus: 'ancestor'\n      },\n      label: {\n        show: function (params) {\n          const rect = params.rect || params.labelRect;\n          if (rect && rect.width * rect.height < 400) {\n            return false;\n          }\n          return true;\n        },\n        fontSize: 12,\n        minAngle: config.minAngle || 5\n      },\n      levels,\n      ...customOption\n    }]\n  };\n  if (config.legendVisible === true) {\n    baseOption.visualMap = visualMap;\n  }\n  return baseOption;\n}","map":{"version":3,"names":["getVisualMapInRangeColor","sunburstOption","config","fileDataMap","xData","yDataArr","selectedChartType","seriesData","customOption","visualColors","colorScheme","getValueRange","data","values","traverse","nodes","i","length","value","push","children","min","Math","max","getMaxDepth","depth","Array","isArray","node","maxDepth","outerRadius","levels","r0","round","r","label","itemStyle","show","position","padding","silent","rotate","borderWidth","minAngle","align","orient","visualMap","valueRange","legendVisible","type","inRange","color","dimension","left","top","legendPosition","baseOption","title","text","subtext","textStyle","fontSize","tooltip","trigger","formatter","info","name","toolbox","feature","dataView","readOnly","restore","saveAsImage","series","radius","sort","emphasis","focus","params","rect","labelRect","width","height"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/assets/JS/chartOptions/sunburst.js"],"sourcesContent":["/* eslint-disable */\n\n// 引入主题分发器\nimport { getVisualMapInRangeColor } from '../utils/';\n\n// 旭日图生成器\nexport default function sunburstOption(config, fileDataMap, xData, yDataArr, selectedChartType, seriesData, customOption = {}) {\n    // 获取视觉编码色\n    let visualColors = getVisualMapInRangeColor(config.colorScheme);\n    // 递归获取所有节点 value\n    function getValueRange(data) {\n        let values = [];\n        function traverse(nodes) {\n            if (!nodes) return;\n            for (let i = 0; i < nodes.length; i++) {\n                if (typeof nodes[i].value === 'number') {\n                    values.push(nodes[i].value);\n                }\n                if (nodes[i].children && nodes[i].children.length > 0) {\n                    traverse(nodes[i].children);\n                }\n            }\n        }\n        traverse(data);\n        return {\n            min: values.length ? Math.min(...values) : 1,\n            max: values.length ? Math.max(...values) : 100\n        };\n    }\n\n    // 自动计算最大层级\n    function getMaxDepth(data, depth) {\n        depth = depth || 1;\n        if (!Array.isArray(data)) return depth;\n        let max = depth;\n        for (var i = 0; i < data.length; i++) {\n            var node = data[i];\n            if (node.children && node.children.length > 0) {\n                max = Math.max(max, getMaxDepth(node.children, depth + 1));\n            }\n        }\n        return max;\n    }\n\n    var maxDepth = getMaxDepth(seriesData);\n    // 缩小最外层半径\n    var outerRadius = config.outerRadius || '80%';\n    // 均匀分配每层 r0/r\n    var levels = [];\n    for (var i = 0; i < maxDepth; i++) {\n        var r0 = (i === 0) ? '0%' : Math.round((i / maxDepth) * 80) + '%';\n        var r = Math.round(((i + 1) / maxDepth) * 80) + '%';\n        var label = {};\n        var itemStyle = {};\n        if (i === 0) {\n            label = { show: false };\n        } else if (i === maxDepth - 1) {\n            label = { position: 'outside', padding: 3, silent: false, rotate: 'radial' };\n            itemStyle = { borderWidth: 3 };\n        } else if (i === 1) {\n            label = { rotate: 'radial', minAngle: 6 };\n            itemStyle = { borderWidth: 2 };\n        } else {\n            label = { align: 'right' };\n        }\n        levels.push({ r0: r0, r: r, label: label, itemStyle: itemStyle });\n    }\n\n    let orient = 'horizontal';\n\n    if (config.position === 'left' || config.position === 'right') {\n        orient = 'vertical';\n    }\n    else {\n        orient = 'horizontal';\n    }\n\n    let visualMap = {};\n    const valueRange = getValueRange(seriesData);\n    if (config.legendVisible === true) {\n        visualMap = config.visualMap || {\n            show: true,\n            type: 'continuous',\n            inRange: {\n                color: visualColors\n            },\n            min: valueRange.min,\n            max: valueRange.max,\n            dimension: 'value',\n            orient,\n            left: 'center',\n            top: config.legendPosition || 'bottom',\n        };\n    }\n    else {\n        visualMap = {\n            show: false,\n            type: 'continuous',\n            min: valueRange.min,\n            max: valueRange.max,\n            dimension: 'value',\n            orient,\n            left: 'center',\n            top: config.legendPosition || 'bottom',\n        };\n    }\n\n    const baseOption = {\n        title: {\n            text: config.title || 'Chart of Sunburst',\n            subtext: config.subtext || '',\n            textStyle: {\n                fontSize: 16,\n            },\n            left: 'center',\n            top: 'top',\n        },\n        tooltip: {\n            trigger: 'item',\n            formatter: info => `${info.name} : ${info.value}`\n        },\n        toolbox: {\n            show: true,\n            feature: {\n                dataView: { show: true, readOnly: false },\n                restore: { show: true },\n                saveAsImage: { show: true },\n            }\n        },\n        series: [\n            {\n                type: 'sunburst',\n                data: seriesData,\n                radius: [0, outerRadius], // 修改为 0 到 80%\n                sort: config.sort || 'undefined',\n                emphasis: {\n                    focus: 'ancestor'\n                },\n                label: {\n                    show: function (params) {\n                        const rect = params.rect || params.labelRect;\n                        if (rect && rect.width * rect.height < 400) {\n                            return false;\n                        }\n                        return true;\n                    },\n                    fontSize: 12,\n                    minAngle: config.minAngle || 5,\n                },\n                levels,\n                ...customOption\n            }\n        ]\n    };\n    if (config.legendVisible === true) {\n        baseOption.visualMap = visualMap;\n    }\n    return baseOption;\n}"],"mappings":";AAAA;;AAEA;AACA,SAASA,wBAAwB,QAAQ,WAAW;;AAEpD;AACA,eAAe,SAASC,cAAcA,CAACC,MAAM,EAAEC,WAAW,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,iBAAiB,EAAEC,UAAU,EAAEC,YAAY,GAAG,CAAC,CAAC,EAAE;EAC3H;EACA,IAAIC,YAAY,GAAGT,wBAAwB,CAACE,MAAM,CAACQ,WAAW,CAAC;EAC/D;EACA,SAASC,aAAaA,CAACC,IAAI,EAAE;IACzB,IAAIC,MAAM,GAAG,EAAE;IACf,SAASC,QAAQA,CAACC,KAAK,EAAE;MACrB,IAAI,CAACA,KAAK,EAAE;MACZ,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;QACnC,IAAI,OAAOD,KAAK,CAACC,CAAC,CAAC,CAACE,KAAK,KAAK,QAAQ,EAAE;UACpCL,MAAM,CAACM,IAAI,CAACJ,KAAK,CAACC,CAAC,CAAC,CAACE,KAAK,CAAC;QAC/B;QACA,IAAIH,KAAK,CAACC,CAAC,CAAC,CAACI,QAAQ,IAAIL,KAAK,CAACC,CAAC,CAAC,CAACI,QAAQ,CAACH,MAAM,GAAG,CAAC,EAAE;UACnDH,QAAQ,CAACC,KAAK,CAACC,CAAC,CAAC,CAACI,QAAQ,CAAC;QAC/B;MACJ;IACJ;IACAN,QAAQ,CAACF,IAAI,CAAC;IACd,OAAO;MACHS,GAAG,EAAER,MAAM,CAACI,MAAM,GAAGK,IAAI,CAACD,GAAG,CAAC,GAAGR,MAAM,CAAC,GAAG,CAAC;MAC5CU,GAAG,EAAEV,MAAM,CAACI,MAAM,GAAGK,IAAI,CAACC,GAAG,CAAC,GAAGV,MAAM,CAAC,GAAG;IAC/C,CAAC;EACL;;EAEA;EACA,SAASW,WAAWA,CAACZ,IAAI,EAAEa,KAAK,EAAE;IAC9BA,KAAK,GAAGA,KAAK,IAAI,CAAC;IAClB,IAAI,CAACC,KAAK,CAACC,OAAO,CAACf,IAAI,CAAC,EAAE,OAAOa,KAAK;IACtC,IAAIF,GAAG,GAAGE,KAAK;IACf,KAAK,IAAIT,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,IAAI,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;MAClC,IAAIY,IAAI,GAAGhB,IAAI,CAACI,CAAC,CAAC;MAClB,IAAIY,IAAI,CAACR,QAAQ,IAAIQ,IAAI,CAACR,QAAQ,CAACH,MAAM,GAAG,CAAC,EAAE;QAC3CM,GAAG,GAAGD,IAAI,CAACC,GAAG,CAACA,GAAG,EAAEC,WAAW,CAACI,IAAI,CAACR,QAAQ,EAAEK,KAAK,GAAG,CAAC,CAAC,CAAC;MAC9D;IACJ;IACA,OAAOF,GAAG;EACd;EAEA,IAAIM,QAAQ,GAAGL,WAAW,CAACjB,UAAU,CAAC;EACtC;EACA,IAAIuB,WAAW,GAAG5B,MAAM,CAAC4B,WAAW,IAAI,KAAK;EAC7C;EACA,IAAIC,MAAM,GAAG,EAAE;EACf,KAAK,IAAIf,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGa,QAAQ,EAAEb,CAAC,EAAE,EAAE;IAC/B,IAAIgB,EAAE,GAAIhB,CAAC,KAAK,CAAC,GAAI,IAAI,GAAGM,IAAI,CAACW,KAAK,CAAEjB,CAAC,GAAGa,QAAQ,GAAI,EAAE,CAAC,GAAG,GAAG;IACjE,IAAIK,CAAC,GAAGZ,IAAI,CAACW,KAAK,CAAE,CAACjB,CAAC,GAAG,CAAC,IAAIa,QAAQ,GAAI,EAAE,CAAC,GAAG,GAAG;IACnD,IAAIM,KAAK,GAAG,CAAC,CAAC;IACd,IAAIC,SAAS,GAAG,CAAC,CAAC;IAClB,IAAIpB,CAAC,KAAK,CAAC,EAAE;MACTmB,KAAK,GAAG;QAAEE,IAAI,EAAE;MAAM,CAAC;IAC3B,CAAC,MAAM,IAAIrB,CAAC,KAAKa,QAAQ,GAAG,CAAC,EAAE;MAC3BM,KAAK,GAAG;QAAEG,QAAQ,EAAE,SAAS;QAAEC,OAAO,EAAE,CAAC;QAAEC,MAAM,EAAE,KAAK;QAAEC,MAAM,EAAE;MAAS,CAAC;MAC5EL,SAAS,GAAG;QAAEM,WAAW,EAAE;MAAE,CAAC;IAClC,CAAC,MAAM,IAAI1B,CAAC,KAAK,CAAC,EAAE;MAChBmB,KAAK,GAAG;QAAEM,MAAM,EAAE,QAAQ;QAAEE,QAAQ,EAAE;MAAE,CAAC;MACzCP,SAAS,GAAG;QAAEM,WAAW,EAAE;MAAE,CAAC;IAClC,CAAC,MAAM;MACHP,KAAK,GAAG;QAAES,KAAK,EAAE;MAAQ,CAAC;IAC9B;IACAb,MAAM,CAACZ,IAAI,CAAC;MAAEa,EAAE,EAAEA,EAAE;MAAEE,CAAC,EAAEA,CAAC;MAAEC,KAAK,EAAEA,KAAK;MAAEC,SAAS,EAAEA;IAAU,CAAC,CAAC;EACrE;EAEA,IAAIS,MAAM,GAAG,YAAY;EAEzB,IAAI3C,MAAM,CAACoC,QAAQ,KAAK,MAAM,IAAIpC,MAAM,CAACoC,QAAQ,KAAK,OAAO,EAAE;IAC3DO,MAAM,GAAG,UAAU;EACvB,CAAC,MACI;IACDA,MAAM,GAAG,YAAY;EACzB;EAEA,IAAIC,SAAS,GAAG,CAAC,CAAC;EAClB,MAAMC,UAAU,GAAGpC,aAAa,CAACJ,UAAU,CAAC;EAC5C,IAAIL,MAAM,CAAC8C,aAAa,KAAK,IAAI,EAAE;IAC/BF,SAAS,GAAG5C,MAAM,CAAC4C,SAAS,IAAI;MAC5BT,IAAI,EAAE,IAAI;MACVY,IAAI,EAAE,YAAY;MAClBC,OAAO,EAAE;QACLC,KAAK,EAAE1C;MACX,CAAC;MACDY,GAAG,EAAE0B,UAAU,CAAC1B,GAAG;MACnBE,GAAG,EAAEwB,UAAU,CAACxB,GAAG;MACnB6B,SAAS,EAAE,OAAO;MAClBP,MAAM;MACNQ,IAAI,EAAE,QAAQ;MACdC,GAAG,EAAEpD,MAAM,CAACqD,cAAc,IAAI;IAClC,CAAC;EACL,CAAC,MACI;IACDT,SAAS,GAAG;MACRT,IAAI,EAAE,KAAK;MACXY,IAAI,EAAE,YAAY;MAClB5B,GAAG,EAAE0B,UAAU,CAAC1B,GAAG;MACnBE,GAAG,EAAEwB,UAAU,CAACxB,GAAG;MACnB6B,SAAS,EAAE,OAAO;MAClBP,MAAM;MACNQ,IAAI,EAAE,QAAQ;MACdC,GAAG,EAAEpD,MAAM,CAACqD,cAAc,IAAI;IAClC,CAAC;EACL;EAEA,MAAMC,UAAU,GAAG;IACfC,KAAK,EAAE;MACHC,IAAI,EAAExD,MAAM,CAACuD,KAAK,IAAI,mBAAmB;MACzCE,OAAO,EAAEzD,MAAM,CAACyD,OAAO,IAAI,EAAE;MAC7BC,SAAS,EAAE;QACPC,QAAQ,EAAE;MACd,CAAC;MACDR,IAAI,EAAE,QAAQ;MACdC,GAAG,EAAE;IACT,CAAC;IACDQ,OAAO,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,SAAS,EAAEC,IAAI,IAAI,GAAGA,IAAI,CAACC,IAAI,MAAMD,IAAI,CAAC/C,KAAK;IACnD,CAAC;IACDiD,OAAO,EAAE;MACL9B,IAAI,EAAE,IAAI;MACV+B,OAAO,EAAE;QACLC,QAAQ,EAAE;UAAEhC,IAAI,EAAE,IAAI;UAAEiC,QAAQ,EAAE;QAAM,CAAC;QACzCC,OAAO,EAAE;UAAElC,IAAI,EAAE;QAAK,CAAC;QACvBmC,WAAW,EAAE;UAAEnC,IAAI,EAAE;QAAK;MAC9B;IACJ,CAAC;IACDoC,MAAM,EAAE,CACJ;MACIxB,IAAI,EAAE,UAAU;MAChBrC,IAAI,EAAEL,UAAU;MAChBmE,MAAM,EAAE,CAAC,CAAC,EAAE5C,WAAW,CAAC;MAAE;MAC1B6C,IAAI,EAAEzE,MAAM,CAACyE,IAAI,IAAI,WAAW;MAChCC,QAAQ,EAAE;QACNC,KAAK,EAAE;MACX,CAAC;MACD1C,KAAK,EAAE;QACHE,IAAI,EAAE,SAAAA,CAAUyC,MAAM,EAAE;UACpB,MAAMC,IAAI,GAAGD,MAAM,CAACC,IAAI,IAAID,MAAM,CAACE,SAAS;UAC5C,IAAID,IAAI,IAAIA,IAAI,CAACE,KAAK,GAAGF,IAAI,CAACG,MAAM,GAAG,GAAG,EAAE;YACxC,OAAO,KAAK;UAChB;UACA,OAAO,IAAI;QACf,CAAC;QACDrB,QAAQ,EAAE,EAAE;QACZlB,QAAQ,EAAEzC,MAAM,CAACyC,QAAQ,IAAI;MACjC,CAAC;MACDZ,MAAM;MACN,GAAGvB;IACP,CAAC;EAET,CAAC;EACD,IAAIN,MAAM,CAAC8C,aAAa,KAAK,IAAI,EAAE;IAC/BQ,UAAU,CAACV,SAAS,GAAGA,SAAS;EACpC;EACA,OAAOU,UAAU;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}