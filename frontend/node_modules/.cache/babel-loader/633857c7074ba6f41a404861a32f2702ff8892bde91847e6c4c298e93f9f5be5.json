{"ast":null,"code":"import { ref, computed, onMounted, onBeforeUnmount } from 'vue';\n// 动画参数\nconst min = 0.1,\n  max = 0.85;\nconst duration = 1800; // ms\nconst pause = 350; // ms\n\nexport default {\n  __name: 'PieChartIcon',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    /* eslint-disable */\n\n    const percent = ref(0.68); // 主扇区占比（0~1），可随动画变化\n    const circumference = 2 * Math.PI * 22;\n    const dashOffset = computed(() => (1 - percent.value) * circumference);\n    const dashOffsetRest = computed(() => -percent.value * circumference);\n    const arcOpacity = ref(0.92);\n    let dir = 1;\n    let animId = null;\n    let pauseTimeout = null;\n    function easeInOut(t) {\n      // 三次缓动曲线\n      return t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2;\n    }\n    let t = 0; // 0~1\n    function animatePie(ts) {\n      if (!animatePie.last) animatePie.last = ts;\n      const dt = ts - animatePie.last;\n      animatePie.last = ts;\n      t += dt / duration * dir;\n      if (t > 1) t = 1;\n      if (t < 0) t = 0;\n      // 缓动\n      const eased = easeInOut(t);\n      percent.value = min + (max - min) * eased;\n      // 渐变透明度\n      arcOpacity.value = 0.7 + 0.22 * eased;\n      if (dir === 1 && t >= 1 || dir === -1 && t <= 0) {\n        // 到边界，停顿后反向\n        pauseTimeout = setTimeout(() => {\n          dir *= -1;\n          animatePie.last = undefined;\n          animId = requestAnimationFrame(animatePie);\n        }, pause);\n        return;\n      }\n      animId = requestAnimationFrame(animatePie);\n    }\n    onMounted(() => {\n      t = 0;\n      dir = 1;\n      animId = requestAnimationFrame(animatePie);\n    });\n    onBeforeUnmount(() => {\n      if (animId) cancelAnimationFrame(animId);\n      if (pauseTimeout) clearTimeout(pauseTimeout);\n    });\n    const __returned__ = {\n      percent,\n      circumference,\n      dashOffset,\n      dashOffsetRest,\n      arcOpacity,\n      get dir() {\n        return dir;\n      },\n      set dir(v) {\n        dir = v;\n      },\n      get animId() {\n        return animId;\n      },\n      set animId(v) {\n        animId = v;\n      },\n      get pauseTimeout() {\n        return pauseTimeout;\n      },\n      set pauseTimeout(v) {\n        pauseTimeout = v;\n      },\n      easeInOut,\n      get t() {\n        return t;\n      },\n      set t(v) {\n        t = v;\n      },\n      min,\n      max,\n      duration,\n      pause,\n      animatePie,\n      ref,\n      computed,\n      onMounted,\n      onBeforeUnmount\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onBeforeUnmount","min","max","duration","pause","percent","circumference","Math","PI","dashOffset","value","dashOffsetRest","arcOpacity","dir","animId","pauseTimeout","easeInOut","t","pow","animatePie","ts","last","dt","eased","setTimeout","undefined","requestAnimationFrame","cancelAnimationFrame","clearTimeout"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/svg/PieChartIcon.vue"],"sourcesContent":["\n<template>\n<svg width=\"150\" height=\"120\" viewBox=\"0 0 120 80\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"empty-pie-svg\">\n    <g>\n        <!-- 背景圆 -->\n        <circle cx=\"60\" cy=\"40\" r=\"28\" fill=\"#A0C4FF\" opacity=\"0.18\" />\n        <!-- 饼图底色圆环 -->\n        <circle cx=\"60\" cy=\"40\" r=\"22\" fill=\"none\" stroke=\"#E0E7EF\" stroke-width=\"10\" />\n        <!-- 动态主扇区（占比动画） -->\n        <circle\n            class=\"pie-arc\"\n            cx=\"60\" cy=\"40\" r=\"22\"\n            fill=\"none\"\n            stroke=\"#4F8EF7\"\n            stroke-width=\"10\"\n            stroke-linecap=\"round\"\n            :stroke-dasharray=\"circumference\"\n            :stroke-dashoffset=\"dashOffset\"\n            :opacity=\"arcOpacity\"\n            transform=\"rotate(-90 60 40)\"\n        />\n        <!-- 剩余扇区（次色） -->\n        <circle\n            class=\"pie-arc-rest\"\n            cx=\"60\" cy=\"40\" r=\"22\"\n            fill=\"none\"\n            stroke=\"#FFB300\"\n            stroke-width=\"10\"\n            stroke-linecap=\"butt\"\n            :stroke-dasharray=\"circumference\"\n            :stroke-dashoffset=\"dashOffsetRest\"\n            transform=\"rotate(-90 60 40)\"\n        />\n    </g>\n</svg>\n</template>\n\n<script setup>\n/* eslint-disable */\n\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue'\n// 动画参数\nconst percent = ref(0.68) // 主扇区占比（0~1），可随动画变化\nconst circumference = 2 * Math.PI * 22\nconst dashOffset = computed(() => (1 - percent.value) * circumference)\nconst dashOffsetRest = computed(() => -percent.value * circumference)\nconst arcOpacity = ref(0.92)\n\nlet dir = 1\nlet animId = null\nlet pauseTimeout = null\n\nfunction easeInOut(t) {\n  // 三次缓动曲线\n  return t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2\n}\n\nlet t = 0 // 0~1\nconst min = 0.1, max = 0.85\nconst duration = 1800 // ms\nconst pause = 350 // ms\n\nfunction animatePie(ts) {\n    if (!animatePie.last) animatePie.last = ts\n    const dt = ts - animatePie.last\n    animatePie.last = ts\n    t += (dt / duration) * dir\n    if (t > 1) t = 1\n    if (t < 0) t = 0\n    // 缓动\n    const eased = easeInOut(t)\n    percent.value = min + (max - min) * eased\n    // 渐变透明度\n    arcOpacity.value = 0.7 + 0.22 * eased\n    if ((dir === 1 && t >= 1) || (dir === -1 && t <= 0)) {\n        // 到边界，停顿后反向\n        pauseTimeout = setTimeout(() => {\n        dir *= -1\n        animatePie.last = undefined\n        animId = requestAnimationFrame(animatePie)\n        }, pause)\n        return\n    }\n    animId = requestAnimationFrame(animatePie)\n}\n\nonMounted(() => {\n  t = 0\n  dir = 1\n  animId = requestAnimationFrame(animatePie)\n})\nonBeforeUnmount(() => {\n  if (animId) cancelAnimationFrame(animId)\n  if (pauseTimeout) clearTimeout(pauseTimeout)\n})\n</script>\n\n<style scoped>\n.empty-pie-svg {\n    display: block;\n    margin: 0 auto;\n    animation: floatX 5.2s ease-in-out infinite;\n}\n.pie-arc {\n    filter: drop-shadow(0 2px 6px #4f8ef72a);\n    transition: stroke-dashoffset 0.32s cubic-bezier(.4,1.6,.6,1), opacity 0.32s cubic-bezier(.4,1.6,.6,1);\n}\n.pie-arc-rest {\n    opacity: 0.7;\n    transition: stroke-dashoffset 0.32s cubic-bezier(.4,1.6,.6,1);\n}\n@keyframes floatX {\n    0% { transform: translateY(0) translateX(0); }\n    25% { transform: translateY(-8px) translateX(4px); }\n    50% { transform: translateY(-12px) translateX(-4px); }\n    75% { transform: translateY(-8px) translateX(4px); }\n    100% { transform: translateY(0) translateX(0); }\n}\n</style>\n"],"mappings":"AAwCA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,eAAe,QAAQ,KAAI;AAC9D;AAiBA,MAAMC,GAAG,GAAG,GAAG;EAAEC,GAAG,GAAG,IAAG;AAC1B,MAAMC,QAAQ,GAAG,IAAI,EAAC;AACtB,MAAMC,KAAK,GAAG,GAAG,EAAC;;;;;;;;;IAtBlB;;IAIA,MAAMC,OAAO,GAAGR,GAAG,CAAC,IAAI,CAAC,EAAC;IAC1B,MAAMS,aAAa,GAAG,CAAC,GAAGC,IAAI,CAACC,EAAE,GAAG,EAAC;IACrC,MAAMC,UAAU,GAAGX,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAGO,OAAO,CAACK,KAAK,IAAIJ,aAAa;IACrE,MAAMK,cAAc,GAAGb,QAAQ,CAAC,MAAM,CAACO,OAAO,CAACK,KAAK,GAAGJ,aAAa;IACpE,MAAMM,UAAU,GAAGf,GAAG,CAAC,IAAI;IAE3B,IAAIgB,GAAG,GAAG;IACV,IAAIC,MAAM,GAAG,IAAG;IAChB,IAAIC,YAAY,GAAG,IAAG;IAEtB,SAASC,SAASA,CAACC,CAAC,EAAE;MACpB;MACA,OAAOA,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAGV,IAAI,CAACW,GAAG,CAAC,CAAC,CAAC,GAAGD,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG;IAC7D;IAEA,IAAIA,CAAC,GAAG,CAAC,EAAC;IAKV,SAASE,UAAUA,CAACC,EAAE,EAAE;MACpB,IAAI,CAACD,UAAU,CAACE,IAAI,EAAEF,UAAU,CAACE,IAAI,GAAGD,EAAC;MACzC,MAAME,EAAE,GAAGF,EAAE,GAAGD,UAAU,CAACE,IAAG;MAC9BF,UAAU,CAACE,IAAI,GAAGD,EAAC;MACnBH,CAAC,IAAKK,EAAE,GAAGnB,QAAQ,GAAIU,GAAE;MACzB,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG;MACf,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG;MACf;MACA,MAAMM,KAAK,GAAGP,SAAS,CAACC,CAAC;MACzBZ,OAAO,CAACK,KAAK,GAAGT,GAAG,GAAG,CAACC,GAAG,GAAGD,GAAG,IAAIsB,KAAI;MACxC;MACAX,UAAU,CAACF,KAAK,GAAG,GAAG,GAAG,IAAI,GAAGa,KAAI;MACpC,IAAKV,GAAG,KAAK,CAAC,IAAII,CAAC,IAAI,CAAC,IAAMJ,GAAG,KAAK,CAAC,CAAC,IAAII,CAAC,IAAI,CAAE,EAAE;QACjD;QACAF,YAAY,GAAGS,UAAU,CAAC,MAAM;UAChCX,GAAG,IAAI,CAAC;UACRM,UAAU,CAACE,IAAI,GAAGI,SAAQ;UAC1BX,MAAM,GAAGY,qBAAqB,CAACP,UAAU;QACzC,CAAC,EAAEf,KAAK;QACR;MACJ;MACAU,MAAM,GAAGY,qBAAqB,CAACP,UAAU;IAC7C;IAEApB,SAAS,CAAC,MAAM;MACdkB,CAAC,GAAG;MACJJ,GAAG,GAAG;MACNC,MAAM,GAAGY,qBAAqB,CAACP,UAAU;IAC3C,CAAC;IACDnB,eAAe,CAAC,MAAM;MACpB,IAAIc,MAAM,EAAEa,oBAAoB,CAACb,MAAM;MACvC,IAAIC,YAAY,EAAEa,YAAY,CAACb,YAAY;IAC7C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}