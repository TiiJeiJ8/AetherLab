{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\n// 旭日图生成器\nexport default function sunburstOption(config, fileDataMap, xData, yDataArr, selectedChartType, seriesData, customOption = {}) {\n  // 自动计算最大层级\n  function getMaxDepth(data, depth) {\n    depth = depth || 1;\n    if (!Array.isArray(data)) return depth;\n    let max = depth;\n    for (var i = 0; i < data.length; i++) {\n      var node = data[i];\n      if (node.children && node.children.length > 0) {\n        max = Math.max(max, getMaxDepth(node.children, depth + 1));\n      }\n    }\n    return max;\n  }\n  var maxDepth = getMaxDepth(seriesData);\n  // 缩小最外层半径\n  var outerRadius = config.outerRadius || '80%';\n  // 均匀分配每层 r0/r\n  var levels = [];\n  for (var i = 0; i < maxDepth; i++) {\n    var r0 = i === 0 ? '0%' : Math.round(i / maxDepth * 80) + '%';\n    var r = Math.round((i + 1) / maxDepth * 80) + '%';\n    var label = {};\n    var itemStyle = {};\n    if (i === 0) {\n      label = {\n        show: false\n      };\n    } else if (i === maxDepth - 1) {\n      label = {\n        position: 'outside',\n        padding: 3,\n        silent: false,\n        rotate: 'radial'\n      };\n      itemStyle = {\n        borderWidth: 3\n      };\n    } else if (i === 1) {\n      label = {\n        rotate: 'radial',\n        minAngle: 6\n      };\n      itemStyle = {\n        borderWidth: 2\n      };\n    } else {\n      label = {\n        align: 'right'\n      };\n    }\n    levels.push({\n      r0: r0,\n      r: r,\n      label: label,\n      itemStyle: itemStyle\n    });\n  }\n  let orient = 'horizontal';\n  if (config.position === 'left' || config.position === 'right') {\n    orient = 'vertical';\n  } else {\n    orient = 'horizontal';\n  }\n  let visualMap = {};\n  if (config.legendVisible === true) {\n    visualMap = config.visualMap || {\n      show: true,\n      type: 'continuous',\n      min: 1,\n      max: 100,\n      dimension: 'value',\n      orient,\n      left: 'center',\n      top: config.legendPosition || 'bottom'\n    };\n  } else {\n    visualMap = {\n      show: false,\n      type: 'continuous',\n      min: 1,\n      max: 100,\n      dimension: 'value',\n      orient,\n      left: 'center',\n      bottom: 20\n    };\n  }\n  return {\n    title: {\n      text: config.title || 'Chart of Sunburst',\n      subtext: config.subtext || '',\n      textStyle: {\n        fontSize: 16\n      },\n      left: 'center',\n      top: 'top'\n    },\n    tooltip: {\n      trigger: 'item',\n      formatter: info => `${info.name} : ${info.value}`\n    },\n    toolbox: {\n      show: true,\n      feature: {\n        dataView: {\n          show: true,\n          readOnly: false\n        },\n        restore: {\n          show: true\n        },\n        saveAsImage: {\n          show: true\n        }\n      }\n    },\n    visualMap: visualMap,\n    series: [{\n      type: 'sunburst',\n      data: seriesData,\n      radius: [0, outerRadius],\n      // 修改为 0 到 80%\n      sort: config.sort || 'undefined',\n      emphasis: {\n        focus: 'ancestor'\n      },\n      label: {\n        show: function (params) {\n          const rect = params.rect || params.labelRect;\n          if (rect && rect.width * rect.height < 400) {\n            return false;\n          }\n          return true;\n        },\n        fontSize: 12,\n        minAngle: config.minAngle || 5\n      },\n      levels,\n      ...customOption\n    }]\n  };\n}","map":{"version":3,"names":["sunburstOption","config","fileDataMap","xData","yDataArr","selectedChartType","seriesData","customOption","getMaxDepth","data","depth","Array","isArray","max","i","length","node","children","Math","maxDepth","outerRadius","levels","r0","round","r","label","itemStyle","show","position","padding","silent","rotate","borderWidth","minAngle","align","push","orient","visualMap","legendVisible","type","min","dimension","left","top","legendPosition","bottom","title","text","subtext","textStyle","fontSize","tooltip","trigger","formatter","info","name","value","toolbox","feature","dataView","readOnly","restore","saveAsImage","series","radius","sort","emphasis","focus","params","rect","labelRect","width","height"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/assets/JS/chartOptions/sunburst.js"],"sourcesContent":["/* eslint-disable */\n\n// 旭日图生成器\nexport default function sunburstOption(config, fileDataMap, xData, yDataArr, selectedChartType, seriesData, customOption = {}) {\n    // 自动计算最大层级\n    function getMaxDepth(data, depth) {\n        depth = depth || 1;\n        if (!Array.isArray(data)) return depth;\n        let max = depth;\n        for (var i = 0; i < data.length; i++) {\n            var node = data[i];\n            if (node.children && node.children.length > 0) {\n                max = Math.max(max, getMaxDepth(node.children, depth + 1));\n            }\n        }\n        return max;\n    }\n\n    var maxDepth = getMaxDepth(seriesData);\n    // 缩小最外层半径\n    var outerRadius = config.outerRadius || '80%';\n    // 均匀分配每层 r0/r\n    var levels = [];\n    for (var i = 0; i < maxDepth; i++) {\n        var r0 = (i === 0) ? '0%' : Math.round((i / maxDepth) * 80) + '%';\n        var r = Math.round(((i + 1) / maxDepth) * 80) + '%';\n        var label = {};\n        var itemStyle = {};\n        if (i === 0) {\n            label = { show: false };\n        } else if (i === maxDepth - 1) {\n            label = { position: 'outside', padding: 3, silent: false, rotate: 'radial' };\n            itemStyle = { borderWidth: 3 };\n        } else if (i === 1) {\n            label = { rotate: 'radial', minAngle: 6 };\n            itemStyle = { borderWidth: 2 };\n        } else {\n            label = { align: 'right' };\n        }\n        levels.push({ r0: r0, r: r, label: label, itemStyle: itemStyle });\n    }\n\n    let orient = 'horizontal';\n\n    if (config.position === 'left' || config.position === 'right') {\n        orient = 'vertical';\n    }\n    else {\n        orient = 'horizontal';\n    }\n\n    let visualMap = {};\n\n    if (config.legendVisible === true) {\n        visualMap = config.visualMap || {\n            show: true,\n            type: 'continuous',\n            min: 1,\n            max: 100,\n            dimension: 'value',\n            orient,\n            left: 'center',\n            top: config.legendPosition || 'bottom',\n        };\n    }\n    else {\n        visualMap = {\n            show: false,\n            type: 'continuous',\n            min: 1,\n            max: 100,\n            dimension: 'value',\n            orient,\n            left: 'center',\n            bottom: 20,\n        };\n    }\n\n    return {\n        title: {\n            text: config.title || 'Chart of Sunburst',\n            subtext: config.subtext || '',\n            textStyle: {\n                fontSize: 16,\n            },\n            left: 'center',\n            top: 'top',\n        },\n        tooltip: {\n            trigger: 'item',\n            formatter: info => `${info.name} : ${info.value}`\n        },\n        toolbox: {\n            show: true,\n            feature: {\n                dataView: { show: true, readOnly: false },\n                restore: { show: true },\n                saveAsImage: { show: true },\n            }\n        },\n        visualMap: visualMap,\n        series: [\n            {\n                type: 'sunburst',\n                data: seriesData,\n                radius: [0, outerRadius], // 修改为 0 到 80%\n                sort: config.sort || 'undefined',\n                emphasis: {\n                    focus: 'ancestor'\n                },\n                label: {\n                    show: function (params) {\n                        const rect = params.rect || params.labelRect;\n                        if (rect && rect.width * rect.height < 400) {\n                            return false;\n                        }\n                        return true;\n                    },\n                    fontSize: 12,\n                    minAngle: config.minAngle || 5,\n                },\n                levels,\n                ...customOption\n            }\n        ]\n    };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}