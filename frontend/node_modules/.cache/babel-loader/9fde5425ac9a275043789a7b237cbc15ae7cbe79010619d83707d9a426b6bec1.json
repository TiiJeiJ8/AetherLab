{"ast":null,"code":"import { ref, onMounted } from 'vue';\nexport default {\n  __name: 'ThemeToggle',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const isDark = ref(false);\n\n    // 初始化主题\n    onMounted(() => {\n      // 检查本地存储\n      const savedTheme = localStorage.getItem('theme');\n      if (savedTheme) {\n        isDark.value = savedTheme === 'dark';\n      } else {\n        // 检查系统偏好\n        isDark.value = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      }\n      updateTheme();\n\n      // 监听系统主题变化\n      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n        if (!localStorage.getItem('theme')) {\n          isDark.value = e.matches;\n          updateTheme();\n        }\n      });\n    });\n    function toggleTheme() {\n      isDark.value = !isDark.value;\n      updateTheme();\n\n      // 保存到本地存储\n      localStorage.setItem('theme', isDark.value ? 'dark' : 'light');\n    }\n    function updateTheme() {\n      if (isDark.value) {\n        document.documentElement.setAttribute('data-theme', 'dark');\n      } else {\n        document.documentElement.setAttribute('data-theme', 'light');\n      }\n    }\n    const __returned__ = {\n      isDark,\n      toggleTheme,\n      updateTheme,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","isDark","savedTheme","localStorage","getItem","value","window","matchMedia","matches","updateTheme","addEventListener","e","toggleTheme","setItem","document","documentElement","setAttribute"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/ThemeToggle.vue"],"sourcesContent":["<template>\n  <button \n    class=\"theme-toggle\"\n    @click=\"toggleTheme\"\n    :title=\"isDark ? '切换到浅色模式' : '切换到暗黑模式'\"\n  >\n    <transition name=\"theme-icon\" mode=\"out-in\">\n      <svg \n        v-if=\"isDark\"\n        key=\"sun\"\n        width=\"20\" \n        height=\"20\" \n        viewBox=\"0 0 24 24\" \n        fill=\"none\" \n        stroke=\"currentColor\" \n        stroke-width=\"2\"\n      >\n        <circle cx=\"12\" cy=\"12\" r=\"5\"/>\n        <path d=\"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42\"/>\n      </svg>\n      <svg \n        v-else\n        key=\"moon\"\n        width=\"20\" \n        height=\"20\" \n        viewBox=\"0 0 24 24\" \n        fill=\"none\" \n        stroke=\"currentColor\" \n        stroke-width=\"2\"\n      >\n        <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"/>\n      </svg>\n    </transition>\n  </button>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\n\nconst isDark = ref(false)\n\n// 初始化主题\nonMounted(() => {\n  // 检查本地存储\n  const savedTheme = localStorage.getItem('theme')\n  if (savedTheme) {\n    isDark.value = savedTheme === 'dark'\n  } else {\n    // 检查系统偏好\n    isDark.value = window.matchMedia('(prefers-color-scheme: dark)').matches\n  }\n  \n  updateTheme()\n  \n  // 监听系统主题变化\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {\n    if (!localStorage.getItem('theme')) {\n      isDark.value = e.matches\n      updateTheme()\n    }\n  })\n})\n\nfunction toggleTheme() {\n  isDark.value = !isDark.value\n  updateTheme()\n  \n  // 保存到本地存储\n  localStorage.setItem('theme', isDark.value ? 'dark' : 'light')\n}\n\nfunction updateTheme() {\n  if (isDark.value) {\n    document.documentElement.setAttribute('data-theme', 'dark')\n  } else {\n    document.documentElement.setAttribute('data-theme', 'light')\n  }\n}\n</script>\n\n<style scoped>\n.theme-toggle {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  border-radius: var(--radius-lg);\n  background: var(--bg-secondary);\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all var(--transition-normal);\n  position: relative;\n  overflow: hidden;\n}\n\n.theme-toggle:hover {\n  background: var(--bg-hover);\n  transform: scale(1.05);\n}\n\n.theme-toggle:active {\n  transform: scale(0.95);\n}\n\n.theme-icon-enter-active,\n.theme-icon-leave-active {\n  transition: all 0.3s ease;\n}\n\n.theme-icon-enter-from {\n  opacity: 0;\n  transform: rotate(180deg) scale(0.5);\n}\n\n.theme-icon-leave-to {\n  opacity: 0;\n  transform: rotate(-180deg) scale(0.5);\n}\n\n.theme-icon-enter-to,\n.theme-icon-leave-from {\n  opacity: 1;\n  transform: rotate(0deg) scale(1);\n}\n\n/* 添加一个轻微的光晕效果 */\n.theme-toggle::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  border-radius: var(--radius-lg);\n  background: linear-gradient(\n    135deg,\n    transparent 0%,\n    rgba(255, 255, 255, 0.1) 50%,\n    transparent 100%\n  );\n  opacity: 0;\n  transition: opacity var(--transition-normal);\n}\n\n.theme-toggle:hover::before {\n  opacity: 1;\n}\n\n/* 暗黑模式下的特殊样式 */\n[data-theme=\"dark\"] .theme-toggle {\n  background: var(--bg-secondary);\n  box-shadow: var(--shadow-sm);\n}\n\n[data-theme=\"dark\"] .theme-toggle:hover {\n  background: var(--bg-hover);\n  box-shadow: var(--shadow-md);\n}\n</style>\n"],"mappings":"AAqCA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAI;;;;;;;IAEnC,MAAMC,MAAM,GAAGF,GAAG,CAAC,KAAK;;IAExB;IACAC,SAAS,CAAC,MAAM;MACd;MACA,MAAME,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO;MAC/C,IAAIF,UAAU,EAAE;QACdD,MAAM,CAACI,KAAK,GAAGH,UAAU,KAAK,MAAK;MACrC,CAAC,MAAM;QACL;QACAD,MAAM,CAACI,KAAK,GAAGC,MAAM,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAACC,OAAM;MACzE;MAEAC,WAAW,CAAC;;MAEZ;MACAH,MAAM,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAACG,gBAAgB,CAAC,QAAQ,EAAGC,CAAC,IAAK;QAClF,IAAI,CAACR,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAE;UAClCH,MAAM,CAACI,KAAK,GAAGM,CAAC,CAACH,OAAM;UACvBC,WAAW,CAAC;QACd;MACF,CAAC;IACH,CAAC;IAED,SAASG,WAAWA,CAAA,EAAG;MACrBX,MAAM,CAACI,KAAK,GAAG,CAACJ,MAAM,CAACI,KAAI;MAC3BI,WAAW,CAAC;;MAEZ;MACAN,YAAY,CAACU,OAAO,CAAC,OAAO,EAAEZ,MAAM,CAACI,KAAK,GAAG,MAAM,GAAG,OAAO;IAC/D;IAEA,SAASI,WAAWA,CAAA,EAAG;MACrB,IAAIR,MAAM,CAACI,KAAK,EAAE;QAChBS,QAAQ,CAACC,eAAe,CAACC,YAAY,CAAC,YAAY,EAAE,MAAM;MAC5D,CAAC,MAAM;QACLF,QAAQ,CAACC,eAAe,CAACC,YAAY,CAAC,YAAY,EAAE,OAAO;MAC7D;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}