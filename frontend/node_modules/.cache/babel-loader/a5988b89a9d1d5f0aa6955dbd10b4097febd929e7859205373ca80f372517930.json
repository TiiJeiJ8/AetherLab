{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { ref, nextTick, onMounted, computed } from 'vue';\nimport DataPreviewModal from './DataPreviewModal.vue';\nimport { uploadFile, deleteFile, renameFile, getFilePreview, getAllFiles, checkBackendConnection, getCacheStats, clearCache, syncCachedFileToBackend, syncAllCachedFilesToBackend } from '../services/FileServices.js';\nexport default {\n  __name: 'FileUploadModal',\n  props: {\n    show: Boolean\n  },\n  emits: ['close', 'filesChanged'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const props = __props;\n    const emit = __emit;\n\n    // 响应式数据\n    const isDragging = ref(false);\n    const files = ref([]);\n    const showPreview = ref(false);\n    const currentPreviewFile = ref(null);\n    const previewData = ref([]);\n    const isBackendConnected = ref(false);\n    const cacheStats = ref({\n      fileCount: 0,\n      formattedSize: '0 Bytes'\n    });\n    const showSyncDialog = ref(false);\n    const showInlinePreview = ref(false);\n    const useModalPreview = ref(true);\n\n    // 计算属性\n    const hasCachedFiles = computed(() => {\n      return files.value.some(f => f.status === 'local');\n    });\n    const cachedFileCount = computed(() => {\n      return files.value.filter(f => f.status === 'local').length;\n    });\n\n    // 内联预览表头\n    const inlineTableHeaders = computed(() => {\n      if (!previewData.value.length) return [];\n      return Object.keys(previewData.value[0]);\n    });\n\n    // 生命周期\n    onMounted(async () => {\n      await loadFiles();\n      await checkConnection();\n      updateCacheStats();\n    });\n\n    // 方法\n    async function loadFiles() {\n      try {\n        const allFiles = await getAllFiles();\n        files.value = allFiles.map(file => ({\n          ...file,\n          isEditing: false,\n          newName: file.name\n        }));\n      } catch (error) {\n        console.error('加载文件列表失败:', error);\n      }\n    }\n    async function checkConnection() {\n      isBackendConnected.value = await checkBackendConnection();\n    }\n    function updateCacheStats() {\n      cacheStats.value = getCacheStats();\n    }\n    function triggerFileInput() {\n      document.querySelector('.file-input').click();\n    }\n\n    // 处理文件选择\n    async function handleFileSelect(event) {\n      const newFiles = Array.from(event.target.files);\n      await processFiles(newFiles);\n    }\n\n    // 处理拖拽\n    async function handleDrop(event) {\n      isDragging.value = false;\n      const newFiles = Array.from(event.dataTransfer.files);\n      await processFiles(newFiles);\n    }\n\n    // 处理文件上传\n    async function processFiles(newFiles) {\n      const validFiles = newFiles.filter(file => {\n        const ext = file.name.split('.').pop().toLowerCase();\n        return ['csv', 'xlsx', 'xls'].includes(ext);\n      });\n      for (const file of validFiles) {\n        try {\n          // 添加到列表中显示上传状态\n          const tempFile = {\n            id: Date.now() + Math.random(),\n            name: file.name,\n            size: file.size,\n            status: 'uploading',\n            isEditing: false,\n            newName: file.name\n          };\n          files.value.push(tempFile);\n\n          // 调用上传 API\n          const response = await uploadFile(file);\n\n          // 更新文件状态\n          const uploadedFileIndex = files.value.findIndex(f => f.id === tempFile.id);\n          if (uploadedFileIndex >= 0) {\n            files.value[uploadedFileIndex] = {\n              ...response,\n              isEditing: false,\n              newName: response.name\n            };\n          }\n          updateCacheStats();\n          emit('filesChanged', files.value);\n        } catch (error) {\n          console.error('Upload failed:', error);\n          const failedFileIndex = files.value.findIndex(f => f.name === file.name);\n          if (failedFileIndex >= 0) {\n            files.value[failedFileIndex].status = 'error';\n          }\n        }\n      }\n    }\n\n    // 重命名相关\n    function startRename(idx) {\n      files.value[idx].isEditing = true;\n      files.value[idx].newName = files.value[idx].name;\n      nextTick(() => {\n        document.querySelector('.file-item input')?.focus();\n      });\n    }\n    async function finishRename(idx) {\n      const file = files.value[idx];\n      if (file.newName && file.newName !== file.name) {\n        try {\n          await renameFile(file.id, file.newName);\n          file.name = file.newName;\n          updateCacheStats();\n        } catch (error) {\n          console.error('重命名失败:', error);\n        }\n      }\n      file.isEditing = false;\n    }\n\n    // 预览文件\n    async function previewFile(idx) {\n      const file = files.value[idx];\n      currentPreviewFile.value = file;\n      try {\n        const data = await getFilePreview(file.id);\n\n        // 处理不同类型的预览数据\n        if (data.type === 'csv' && data.preview) {\n          previewData.value = data.preview;\n        } else if (Array.isArray(data)) {\n          previewData.value = data;\n        } else {\n          // 如果是其他格式，创建一个简单的显示\n          previewData.value = [{\n            Property: 'File Name',\n            Value: file.name\n          }, {\n            Property: 'File Size',\n            Value: formatFileSize(file.size)\n          }, {\n            Property: 'File Type',\n            Value: file.name.split('.').pop().toUpperCase()\n          }, {\n            Property: 'Status',\n            Value: getStatusText(file.status)\n          }];\n        }\n\n        // 根据预览模式选择显示方式\n        if (useModalPreview.value) {\n          showPreview.value = true;\n        } else {\n          showInlinePreview.value = true;\n        }\n      } catch (error) {\n        console.error('预览失败:', error);\n        // 显示错误信息\n        previewData.value = [{\n          Property: 'Error',\n          Value: 'Failed to load preview data'\n        }, {\n          Property: 'File Name',\n          Value: file.name\n        }, {\n          Property: 'Reason',\n          Value: error.message || 'Unknown error'\n        }];\n        if (useModalPreview.value) {\n          showPreview.value = true;\n        } else {\n          showInlinePreview.value = true;\n        }\n      }\n    }\n    function closePreview() {\n      showPreview.value = false;\n      currentPreviewFile.value = null;\n    }\n    function closeInlinePreview() {\n      showInlinePreview.value = false;\n      currentPreviewFile.value = null;\n    }\n\n    // 切换预览模式\n    function togglePreviewMode() {\n      useModalPreview.value = !useModalPreview.value;\n      if (showInlinePreview.value) {\n        showInlinePreview.value = false;\n        showPreview.value = true;\n      } else if (showPreview.value) {\n        showPreview.value = false;\n        showInlinePreview.value = true;\n      }\n    }\n\n    // 获取预览统计信息\n    function getPreviewStats() {\n      if (!previewData.value.length) return 'No data';\n      const rowCount = previewData.value.length;\n      const colCount = inlineTableHeaders.value.length;\n      return `${rowCount} rows × ${colCount} columns`;\n    }\n\n    // 导出预览数据\n    function exportPreviewData() {\n      if (!previewData.value.length) return;\n      const headers = inlineTableHeaders.value;\n      const csvContent = [headers.join(','), ...previewData.value.map(row => headers.map(header => `\"${row[header] || ''}\"`).join(','))].join('\\n');\n      const blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', `${currentPreviewFile.value?.name || 'preview'}_export.csv`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n\n    // 切换预览模式并显示\n    async function togglePreviewModeAndShow(idx) {\n      useModalPreview.value = !useModalPreview.value;\n      await previewFile(idx);\n    }\n\n    // 刷新预览数据\n    async function refreshPreview() {\n      if (!currentPreviewFile.value) return;\n      const fileIndex = files.value.findIndex(f => f.id === currentPreviewFile.value.id);\n      if (fileIndex >= 0) {\n        await previewFile(fileIndex);\n      }\n    }\n\n    // 删除文件\n    async function deleteFileAction(idx) {\n      const file = files.value[idx];\n      if (confirm(`Are you sure you want to delete \"${file.name}\"?`)) {\n        try {\n          await deleteFile(file.id);\n          files.value.splice(idx, 1);\n          updateCacheStats();\n          emit('filesChanged', files.value);\n        } catch (error) {\n          console.error('删除失败:', error);\n        }\n      }\n    }\n\n    // 从缓存中移除文件\n    async function unloadFile(idx) {\n      const file = files.value[idx];\n      if (confirm(`Remove \"${file.name}\" from cache?`)) {\n        try {\n          await deleteFile(file.id);\n          files.value.splice(idx, 1);\n          updateCacheStats();\n          emit('filesChanged', files.value);\n        } catch (error) {\n          console.error('移除失败:', error);\n        }\n      }\n    }\n\n    // 同步单个文件\n    async function syncSingleFile(fileId) {\n      try {\n        const result = await syncCachedFileToBackend(fileId);\n        const fileIndex = files.value.findIndex(f => f.id === fileId);\n        if (fileIndex >= 0) {\n          files.value[fileIndex].status = 'uploaded';\n          files.value[fileIndex].backendId = result.fileId;\n        }\n        updateCacheStats();\n        emit('filesChanged', files.value);\n      } catch (error) {\n        console.error('同步失败:', error);\n      }\n    }\n\n    // 同步所有缓存文件\n    async function syncAllFiles() {\n      showSyncDialog.value = false;\n      try {\n        const results = await syncAllCachedFilesToBackend();\n\n        // 更新文件状态\n        results.forEach(result => {\n          if (result.success) {\n            const fileIndex = files.value.findIndex(f => f.id === result.fileId);\n            if (fileIndex >= 0) {\n              files.value[fileIndex].status = 'uploaded';\n              files.value[fileIndex].backendId = result.result.fileId;\n            }\n          }\n        });\n        updateCacheStats();\n        emit('filesChanged', files.value);\n        const successCount = results.filter(r => r.success).length;\n        const failCount = results.filter(r => !r.success).length;\n        if (failCount > 0) {\n          alert(`Sync completed: ${successCount} succeeded, ${failCount} failed`);\n        } else {\n          alert(`All ${successCount} files synced successfully!`);\n        }\n      } catch (error) {\n        console.error('批量同步失败:', error);\n      }\n    }\n\n    // 清空缓存\n    async function clearCacheAction() {\n      if (confirm('Are you sure you want to clear all cached files?')) {\n        try {\n          await clearCache();\n          files.value = files.value.filter(f => f.status !== 'local');\n          updateCacheStats();\n          emit('filesChanged', files.value);\n        } catch (error) {\n          console.error('清空缓存失败:', error);\n        }\n      }\n    }\n    function onClose() {\n      emit('close');\n    }\n\n    // 获取状态文本\n    function getStatusText(status) {\n      return {\n        local: 'Cached',\n        uploading: 'Uploading',\n        uploaded: 'Uploaded',\n        error: 'Error'\n      }[status];\n    }\n\n    // 格式化文件大小\n    function formatFileSize(bytes) {\n      if (!bytes) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n\n    // 显示文件信息弹窗\n    function showFileInfo(idx) {\n      const file = files.value[idx];\n      if (!file) return;\n\n      // 创建文件信息对话框\n      const fileInfoHtml = `\n        <div style=\"padding: 20px; min-width: 350px; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n            <h3 style=\"margin: 0 0 16px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 8px; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                📁 File Information\n            </h3>\n            <div style=\"display: grid; gap: 12px;\">\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">File Name:</span>\n                    <span style=\"color: #333; word-break: break-all; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${file.name}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">File Size:</span>\n                    <span style=\"color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${formatFileSize(file.size)}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">File Type:</span>\n                    <span style=\"color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${file.name.split('.').pop().toUpperCase()}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Status:</span>\n                    <span style=\"color: #333; padding: 2px 8px; border-radius: 12px; font-size: 0.9em; background: ${file.status === 'uploaded' ? '#d4edda' : '#fff3cd'}; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                        ${getStatusText(file.status)}\n                    </span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Created:</span>\n                    <span style=\"color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${new Date(file.lastModified || Date.now()).toLocaleString()}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">ID:</span>\n                    <span style=\"color: #666; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em;\">${file.id}</span>\n                </div>\n            </div>\n        </div>\n    `;\n\n      // 使用简单的alert或者创建一个临时的模态框\n      const modal = document.createElement('div');\n      modal.style.cssText = `\n        position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n        background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n        align-items: center; justify-content: center;\n    `;\n      const content = document.createElement('div');\n      content.style.cssText = `\n        background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n        max-width: 500px; width: 90vw; max-height: 80vh; overflow: auto;\n    `;\n      content.innerHTML = fileInfoHtml + `\n        <div style=\"padding: 16px 20px; border-top: 1px solid #eee; text-align: right;\">\n            <button onclick=\"this.closest('.file-info-modal').remove()\" \n                    style=\"background: #007bff; color: white; border: none; padding: 8px 16px; \n                           border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                           font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                Close\n            </button>\n        </div>\n    `;\n      modal.className = 'file-info-modal';\n      modal.appendChild(content);\n\n      // 点击背景关闭\n      modal.addEventListener('click', e => {\n        if (e.target === modal) {\n          modal.remove();\n        }\n      });\n      document.body.appendChild(modal);\n    }\n\n    // 显示数据预览弹窗\n    async function showDataPreview(idx) {\n      const file = files.value[idx];\n      if (!file) return;\n      try {\n        // 加载预览数据\n        const data = await getFilePreview(file.id);\n\n        // 处理不同类型的预览数据\n        let actualData = [];\n        if (data && data.type === 'csv' && data.preview) {\n          // CSV 格式的数据\n          actualData = data.preview;\n        } else if (data && data.type === 'excel' && data.preview) {\n          // Excel 格式的数据\n          actualData = data.preview;\n        } else if (Array.isArray(data)) {\n          // 直接是数组格式\n          actualData = data;\n        } else if (data && typeof data === 'object') {\n          // 其他对象格式，转换为数组\n          actualData = [data];\n        } else {\n          // 无效数据\n          actualData = [];\n        }\n\n        // 限制最多200行\n        const limitedData = actualData.slice(0, 200);\n        if (limitedData.length === 0) {\n          // 显示空数据提示\n          const emptyModal = document.createElement('div');\n          emptyModal.style.cssText = `\n                position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n                background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n                align-items: center; justify-content: center;\n            `;\n          const content = document.createElement('div');\n          content.style.cssText = `\n                background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n                padding: 40px; text-align: center; max-width: 400px; width: 90vw;\n            `;\n          content.innerHTML = `\n                <div style=\"font-size: 3em; margin-bottom: 16px;\">📄</div>\n                <h3 style=\"margin: 0 0 8px 0; color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">No Data Available</h3>\n                <p style=\"margin: 0 0 16px 0; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">The file \"${file.name}\" appears to be empty or in an unsupported format.</p>\n                <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                        style=\"background: #007bff; color: white; border: none; padding: 8px 16px; \n                               border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                               font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                    Close\n                </button>\n            `;\n          emptyModal.className = 'data-preview-modal';\n          emptyModal.appendChild(content);\n          emptyModal.addEventListener('click', e => {\n            if (e.target === emptyModal) {\n              emptyModal.remove();\n            }\n          });\n          document.body.appendChild(emptyModal);\n          return;\n        }\n\n        // 创建数据预览表格\n        const headers = Object.keys(limitedData[0]);\n        const tableHtml = `\n            <div style=\"display: flex; flex-direction: column; height: 80vh; max-height: 700px; min-height: 500px;\">\n                <div style=\"padding: 16px 20px; border-bottom: 1px solid #eee; background: #f8f9fa; flex-shrink: 0;\">\n                    <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                        <h3 style=\"margin: 0; color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">📊 Data Preview - ${file.name}</h3>\n                        <div style=\"display: flex; gap: 8px; align-items: center;\">\n                            <span style=\"font-size: 0.9em; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                                ${limitedData.length} rows ${actualData.length > 200 ? '(limited to 200)' : ''} × ${headers.length} columns\n                            </span>\n                            <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                                    style=\"background: none; border: none; font-size: 1.5em; cursor: pointer; color: #666;\">\n                                ×\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div style=\"flex: 1; overflow: auto; padding: 0; min-height: 0;\">\n                    <table style=\"width: 100%; border-collapse: collapse; font-size: 0.9em; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                        <thead style=\"position: sticky; top: 0; background: #f8f9fa; z-index: 1;\">\n                            <tr>\n                                ${headers.map(header => `\n                                    <th style=\"padding: 12px 8px; border-bottom: 2px solid #dee2e6; \n                                               text-align: left; font-weight: 600; color: #495057; \n                                               background: #f8f9fa; white-space: nowrap; \n                                               font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                                        ${header}\n                                    </th>\n                                `).join('')}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${limitedData.map((row, idx) => `\n                                <tr style=\"border-bottom: 1px solid #eee; ${idx % 2 === 0 ? 'background: #fafafa;' : ''}\"\n                                    onmouseover=\"this.style.background='#f0f8ff'\" \n                                    onmouseout=\"this.style.background='${idx % 2 === 0 ? '#fafafa' : 'white'}'\">\n                                    ${headers.map(header => `\n                                        <td style=\"padding: 8px; border-bottom: 1px solid #eee; \n                                                   vertical-align: top; max-width: 200px; overflow: hidden; \n                                                   text-overflow: ellipsis; white-space: nowrap;\n                                                   font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\"\n                                            title=\"${String(row[header] || '').replace(/\"/g, '&quot;')}\">\n                                            ${String(row[header] || '')}\n                                        </td>\n                                    `).join('')}\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n                <div style=\"padding: 12px 20px; border-top: 1px solid #eee; background: #f8f9fa; flex-shrink: 0;\">\n                    <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                        <span style=\"font-size: 0.9em; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                            Data preview for ${file.name}\n                        </span>\n                        <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                                style=\"background: #007bff; color: white; border: none; padding: 8px 16px; \n                                       border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                                       font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                            Close\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `;\n\n        // 创建模态框\n        const modal = document.createElement('div');\n        modal.style.cssText = `\n            position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n            background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n            align-items: center; justify-content: center; padding: 20px;\n        `;\n        const content = document.createElement('div');\n        content.style.cssText = `\n            background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n            width: 90vw; max-width: 1200px; height: 80vh; overflow: hidden;\n        `;\n        content.innerHTML = tableHtml;\n        modal.className = 'data-preview-modal';\n        modal.appendChild(content);\n\n        // 点击背景关闭\n        modal.addEventListener('click', e => {\n          if (e.target === modal) {\n            modal.remove();\n          }\n        });\n        document.body.appendChild(modal);\n      } catch (error) {\n        console.error('Data preview failed:', error);\n\n        // 显示错误信息\n        const errorModal = document.createElement('div');\n        errorModal.style.cssText = `\n            position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n            background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n            align-items: center; justify-content: center;\n        `;\n        const content = document.createElement('div');\n        content.style.cssText = `\n            background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n            padding: 40px; text-align: center; max-width: 400px; width: 90vw;\n        `;\n        content.innerHTML = `\n            <div style=\"font-size: 3em; margin-bottom: 16px;\">❌</div>\n            <h3 style=\"margin: 0 0 8px 0; color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Preview Failed</h3>\n            <p style=\"margin: 0 0 16px 0; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Unable to preview \"${file.name}\". ${error.message || 'Unknown error occurred.'}</p>\n            <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                    style=\"background: #dc3545; color: white; border: none; padding: 8px 16px; \n                           border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                           font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                Close\n            </button>\n        `;\n        errorModal.className = 'data-preview-modal';\n        errorModal.appendChild(content);\n        errorModal.addEventListener('click', e => {\n          if (e.target === errorModal) {\n            errorModal.remove();\n          }\n        });\n        document.body.appendChild(errorModal);\n      }\n    }\n    const __returned__ = {\n      props,\n      emit,\n      isDragging,\n      files,\n      showPreview,\n      currentPreviewFile,\n      previewData,\n      isBackendConnected,\n      cacheStats,\n      showSyncDialog,\n      showInlinePreview,\n      useModalPreview,\n      hasCachedFiles,\n      cachedFileCount,\n      inlineTableHeaders,\n      loadFiles,\n      checkConnection,\n      updateCacheStats,\n      triggerFileInput,\n      handleFileSelect,\n      handleDrop,\n      processFiles,\n      startRename,\n      finishRename,\n      previewFile,\n      closePreview,\n      closeInlinePreview,\n      togglePreviewMode,\n      getPreviewStats,\n      exportPreviewData,\n      togglePreviewModeAndShow,\n      refreshPreview,\n      deleteFileAction,\n      unloadFile,\n      syncSingleFile,\n      syncAllFiles,\n      clearCacheAction,\n      onClose,\n      getStatusText,\n      formatFileSize,\n      showFileInfo,\n      showDataPreview,\n      ref,\n      nextTick,\n      onMounted,\n      computed,\n      DataPreviewModal,\n      get uploadFile() {\n        return uploadFile;\n      },\n      get deleteFile() {\n        return deleteFile;\n      },\n      get renameFile() {\n        return renameFile;\n      },\n      get getFilePreview() {\n        return getFilePreview;\n      },\n      get getAllFiles() {\n        return getAllFiles;\n      },\n      get checkBackendConnection() {\n        return checkBackendConnection;\n      },\n      get getCacheStats() {\n        return getCacheStats;\n      },\n      get clearCache() {\n        return clearCache;\n      },\n      get syncCachedFileToBackend() {\n        return syncCachedFileToBackend;\n      },\n      get syncAllCachedFilesToBackend() {\n        return syncAllCachedFilesToBackend;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","nextTick","onMounted","computed","DataPreviewModal","uploadFile","deleteFile","renameFile","getFilePreview","getAllFiles","checkBackendConnection","getCacheStats","clearCache","syncCachedFileToBackend","syncAllCachedFilesToBackend","props","__props","emit","__emit","isDragging","files","showPreview","currentPreviewFile","previewData","isBackendConnected","cacheStats","fileCount","formattedSize","showSyncDialog","showInlinePreview","useModalPreview","hasCachedFiles","value","some","f","status","cachedFileCount","filter","length","inlineTableHeaders","Object","keys","loadFiles","checkConnection","updateCacheStats","allFiles","map","file","isEditing","newName","name","error","console","triggerFileInput","document","querySelector","click","handleFileSelect","event","newFiles","Array","from","target","processFiles","handleDrop","dataTransfer","validFiles","ext","split","pop","toLowerCase","includes","tempFile","id","Date","now","Math","random","size","push","response","uploadedFileIndex","findIndex","failedFileIndex","startRename","idx","focus","finishRename","previewFile","data","type","preview","isArray","Property","Value","formatFileSize","toUpperCase","getStatusText","message","closePreview","closeInlinePreview","togglePreviewMode","getPreviewStats","rowCount","colCount","exportPreviewData","headers","csvContent","join","row","header","blob","Blob","link","createElement","url","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","removeChild","togglePreviewModeAndShow","refreshPreview","fileIndex","deleteFileAction","confirm","splice","unloadFile","syncSingleFile","fileId","result","backendId","syncAllFiles","results","forEach","success","successCount","r","failCount","alert","clearCacheAction","onClose","local","uploading","uploaded","bytes","k","sizes","i","floor","log","parseFloat","pow","toFixed","showFileInfo","fileInfoHtml","lastModified","toLocaleString","modal","cssText","content","innerHTML","className","addEventListener","e","remove","showDataPreview","actualData","limitedData","slice","emptyModal","tableHtml","String","replace","errorModal"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/components/FileUploadModal.vue"],"sourcesContent":["<template>\n<transition name=\"fade-slide\">\n    <div v-if=\"show\" class=\"file-modal\" @click.self=\"onClose\">\n        <div class=\"file-content\">\n            <div class=\"file-header\">\n                <div class=\"header-title\">\n                    <span>Files</span>\n                    <div class=\"connection-status\">\n                        <span class=\"status-dot\" :class=\"{ 'connected': isBackendConnected }\"></span>\n                        <span class=\"status-text\">{{ isBackendConnected ? 'Backend Connected' : 'Offline Mode' }}</span>\n                    </div>\n                </div>\n                <div class=\"header-actions\">\n                    <button v-if=\"!isBackendConnected\" @click=\"checkConnection\" class=\"refresh-btn\" title=\"Check Connection\">🔄</button>\n                    <button v-if=\"hasCachedFiles && isBackendConnected\" @click=\"showSyncDialog = true\" class=\"sync-btn\" title=\"Sync to Backend\">☁️</button>\n                    <button class=\"close-btn\" @click=\"onClose\">×</button>\n                </div>\n            </div>\n\n            <!-- 缓存统计信息 -->\n            <div v-if=\"cacheStats.fileCount > 0\" class=\"cache-stats\">\n                <span>📁 {{ cacheStats.fileCount }} files cached ({{ cacheStats.formattedSize }})</span>\n                <button @click=\"clearCacheAction\" class=\"clear-cache-btn\">Clear Cache</button>\n            </div>\n\n            <!-- 拖拽上传区域 -->\n            <div class=\"upload-area\"\n                    :class=\"{ 'dragging': isDragging }\"\n                    @drop.prevent=\"handleDrop\"\n                    @dragover.prevent=\"isDragging = true\"\n                    @dragleave.prevent=\"isDragging = false\">\n                <input type=\"file\"\n                        ref=\"fileInput\"\n                        @change=\"handleFileSelect\"\n                        accept=\".csv,.xlsx,.xls\"\n                        multiple\n                        class=\"file-input\" />\n                <div class=\"upload-tip\">\n                    <i class=\"upload-icon\">📁</i>\n                    <p>Drag files here or <button @click=\"triggerFileInput\">click to select</button></p>\n                    <p class=\"sub-tip\">Supports CSV、XLSX、XLS formats</p>\n                    <p class=\"cache-tip\">{{ isBackendConnected ? 'Files will be uploaded to backend' : 'Files will be cached locally' }}</p>\n                </div>\n            </div>\n\n            <!-- 文件列表 -->\n            <div class=\"file-list\" v-if=\"files.length\">\n                <div v-for=\"(file, idx) in files\"\n                        :key=\"file.id\"\n                        class=\"file-item\"\n                        :class=\"{ 'uploading': file.status === 'uploading' }\">\n                    <div class=\"file-info\">\n                        <span class=\"file-name\"\n                                :class=\"{ 'editing': file.isEditing }\"\n                                @dblclick=\"startRename(idx)\">\n                            <template v-if=\"!file.isEditing\">\n                                {{ file.name }}\n                            </template>\n                            <input v-else\n                                    v-model=\"file.newName\"\n                                    @blur=\"finishRename(idx)\"\n                                    @keyup.enter=\"finishRename(idx)\"\n                                    ref=\"renameInput\"\n                                    type=\"text\" />\n                        </span>\n                        <div class=\"file-meta\">\n                            <span class=\"file-size\">{{ formatFileSize(file.size) }}</span>\n                            <span class=\"file-status\" :class=\"file.status\">\n                                {{ getStatusText(file.status) }}\n                            </span>\n                        </div>\n                    </div>\n                    <div class=\"file-actions\">\n                        <button @click=\"showFileInfo(idx)\"\n                                title=\"File Information\"\n                                class=\"file-info-btn\">ℹ️</button>\n                        <button @click=\"showDataPreview(idx)\"\n                                title=\"Data Preview\"\n                                class=\"data-preview-btn\">📊</button>\n                        <button v-if=\"file.status === 'local' && isBackendConnected\"\n                                @click=\"syncSingleFile(file.id)\"\n                                title=\"Sync to Backend\">☁️</button>\n                        <button v-if=\"file.status === 'local'\"\n                                @click=\"unloadFile(idx)\"\n                                title=\"Remove from cache\">🗑️</button>\n                        <button v-if=\"file.status === 'uploaded'\"\n                                @click=\"deleteFileAction(idx)\"\n                                title=\"Delete from Database\">❌</button>\n                    </div>\n                </div>\n            </div>\n\n            <!-- 同步对话框 -->\n            <div v-if=\"showSyncDialog\" class=\"sync-dialog\">\n                <div class=\"sync-dialog-content\">\n                    <h3>Sync Files to Backend</h3>\n                    <p>{{ cachedFileCount }} files in cache. Do you want to sync them to the backend?</p>\n                    <div class=\"sync-options\">\n                        <button @click=\"syncAllFiles\" class=\"sync-confirm-btn\">Sync All</button>\n                        <button @click=\"showSyncDialog = false\" class=\"sync-cancel-btn\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- 数据预览组件 -->\n        <DataPreviewModal\n            v-if=\"currentPreviewFile\"\n            :show=\"showPreview\"\n            :current-file=\"currentPreviewFile\"\n            :preview-data=\"previewData\"\n            :is-side-preview=\"true\"\n            @close=\"closePreview\"\n        />\n\n        <!-- 内置数据预览表格 -->\n        <div v-if=\"showInlinePreview\" class=\"inline-preview-overlay\" @click.self=\"closeInlinePreview\">\n            <div class=\"inline-preview-content\">\n                <div class=\"inline-preview-header\">\n                    <h4>{{ currentPreviewFile?.name || 'Data Preview' }}</h4>\n                    <div class=\"preview-header-actions\">\n                        <button @click=\"togglePreviewMode\" class=\"toggle-mode-btn\"\n                                :title=\"useModalPreview ? 'Switch to Inline Preview' : 'Switch to Modal Preview'\">\n                            {{ useModalPreview ? '📋' : '🗂️' }}\n                        </button>\n                        <button @click=\"closeInlinePreview\" class=\"close-preview-btn\">×</button>\n                    </div>\n                </div>\n\n                <div class=\"inline-preview-table-wrapper\">\n                    <table v-if=\"previewData.length\" class=\"inline-preview-table\">\n                        <thead>\n                            <tr>\n                                <th v-for=\"header in inlineTableHeaders\"\n                                    :key=\"header\">{{ header }}</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"(row, idx) in previewData\"\n                                :key=\"idx\">\n                                <td v-for=\"header in inlineTableHeaders\"\n                                    :key=\"header\">{{ row[header] || '' }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                    <div v-else class=\"inline-preview-empty\">\n                        <div class=\"empty-icon\">📄</div>\n                        <p>No data available for preview.</p>\n                        <p class=\"empty-sub\">The file may be empty or in an unsupported format.</p>\n                    </div>\n                </div>\n\n                <div class=\"inline-preview-footer\">\n                    <span class=\"preview-stats\">{{ getPreviewStats() }}</span>\n                    <div class=\"preview-actions\">\n                        <button @click=\"exportPreviewData\" class=\"export-btn\">📤 Export</button>\n                        <button @click=\"refreshPreview\" class=\"refresh-btn\">🔄 Refresh</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</transition>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, nextTick, onMounted, computed } from 'vue'\nimport DataPreviewModal from './DataPreviewModal.vue'\nimport { \n    uploadFile, \n    deleteFile, \n    renameFile, \n    getFilePreview,\n    getAllFiles,\n    checkBackendConnection,\n    getCacheStats,\n    clearCache,\n    syncCachedFileToBackend,\n    syncAllCachedFilesToBackend\n} from '../services/FileServices.js'\n\nconst props = defineProps({\n    show: Boolean\n})\n\nconst emit = defineEmits(['close', 'filesChanged'])\n\n// 响应式数据\nconst isDragging = ref(false)\nconst files = ref([])\nconst showPreview = ref(false)\nconst currentPreviewFile = ref(null)\nconst previewData = ref([])\nconst isBackendConnected = ref(false)\nconst cacheStats = ref({ fileCount: 0, formattedSize: '0 Bytes' })\nconst showSyncDialog = ref(false)\nconst showInlinePreview = ref(false)\nconst useModalPreview = ref(true)\n\n// 计算属性\nconst hasCachedFiles = computed(() => {\n    return files.value.some(f => f.status === 'local')\n})\n\nconst cachedFileCount = computed(() => {\n    return files.value.filter(f => f.status === 'local').length\n})\n\n// 内联预览表头\nconst inlineTableHeaders = computed(() => {\n    if (!previewData.value.length) return []\n    return Object.keys(previewData.value[0])\n})\n\n// 生命周期\nonMounted(async () => {\n    await loadFiles()\n    await checkConnection()\n    updateCacheStats()\n})\n\n// 方法\nasync function loadFiles() {\n    try {\n        const allFiles = await getAllFiles()\n        files.value = allFiles.map(file => ({\n            ...file,\n            isEditing: false,\n            newName: file.name\n        }))\n    } catch (error) {\n        console.error('加载文件列表失败:', error)\n    }\n}\n\nasync function checkConnection() {\n    isBackendConnected.value = await checkBackendConnection()\n}\n\nfunction updateCacheStats() {\n    cacheStats.value = getCacheStats()\n}\n\nfunction triggerFileInput() {\n    document.querySelector('.file-input').click()\n}\n\n// 处理文件选择\nasync function handleFileSelect(event) {\n    const newFiles = Array.from(event.target.files)\n    await processFiles(newFiles)\n}\n\n// 处理拖拽\nasync function handleDrop(event) {\n    isDragging.value = false\n    const newFiles = Array.from(event.dataTransfer.files)\n    await processFiles(newFiles)\n}\n\n// 处理文件上传\nasync function processFiles(newFiles) {\n    const validFiles = newFiles.filter(file => {\n        const ext = file.name.split('.').pop().toLowerCase()\n        return ['csv', 'xlsx', 'xls'].includes(ext)\n    })\n\n    for (const file of validFiles) {\n        try {\n            // 添加到列表中显示上传状态\n            const tempFile = {\n                id: Date.now() + Math.random(),\n                name: file.name,\n                size: file.size,\n                status: 'uploading',\n                isEditing: false,\n                newName: file.name\n            }\n            files.value.push(tempFile)\n            \n            // 调用上传 API\n            const response = await uploadFile(file)\n            \n            // 更新文件状态\n            const uploadedFileIndex = files.value.findIndex(f => f.id === tempFile.id)\n            if (uploadedFileIndex >= 0) {\n                files.value[uploadedFileIndex] = {\n                    ...response,\n                    isEditing: false,\n                    newName: response.name\n                }\n            }\n            \n            updateCacheStats()\n            emit('filesChanged', files.value)\n            \n        } catch (error) {\n            console.error('Upload failed:', error)\n            const failedFileIndex = files.value.findIndex(f => f.name === file.name)\n            if (failedFileIndex >= 0) {\n                files.value[failedFileIndex].status = 'error'\n            }\n        }\n    }\n}\n\n// 重命名相关\nfunction startRename(idx) {\n    files.value[idx].isEditing = true\n    files.value[idx].newName = files.value[idx].name\n    nextTick(() => {\n        document.querySelector('.file-item input')?.focus()\n    })\n}\n\nasync function finishRename(idx) {\n    const file = files.value[idx]\n    if (file.newName && file.newName !== file.name) {\n        try {\n            await renameFile(file.id, file.newName)\n            file.name = file.newName\n            updateCacheStats()\n        } catch (error) {\n            console.error('重命名失败:', error)\n        }\n    }\n    file.isEditing = false\n}\n\n// 预览文件\nasync function previewFile(idx) {\n    const file = files.value[idx]\n    currentPreviewFile.value = file\n    \n    try {\n        const data = await getFilePreview(file.id)\n        \n        // 处理不同类型的预览数据\n        if (data.type === 'csv' && data.preview) {\n            previewData.value = data.preview\n        } else if (Array.isArray(data)) {\n            previewData.value = data\n        } else {\n            // 如果是其他格式，创建一个简单的显示\n            previewData.value = [\n                { \n                    Property: 'File Name', \n                    Value: file.name \n                },\n                { \n                    Property: 'File Size', \n                    Value: formatFileSize(file.size) \n                },\n                { \n                    Property: 'File Type', \n                    Value: file.name.split('.').pop().toUpperCase() \n                },\n                { \n                    Property: 'Status', \n                    Value: getStatusText(file.status) \n                }\n            ]\n        }\n        \n        // 根据预览模式选择显示方式\n        if (useModalPreview.value) {\n            showPreview.value = true\n        } else {\n            showInlinePreview.value = true\n        }\n    } catch (error) {\n        console.error('预览失败:', error)\n        // 显示错误信息\n        previewData.value = [\n            { \n                Property: 'Error', \n                Value: 'Failed to load preview data' \n            },\n            { \n                Property: 'File Name', \n                Value: file.name \n            },\n            { \n                Property: 'Reason', \n                Value: error.message || 'Unknown error' \n            }\n        ]\n        \n        if (useModalPreview.value) {\n            showPreview.value = true\n        } else {\n            showInlinePreview.value = true\n        }\n    }\n}\n\nfunction closePreview() {\n    showPreview.value = false\n    currentPreviewFile.value = null\n}\n\nfunction closeInlinePreview() {\n    showInlinePreview.value = false\n    currentPreviewFile.value = null\n}\n\n// 切换预览模式\nfunction togglePreviewMode() {\n    useModalPreview.value = !useModalPreview.value\n    \n    if (showInlinePreview.value) {\n        showInlinePreview.value = false\n        showPreview.value = true\n    } else if (showPreview.value) {\n        showPreview.value = false\n        showInlinePreview.value = true\n    }\n}\n\n// 获取预览统计信息\nfunction getPreviewStats() {\n    if (!previewData.value.length) return 'No data'\n    \n    const rowCount = previewData.value.length\n    const colCount = inlineTableHeaders.value.length\n    \n    return `${rowCount} rows × ${colCount} columns`\n}\n\n// 导出预览数据\nfunction exportPreviewData() {\n    if (!previewData.value.length) return\n    \n    const headers = inlineTableHeaders.value\n    const csvContent = [\n        headers.join(','),\n        ...previewData.value.map(row => \n            headers.map(header => `\"${row[header] || ''}\"`).join(',')\n        )\n    ].join('\\n')\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })\n    const link = document.createElement('a')\n    const url = URL.createObjectURL(blob)\n    \n    link.setAttribute('href', url)\n    link.setAttribute('download', `${currentPreviewFile.value?.name || 'preview'}_export.csv`)\n    link.style.visibility = 'hidden'\n    \n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n}\n\n// 切换预览模式并显示\nasync function togglePreviewModeAndShow(idx) {\n    useModalPreview.value = !useModalPreview.value\n    await previewFile(idx)\n}\n\n// 刷新预览数据\nasync function refreshPreview() {\n    if (!currentPreviewFile.value) return\n    \n    const fileIndex = files.value.findIndex(f => f.id === currentPreviewFile.value.id)\n    if (fileIndex >= 0) {\n        await previewFile(fileIndex)\n    }\n}\n\n// 删除文件\nasync function deleteFileAction(idx) {\n    const file = files.value[idx]\n    if (confirm(`Are you sure you want to delete \"${file.name}\"?`)) {\n        try {\n            await deleteFile(file.id)\n            files.value.splice(idx, 1)\n            updateCacheStats()\n            emit('filesChanged', files.value)\n        } catch (error) {\n            console.error('删除失败:', error)\n        }\n    }\n}\n\n// 从缓存中移除文件\nasync function unloadFile(idx) {\n    const file = files.value[idx]\n    if (confirm(`Remove \"${file.name}\" from cache?`)) {\n        try {\n            await deleteFile(file.id)\n            files.value.splice(idx, 1)\n            updateCacheStats()\n            emit('filesChanged', files.value)\n        } catch (error) {\n            console.error('移除失败:', error)\n        }\n    }\n}\n\n// 同步单个文件\nasync function syncSingleFile(fileId) {\n    try {\n        const result = await syncCachedFileToBackend(fileId)\n        const fileIndex = files.value.findIndex(f => f.id === fileId)\n        if (fileIndex >= 0) {\n            files.value[fileIndex].status = 'uploaded'\n            files.value[fileIndex].backendId = result.fileId\n        }\n        updateCacheStats()\n        emit('filesChanged', files.value)\n    } catch (error) {\n        console.error('同步失败:', error)\n    }\n}\n\n// 同步所有缓存文件\nasync function syncAllFiles() {\n    showSyncDialog.value = false\n    \n    try {\n        const results = await syncAllCachedFilesToBackend()\n        \n        // 更新文件状态\n        results.forEach(result => {\n            if (result.success) {\n                const fileIndex = files.value.findIndex(f => f.id === result.fileId)\n                if (fileIndex >= 0) {\n                    files.value[fileIndex].status = 'uploaded'\n                    files.value[fileIndex].backendId = result.result.fileId\n                }\n            }\n        })\n        \n        updateCacheStats()\n        emit('filesChanged', files.value)\n        \n        const successCount = results.filter(r => r.success).length\n        const failCount = results.filter(r => !r.success).length\n        \n        if (failCount > 0) {\n            alert(`Sync completed: ${successCount} succeeded, ${failCount} failed`)\n        } else {\n            alert(`All ${successCount} files synced successfully!`)\n        }\n    } catch (error) {\n        console.error('批量同步失败:', error)\n    }\n}\n\n// 清空缓存\nasync function clearCacheAction() {\n    if (confirm('Are you sure you want to clear all cached files?')) {\n        try {\n            await clearCache()\n            files.value = files.value.filter(f => f.status !== 'local')\n            updateCacheStats()\n            emit('filesChanged', files.value)\n        } catch (error) {\n            console.error('清空缓存失败:', error)\n        }\n    }\n}\n\nfunction onClose() {\n    emit('close')\n}\n\n// 获取状态文本\nfunction getStatusText(status) {\n    return {\n        local: 'Cached',\n        uploading: 'Uploading',\n        uploaded: 'Uploaded',\n        error: 'Error'\n    }[status]\n}\n\n// 格式化文件大小\nfunction formatFileSize(bytes) {\n    if (!bytes) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// 显示文件信息弹窗\nfunction showFileInfo(idx) {\n    const file = files.value[idx]\n    if (!file) return\n    \n    // 创建文件信息对话框\n    const fileInfoHtml = `\n        <div style=\"padding: 20px; min-width: 350px; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n            <h3 style=\"margin: 0 0 16px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 8px; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                📁 File Information\n            </h3>\n            <div style=\"display: grid; gap: 12px;\">\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">File Name:</span>\n                    <span style=\"color: #333; word-break: break-all; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${file.name}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">File Size:</span>\n                    <span style=\"color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${formatFileSize(file.size)}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">File Type:</span>\n                    <span style=\"color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${file.name.split('.').pop().toUpperCase()}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Status:</span>\n                    <span style=\"color: #333; padding: 2px 8px; border-radius: 12px; font-size: 0.9em; background: ${file.status === 'uploaded' ? '#d4edda' : '#fff3cd'}; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                        ${getStatusText(file.status)}\n                    </span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Created:</span>\n                    <span style=\"color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">${new Date(file.lastModified || Date.now()).toLocaleString()}</span>\n                </div>\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                    <span style=\"font-weight: 600; color: #555; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">ID:</span>\n                    <span style=\"color: #666; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em;\">${file.id}</span>\n                </div>\n            </div>\n        </div>\n    `\n    \n    // 使用简单的alert或者创建一个临时的模态框\n    const modal = document.createElement('div')\n    modal.style.cssText = `\n        position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n        background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n        align-items: center; justify-content: center;\n    `\n    \n    const content = document.createElement('div')\n    content.style.cssText = `\n        background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n        max-width: 500px; width: 90vw; max-height: 80vh; overflow: auto;\n    `\n    content.innerHTML = fileInfoHtml + `\n        <div style=\"padding: 16px 20px; border-top: 1px solid #eee; text-align: right;\">\n            <button onclick=\"this.closest('.file-info-modal').remove()\" \n                    style=\"background: #007bff; color: white; border: none; padding: 8px 16px; \n                           border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                           font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                Close\n            </button>\n        </div>\n    `\n    \n    modal.className = 'file-info-modal'\n    modal.appendChild(content)\n    \n    // 点击背景关闭\n    modal.addEventListener('click', (e) => {\n        if (e.target === modal) {\n            modal.remove()\n        }\n    })\n    \n    document.body.appendChild(modal)\n}\n\n// 显示数据预览弹窗\nasync function showDataPreview(idx) {\n    const file = files.value[idx]\n    if (!file) return\n    \n    try {\n        // 加载预览数据\n        const data = await getFilePreview(file.id)\n        \n        // 处理不同类型的预览数据\n        let actualData = []\n        if (data && data.type === 'csv' && data.preview) {\n            // CSV 格式的数据\n            actualData = data.preview\n        } else if (data && data.type === 'excel' && data.preview) {\n            // Excel 格式的数据\n            actualData = data.preview\n        } else if (Array.isArray(data)) {\n            // 直接是数组格式\n            actualData = data\n        } else if (data && typeof data === 'object') {\n            // 其他对象格式，转换为数组\n            actualData = [data]\n        } else {\n            // 无效数据\n            actualData = []\n        }\n        \n        // 限制最多200行\n        const limitedData = actualData.slice(0, 200)\n        \n        if (limitedData.length === 0) {\n            // 显示空数据提示\n            const emptyModal = document.createElement('div')\n            emptyModal.style.cssText = `\n                position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n                background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n                align-items: center; justify-content: center;\n            `\n            \n            const content = document.createElement('div')\n            content.style.cssText = `\n                background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n                padding: 40px; text-align: center; max-width: 400px; width: 90vw;\n            `\n            content.innerHTML = `\n                <div style=\"font-size: 3em; margin-bottom: 16px;\">📄</div>\n                <h3 style=\"margin: 0 0 8px 0; color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">No Data Available</h3>\n                <p style=\"margin: 0 0 16px 0; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">The file \"${file.name}\" appears to be empty or in an unsupported format.</p>\n                <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                        style=\"background: #007bff; color: white; border: none; padding: 8px 16px; \n                               border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                               font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                    Close\n                </button>\n            `\n            \n            emptyModal.className = 'data-preview-modal'\n            emptyModal.appendChild(content)\n            \n            emptyModal.addEventListener('click', (e) => {\n                if (e.target === emptyModal) {\n                    emptyModal.remove()\n                }\n            })\n            \n            document.body.appendChild(emptyModal)\n            return\n        }\n        \n        // 创建数据预览表格\n        const headers = Object.keys(limitedData[0])\n        const tableHtml = `\n            <div style=\"display: flex; flex-direction: column; height: 80vh; max-height: 700px; min-height: 500px;\">\n                <div style=\"padding: 16px 20px; border-bottom: 1px solid #eee; background: #f8f9fa; flex-shrink: 0;\">\n                    <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                        <h3 style=\"margin: 0; color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">📊 Data Preview - ${file.name}</h3>\n                        <div style=\"display: flex; gap: 8px; align-items: center;\">\n                            <span style=\"font-size: 0.9em; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                                ${limitedData.length} rows ${actualData.length > 200 ? '(limited to 200)' : ''} × ${headers.length} columns\n                            </span>\n                            <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                                    style=\"background: none; border: none; font-size: 1.5em; cursor: pointer; color: #666;\">\n                                ×\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div style=\"flex: 1; overflow: auto; padding: 0; min-height: 0;\">\n                    <table style=\"width: 100%; border-collapse: collapse; font-size: 0.9em; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                        <thead style=\"position: sticky; top: 0; background: #f8f9fa; z-index: 1;\">\n                            <tr>\n                                ${headers.map(header => `\n                                    <th style=\"padding: 12px 8px; border-bottom: 2px solid #dee2e6; \n                                               text-align: left; font-weight: 600; color: #495057; \n                                               background: #f8f9fa; white-space: nowrap; \n                                               font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                                        ${header}\n                                    </th>\n                                `).join('')}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${limitedData.map((row, idx) => `\n                                <tr style=\"border-bottom: 1px solid #eee; ${idx % 2 === 0 ? 'background: #fafafa;' : ''}\"\n                                    onmouseover=\"this.style.background='#f0f8ff'\" \n                                    onmouseout=\"this.style.background='${idx % 2 === 0 ? '#fafafa' : 'white'}'\">\n                                    ${headers.map(header => `\n                                        <td style=\"padding: 8px; border-bottom: 1px solid #eee; \n                                                   vertical-align: top; max-width: 200px; overflow: hidden; \n                                                   text-overflow: ellipsis; white-space: nowrap;\n                                                   font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\"\n                                            title=\"${String(row[header] || '').replace(/\"/g, '&quot;')}\">\n                                            ${String(row[header] || '')}\n                                        </td>\n                                    `).join('')}\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n                <div style=\"padding: 12px 20px; border-top: 1px solid #eee; background: #f8f9fa; flex-shrink: 0;\">\n                    <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                        <span style=\"font-size: 0.9em; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                            Data preview for ${file.name}\n                        </span>\n                        <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                                style=\"background: #007bff; color: white; border: none; padding: 8px 16px; \n                                       border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                                       font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                            Close\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `\n        \n        // 创建模态框\n        const modal = document.createElement('div')\n        modal.style.cssText = `\n            position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n            background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n            align-items: center; justify-content: center; padding: 20px;\n        `\n        \n        const content = document.createElement('div')\n        content.style.cssText = `\n            background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n            width: 90vw; max-width: 1200px; height: 80vh; overflow: hidden;\n        `\n        content.innerHTML = tableHtml\n        \n        modal.className = 'data-preview-modal'\n        modal.appendChild(content)\n        \n        // 点击背景关闭\n        modal.addEventListener('click', (e) => {\n            if (e.target === modal) {\n                modal.remove()\n            }\n        })\n        \n        document.body.appendChild(modal)\n        \n    } catch (error) {\n        console.error('Data preview failed:', error)\n        \n        // 显示错误信息\n        const errorModal = document.createElement('div')\n        errorModal.style.cssText = `\n            position: fixed; top: 0; left: 0; width: 100%; height: 100%; \n            background: rgba(0,0,0,0.5); z-index: 10000; display: flex; \n            align-items: center; justify-content: center;\n        `\n        \n        const content = document.createElement('div')\n        content.style.cssText = `\n            background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n            padding: 40px; text-align: center; max-width: 400px; width: 90vw;\n        `\n        content.innerHTML = `\n            <div style=\"font-size: 3em; margin-bottom: 16px;\">❌</div>\n            <h3 style=\"margin: 0 0 8px 0; color: #333; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Preview Failed</h3>\n            <p style=\"margin: 0 0 16px 0; color: #666; font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">Unable to preview \"${file.name}\". ${error.message || 'Unknown error occurred.'}</p>\n            <button onclick=\"this.closest('.data-preview-modal').remove()\" \n                    style=\"background: #dc3545; color: white; border: none; padding: 8px 16px; \n                           border-radius: 4px; cursor: pointer; font-size: 0.9em;\n                           font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;\">\n                Close\n            </button>\n        `\n        \n        errorModal.className = 'data-preview-modal'\n        errorModal.appendChild(content)\n        \n        errorModal.addEventListener('click', (e) => {\n            if (e.target === errorModal) {\n                errorModal.remove()\n            }\n        })\n        \n        document.body.appendChild(errorModal)\n    }\n}\n</script>\n\n<style scoped>\n/* 模态框基础样式 */\n.file-modal {\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background: rgba(0,0,0,0.18);\n    z-index: 9999;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.file-content {\n    width: min(90vw, 480px);\n    max-height: min(90vh, 600px);\n    background: var(--bg-color, #fff);\n    border-radius: 12px;\n    box-shadow: 0 8px 32px rgba(0,0,0,0.18);\n    padding: clamp(12px, 2vw, 18px);\n    overflow-y: auto;\n}\n\n/* 头部样式 */\n.file-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-bottom: 16px;\n    border-bottom: 1px solid #eee;\n}\n\n.header-title {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n}\n\n.connection-status {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 0.8em;\n    color: #666;\n}\n\n.status-dot {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: #ccc;\n    transition: background-color 0.3s;\n}\n\n.status-dot.connected {\n    background: #4caf50;\n}\n\n.header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.refresh-btn,\n.sync-btn {\n    background: none;\n    border: none;\n    font-size: 1.2em;\n    cursor: pointer;\n    padding: 4px;\n    border-radius: 4px;\n    transition: background-color 0.2s;\n}\n\n.refresh-btn:hover,\n.sync-btn:hover {\n    background: #f0f0f0;\n}\n\n.close-btn {\n    background: none;\n    border: none;\n    font-size: 1.5em;\n    cursor: pointer;\n    color: var(--text-color);\n}\n\n/* 缓存统计样式 */\n.cache-stats {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px 12px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    font-size: 0.9em;\n    color: #666;\n    margin-bottom: 16px;\n}\n\n.clear-cache-btn {\n    background: none;\n    border: 1px solid #ddd;\n    padding: 4px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.8em;\n    transition: all 0.2s;\n}\n\n.clear-cache-btn:hover {\n    background: #f0f0f0;\n    border-color: #bbb;\n}\n\n/* 上传区域样式 */\n.upload-area {\n    margin: 20px 0;\n    border: 2px dashed #ddd;\n    border-radius: 8px;\n    padding: clamp(20px, 4vw, 40px);\n    text-align: center;\n    transition: all 0.3s ease;\n}\n\n.upload-area.dragging {\n    border-color: #666;\n    background: #f8f9fa;\n}\n\n.file-input {\n    display: none;\n}\n\n.upload-tip {\n    color: #666;\n}\n\n.upload-icon {\n    font-size: 2em;\n    margin-bottom: 12px;\n    display: block;\n}\n\n.upload-tip button {\n    color: #2196f3;\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 0 4px;\n}\n\n.sub-tip {\n    color: #999;\n    font-size: 0.9em;\n    margin-top: 8px;\n}\n\n.cache-tip {\n    color: #666;\n    font-size: 0.85em;\n    margin-top: 4px;\n    font-style: italic;\n}\n\n/* 文件列表样式 */\n.file-list {\n    margin-top: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.file-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 12px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    transition: all 0.2s;\n    position: relative;\n}\n\n.file-item:hover {\n    transform: translateX(4px);\n}\n\n.file-item.uploading {\n    opacity: 0.7;\n}\n\n.file-item.uploading::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 2px;\n    background: linear-gradient(90deg, #2196f3, #4caf50);\n    animation: progress 2s infinite;\n}\n\n@keyframes progress {\n    0% { transform: translateX(-100%); }\n    100% { transform: translateX(100%); }\n}\n\n.file-info {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    flex: 1;\n}\n\n.file-meta {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n}\n\n.file-name {\n    font-size: 0.95em;\n    font-weight: 500;\n}\n\n.file-size {\n    font-size: 0.8em;\n    color: #888;\n}\n\n.file-name.editing input {\n    width: 100%;\n    padding: 4px 8px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-size: inherit;\n}\n\n.file-status {\n    font-size: 0.8em;\n    padding: 2px 8px;\n    border-radius: 12px;\n    background: #eee;\n    font-weight: 500;\n}\n\n.file-status.local { background: #e3f2fd; color: #1976d2; }\n.file-status.uploading { background: #fff3e0; color: #f57c00; }\n.file-status.uploaded { background: #e8f5e9; color: #388e3c; }\n.file-status.error { background: #ffebee; color: #d32f2f; }\n\n.file-actions {\n    display: flex;\n    gap: 8px;\n}\n\n.file-actions button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 4px;\n    opacity: 0.7;\n    transition: opacity 0.2s;\n}\n\n.file-actions button:hover {\n    opacity: 1;\n}\n\n.preview-mode-btn {\n    font-size: 0.9em;\n}\n\n/* 同步对话框样式 */\n.sync-dialog {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 16px rgba(0,0,0,0.2);\n    z-index: 1000;\n    min-width: 300px;\n}\n\n.sync-dialog-content {\n    padding: 20px;\n    text-align: center;\n}\n\n.sync-dialog-content h3 {\n    margin: 0 0 12px 0;\n    color: #333;\n}\n\n.sync-dialog-content p {\n    margin: 0 0 20px 0;\n    color: #666;\n}\n\n.sync-options {\n    display: flex;\n    gap: 12px;\n    justify-content: center;\n}\n\n.sync-confirm-btn {\n    background: #4caf50;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n.sync-confirm-btn:hover {\n    background: #45a049;\n}\n\n.sync-cancel-btn {\n    background: #f0f0f0;\n    color: #666;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n.sync-cancel-btn:hover {\n    background: #e0e0e0;\n}\n\n/* 内联数据预览样式 */\n.inline-preview-overlay {\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background: rgba(0,0,0,0.5);\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 20px;\n}\n\n.inline-preview-content {\n    width: min(95vw, 900px);\n    height: min(90vh, 700px);\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 12px 40px rgba(0,0,0,0.3);\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n.inline-preview-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16px 20px;\n    border-bottom: 1px solid #eee;\n    background: #f8f9fa;\n}\n\n.inline-preview-header h4 {\n    margin: 0;\n    color: #333;\n    font-size: 1.1em;\n}\n\n.preview-header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.toggle-mode-btn {\n    background: none;\n    border: 1px solid #ddd;\n    padding: 6px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 1em;\n    transition: all 0.2s;\n}\n\n.toggle-mode-btn:hover {\n    background: #e0e0e0;\n    border-color: #bbb;\n}\n\n.close-preview-btn {\n    background: none;\n    border: none;\n    font-size: 1.5em;\n    cursor: pointer;\n    color: #666;\n    padding: 0;\n}\n\n.close-preview-btn:hover {\n    color: #333;\n}\n\n.inline-preview-table-wrapper {\n    flex: 1;\n    overflow: auto;\n    padding: 0;\n}\n\n.inline-preview-table {\n    width: 100%;\n    border-collapse: collapse;\n    font-size: 14px;\n}\n\n.inline-preview-table th,\n.inline-preview-table td {\n    padding: 10px 12px;\n    border-bottom: 1px solid #eee;\n    border-right: 1px solid #eee;\n    text-align: left;\n    vertical-align: top;\n}\n\n.inline-preview-table th {\n    background: #f8f9fa;\n    font-weight: 600;\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    border-bottom: 2px solid #ddd;\n}\n\n.inline-preview-table tr:hover {\n    background: #f8f9fa;\n}\n\n.inline-preview-table td:last-child,\n.inline-preview-table th:last-child {\n    border-right: none;\n}\n\n.inline-preview-empty {\n    text-align: center;\n    color: #999;\n    padding: 60px 20px;\n}\n\n.empty-icon {\n    font-size: 4em;\n    margin-bottom: 20px;\n    opacity: 0.5;\n}\n\n.empty-sub {\n    font-size: 0.9em;\n    color: #bbb;\n    margin-top: 8px;\n}\n\n.inline-preview-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 12px 20px;\n    border-top: 1px solid #eee;\n    background: #f8f9fa;\n}\n\n.preview-stats {\n    font-size: 0.9em;\n    color: #666;\n}\n\n.preview-actions {\n    display: flex;\n    gap: 8px;\n}\n\n.export-btn,\n.refresh-btn {\n    background: #007bff;\n    color: white;\n    border: none;\n    padding: 6px 12px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.85em;\n    transition: background-color 0.2s;\n}\n\n.export-btn:hover,\n.refresh-btn:hover {\n    background: #0056b3;\n}\n\n.refresh-btn {\n    background: #28a745;\n}\n\n.refresh-btn:hover {\n    background: #1e7e34;\n}\n\n/* 文件信息和数据预览按钮样式 */\n.file-info-btn, .data-preview-btn {\n    background: none;\n    border: 1px solid #ddd;\n    padding: 4px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 1em;\n    transition: all 0.2s;\n    margin-right: 4px;\n}\n\n.file-info-btn:hover {\n    background: #e3f2fd;\n    border-color: #2196f3;\n}\n\n.data-preview-btn:hover {\n    background: #e8f5e8;\n    border-color: #4caf50;\n}\n\n/* 文件信息模态框样式 */\n.file-info-modal {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n.file-info-modal h3 {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n/* 数据预览模态框样式 */\n.data-preview-modal {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n.data-preview-modal table {\n    font-size: 0.85em;\n}\n\n.data-preview-modal th {\n    background: #f8f9fa !important;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n}\n\n.data-preview-modal td {\n    font-size: 0.9em;\n    color: #333;\n}\n\n.data-preview-modal tr:hover {\n    background: #f5f5f5 !important;\n}\n\n/* 动画效果 */\n.fade-slide-enter-active,\n.fade-slide-leave-active {\n    transition: all 0.3s;\n}\n\n.fade-slide-enter-from,\n.fade-slide-leave-to {\n    opacity: 0;\n    transform: scale(0.95);\n}\n\n/* 响应式适配 */\n@media (max-width: 480px) {\n    .file-content {\n        width: 95vw;\n        margin: 10px;\n    }\n    \n    .upload-area {\n        padding: 15px;\n    }\n    \n    .file-item {\n        padding: 8px;\n    }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}