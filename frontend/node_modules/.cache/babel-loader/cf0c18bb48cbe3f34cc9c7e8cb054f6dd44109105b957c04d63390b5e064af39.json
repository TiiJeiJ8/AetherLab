{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch, reactive, nextTick } from 'vue';\nimport { chartIcons } from '../../assets/JS/SVG/chartIcons.js';\nimport { chartsTooltipConfig } from '../../assets/JS/Config/ChartsTooltipConfig.js';\nimport { chartTypeConfig } from '../../assets/JS/Config/ChartTypeConfig.js';\nimport AutoRenderToggle from '../Common/AutoRenderToggle.vue';\nimport ChartBasicConfig from './ChartBasicConfig.vue';\nimport ChartMappingConfig from './ChartMappingConfig.vue';\nimport ChartFilterConfig from './ChartFilterConfig.vue';\nimport ChartAdvancedConfig from './ChartAdvancedConfig.vue';\n\n// 当前类型的配置\nimport { fileDataMap } from '@/assets/JS/utils/dataStructureOptimize.js';\nexport default {\n  __name: 'ChartConfigPanel',\n  props: {\n    selectedChartType: {\n      type: String,\n      default: 'line'\n    },\n    currentFile: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['config-change', 'generate-chart', 'save-history'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const currentTypeConfig = computed(() => {\n      // 兼容首字母大写/小写\n      return chartTypeConfig[props.selectedChartType] || chartTypeConfig[props.selectedChartType.charAt(0).toUpperCase() + props.selectedChartType.slice(1)] || {};\n    });\n\n    // Props\n    const props = __props;\n\n    // Emits\n    const emit = __emit;\n    // 保存到历史区\n    function saveToHistory() {\n      // 触发保存事件，传递当前配置\n      emit('save-history', {\n        config: {\n          ...chartConfig.value\n        },\n        colorTheme: chartConfig.value.colorScheme || 'default'\n      });\n    }\n\n    // 响应式数据\n    const showDataFilter = ref(false);\n    const showAdvancedConfig = ref(false);\n    const errorMessage = ref('');\n    const tooltipRef = ref(null);\n\n    // 自动初始化/同步 lineSeriesStyles\n    watch([() => props.selectedChartType, () => chartConfig.value.yAxis, () => chartConfig.value.series, () => mainRawData.value], ([type, yAxis, series, rawData]) => {\n      if ((type === 'line' || type === 'Line') && yAxis && (Array.isArray(yAxis) ? yAxis.length > 0 : yAxis.field)) {\n        // 获取系列名数组\n        let yArr = [];\n        if (Array.isArray(yAxis)) {\n          yArr = yAxis.map(y => y.field).filter(Boolean);\n        } else if (yAxis.field) {\n          yArr = [yAxis.field];\n        }\n        // 获取数据点数\n        let dataLen = 0;\n        if (rawData && rawData.length > 0 && chartConfig.value.xAxis && chartConfig.value.xAxis.field) {\n          dataLen = rawData.length;\n        }\n        // 生成默认样式\n        const defaultLineTypes = ['solid', 'dashed', 'dotted'];\n        const defaultSymbols = ['circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'];\n        if (!chartConfig.value.lineSeriesStyles || !Array.isArray(chartConfig.value.lineSeriesStyles)) {\n          chartConfig.value.lineSeriesStyles = [];\n        }\n        // 补全/同步每个系列\n        yArr.forEach((field, idx) => {\n          if (!chartConfig.value.lineSeriesStyles[idx]) {\n            chartConfig.value.lineSeriesStyles[idx] = {};\n          }\n          const style = chartConfig.value.lineSeriesStyles[idx];\n          style.seriesName = field;\n          if (!style.lineType) style.lineType = defaultLineTypes[idx % defaultLineTypes.length];\n          if (!style.lineColor) style.lineColor = '';\n          if (!style.lineWidth) style.lineWidth = 2;\n          if (typeof style.pointUnified !== 'boolean') style.pointUnified = true;\n          if (!style.pointSymbol) style.pointSymbol = defaultSymbols[idx % defaultSymbols.length];\n          if (!style.pointColor) style.pointColor = '';\n          // points: 每个点的样式\n          if (!Array.isArray(style.points)) {\n            style.points = [];\n          }\n          for (let i = 0; i < dataLen; i++) {\n            if (!style.points[i]) {\n              style.points[i] = {\n                symbol: style.pointSymbol,\n                color: style.pointColor,\n                size: 8\n              };\n            }\n          }\n          // 若数据点减少，裁剪多余\n          if (style.points.length > dataLen) {\n            style.points.length = dataLen;\n          }\n        });\n        // 若系列减少，裁剪多余\n        if (chartConfig.value.lineSeriesStyles.length > yArr.length) {\n          chartConfig.value.lineSeriesStyles.length = yArr.length;\n        }\n      }\n    }, {\n      immediate: true,\n      deep: true\n    });\n\n    // 自动渲染开关，默认手动渲染\n    const autoRender = ref(false);\n\n    // 提示框状态\n    const tooltip = reactive({\n      visible: false,\n      type: '',\n      description: '',\n      dataRequirements: [],\n      useCases: [],\n      style: {}\n    });\n    let tooltipTimeout = null;\n\n    // 拖拽状态\n    const isDragOver = ref({\n      xAxis: false,\n      yAxis: false,\n      series: false\n    });\n    const dragError = ref({\n      xAxis: false,\n      yAxis: false,\n      series: false\n    });\n\n    // 图表配置\n    const chartConfig = ref({\n      xAxis: {\n        field: '',\n        type: ''\n      },\n      yAxis: {\n        field: '',\n        type: ''\n      },\n      series: [],\n      title: '',\n      colorScheme: 'default',\n      animation: true,\n      dataRange: 'all',\n      nullHandling: 'ignoreNull'\n    });\n\n    // 合并mapping字段，保留其它字段\n    function onMappingModelUpdate(mapping) {\n      // 只合并mappingConfig中定义的key，其它字段保留\n      const mappingKeys = (currentTypeConfig.value.mapping || []).map(item => item.key);\n      const newConfig = {\n        ...chartConfig.value\n      };\n      mappingKeys.forEach(key => {\n        newConfig[key] = mapping[key];\n      });\n      chartConfig.value = newConfig;\n      emit('config-change', chartConfig.value);\n    }\n\n    // 需要显示 Null Handling 的图表类型\n    const showNullHandlingTypes = ['Unknown', 'Line', 'Bar', 'Scatter', 'Candlestick', 'Radar', 'Boxplot', 'Heatmap', 'Parallel', 'Gauge', 'ThemeRiver', 'PictorialBar'];\n    // 判断当前类型是否需要显示 Null Handling\n    const showNullHandling = computed(() => {\n      const type = props.selectedChartType;\n      if (!type) return false;\n      // 兼容首字母大写/小写\n      const normalized = type.charAt(0).toUpperCase() + type.slice(1).toLowerCase();\n      return showNullHandlingTypes.includes(normalized);\n    });\n\n    // chartData自动获取当前用于绘图的数据来判断是否具有缺失值\n    const chartData = computed(() => props.chartData || []);\n\n    // 计算属性\n    const isConfigValid = computed(() => {\n      const type = (props.selectedChartType || '').toLowerCase();\n      const cfg = chartConfig.value;\n      console.log('Current chart type:', type, 'with config:', JSON.parse(JSON.stringify(cfg)));\n      if (['line', 'bar', 'scatter'].includes(type)) {\n        const xValid = cfg.xAxis && cfg.xAxis.field;\n        const y = cfg.yAxis;\n        const yValid = Array.isArray(y) ? y.length > 0 : y && y.field;\n        return xValid && yValid;\n      }\n      if (['pie'].includes(type)) {\n        // category/value 结构\n        const cat = cfg.category;\n        const val = cfg.value;\n        return cat && cat.field && val && val.field;\n      }\n      if (['candlestick'].includes(type)) {\n        return cfg.time && cfg.time.field && cfg.open && cfg.open.field && cfg.close && cfg.close.field && cfg.high && cfg.high.field && cfg.low && cfg.low.field;\n      }\n      if (['heatmap'].includes(type)) {\n        return cfg.xAxis && cfg.xAxis.field && cfg.yAxis && cfg.yAxis.field && cfg.value && cfg.value.field;\n      }\n      if (['radar'].includes(type)) {\n        return Array.isArray(cfg.indicator) && cfg.indicator.length > 0 && Array.isArray(cfg.value) && cfg.value.length > 0;\n      }\n      if (['boxplot'].includes(type)) {\n        return cfg.category && cfg.category.field;\n      }\n      if (['graph'].includes(type)) {\n        return cfg.nodeID && cfg.nodeID.field && cfg.edgeSource && cfg.edgeSource.field && cfg.edgeTarget && cfg.edgeTarget.field;\n      }\n      if (['tree'].includes(type)) {\n        return cfg.nodeID && cfg.nodeID.field && cfg.parentID && cfg.parentID.field;\n      }\n      if (['treemap', 'sunburst'].includes(type)) {\n        return cfg.nodeID && cfg.nodeID.field && cfg.parentID && cfg.parentID.field;\n      }\n      if (['parallel'].includes(type)) {\n        return Array.isArray(cfg.dimensions) && cfg.dimensions.length > 0 && cfg.dimensions.every(dim => dim.field);\n      }\n      if (['sankey'].includes(type)) {\n        return cfg.source && cfg.source.field && cfg.target && cfg.target.field && cfg.value && cfg.value.field;\n      }\n      if (['funnel'].includes(type)) {\n        return cfg.stage && cfg.stage.field && cfg.value && cfg.value.field;\n      }\n      if (['gauge'].includes(type)) {\n        return cfg.value && cfg.value.field;\n      }\n      if (['pictorialbar'].includes(type)) {\n        return cfg.category && cfg.category.field && cfg.value && cfg.value.field;\n      }\n      if (['themeriver'].includes(type)) {\n        return cfg.date && cfg.date.field && cfg.value && cfg.value.field;\n      }\n      if (['calendar'].includes(type)) {\n        return cfg.date && cfg.date.field;\n      }\n    });\n\n    // 监听 chartConfig 变化，自动渲染\n    watch(chartConfig, val => {\n      if (autoRender.value && isConfigValid.value) {\n        emit('generate-chart', chartConfig.value);\n      }\n      console.log('Current chartConfig:', JSON.parse(JSON.stringify(val)));\n    }, {\n      deep: true\n    });\n\n    // 监听自动渲染开关变化，切换为实时时立即渲染\n    watch(autoRender, val => {\n      if (val && isConfigValid.value) {\n        emit('generate-chart', chartConfig.value);\n      }\n    });\n    function getChartIcon(type) {\n      // 直接使用传入的类型，chartIcons.js 中的键是首字母大写格式\n      return chartIcons[type] || '';\n    }\n    function toggleDataFilter() {\n      showDataFilter.value = !showDataFilter.value;\n    }\n    function toggleAdvancedConfig() {\n      showAdvancedConfig.value = !showAdvancedConfig.value;\n    }\n\n    // 显示提示框\n    function showTooltip(event, type) {\n      // 清除之前的定时器\n      if (tooltipTimeout) {\n        clearTimeout(tooltipTimeout);\n      }\n\n      // 设置1.2秒延迟\n      tooltipTimeout = setTimeout(() => {\n        const config = chartsTooltipConfig[type];\n        if (config) {\n          tooltip.type = type;\n          tooltip.description = config.description;\n          tooltip.dataRequirements = config.dataRequirements;\n          tooltip.useCases = config.useCases;\n          tooltip.visible = true;\n\n          // 在下一个tick中计算位置，确保DOM已更新\n          nextTick(() => {\n            positionTooltip(event);\n          });\n        }\n      }, 1200); // 1.2秒延迟\n    }\n\n    // 隐藏提示框\n    function hideTooltip() {\n      if (tooltipTimeout) {\n        clearTimeout(tooltipTimeout);\n        tooltipTimeout = null;\n      }\n      tooltip.visible = false;\n    }\n\n    // 计算提示框位置，确保不超出屏幕\n    function positionTooltip(event) {\n      if (!tooltipRef.value) return;\n      const tooltipEl = tooltipRef.value;\n      const rect = tooltipEl.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n      let left = event.pageX + 10;\n      let top = event.pageY + 10;\n\n      // 防止右边超出屏幕\n      if (left + rect.width > viewportWidth) {\n        left = event.pageX - rect.width - 10;\n      }\n\n      // 防止底部超出屏幕\n      if (top + rect.height > viewportHeight) {\n        top = event.pageY - rect.height - 10;\n      }\n\n      // 防止左边超出屏幕\n      if (left < 0) {\n        left = 10;\n      }\n\n      // 防止顶部超出屏幕\n      if (top < 0) {\n        top = 10;\n      }\n      tooltip.style = {\n        left: `${left}px`,\n        top: `${top}px`,\n        position: 'fixed',\n        zIndex: 1000\n      };\n    }\n\n    // 拖拽处理\n    function handleDragEnter(target) {\n      isDragOver.value[target] = true;\n      dragError.value[target] = false;\n    }\n    function handleDragLeave(target) {\n      isDragOver.value[target] = false;\n    }\n    function handleDragOver(event, target) {\n      event.preventDefault();\n      isDragOver.value[target] = true;\n    }\n    function handleDrop(event, target) {\n      event.preventDefault();\n      isDragOver.value[target] = false;\n      try {\n        const dragData = JSON.parse(event.dataTransfer.getData('text/plain'));\n        if (dragData.type === 'column') {\n          const column = dragData.column;\n\n          // 验证数据类型是否适合目标区域\n          if (validateColumnForTarget(column, target)) {\n            mapColumnToTarget(column, target);\n            errorMessage.value = '';\n          } else {\n            dragError.value[target] = true;\n            errorMessage.value = `Column \"${column.name}\" data type is not suitable for ${getTargetName(target)}`;\n            setTimeout(() => {\n              dragError.value[target] = false;\n              errorMessage.value = '';\n            }, 3000);\n          }\n        }\n      } catch (error) {\n        console.error('Drop failed:', error);\n        errorMessage.value = 'Drag and drop failed, please try again';\n      }\n    }\n    function validateColumnForTarget(column, target) {\n      const columnType = column.type;\n      switch (target) {\n        case 'xAxis':\n          // X轴通常接受类别型数据\n          return ['string', 'category', 'date'].includes(columnType);\n        case 'yAxis':\n          // Y轴通常接受数值型数据\n          return ['number', 'integer'].includes(columnType);\n        case 'series':\n          // 系列数据通常接受数值型数据\n          return ['number', 'integer'].includes(columnType);\n        default:\n          return true;\n      }\n    }\n    function mapColumnToTarget(column, target) {\n      switch (target) {\n        case 'xAxis':\n          chartConfig.value.xAxis = {\n            field: column.name,\n            type: column.type\n          };\n          break;\n        case 'yAxis':\n          chartConfig.value.yAxis = {\n            field: column.name,\n            type: column.type\n          };\n          break;\n        case 'series':\n          // 系列可以有多个，但这里简化为单个\n          chartConfig.value.series = [{\n            field: column.name,\n            type: column.type\n          }];\n          break;\n      }\n      emit('config-change', chartConfig.value);\n    }\n    function removeMapping(target) {\n      switch (target) {\n        case 'xAxis':\n          chartConfig.value.xAxis = {\n            field: '',\n            type: ''\n          };\n          break;\n        case 'yAxis':\n          chartConfig.value.yAxis = {\n            field: '',\n            type: ''\n          };\n          break;\n        case 'series':\n          chartConfig.value.series = [];\n          break;\n      }\n      emit('config-change', chartConfig.value);\n    }\n    function removeSeriesMapping(index) {\n      chartConfig.value.series.splice(index, 1);\n      emit('config-change', chartConfig.value);\n    }\n    function getTargetName(target) {\n      const names = {\n        xAxis: 'X Axis',\n        yAxis: 'Y Axis',\n        series: 'Data Series'\n      };\n      return names[target] || target;\n    }\n    function generateChart() {\n      if (!isConfigValid.value) {\n        errorMessage.value = 'Please complete the required data mapping configuration';\n        return;\n      }\n      emit('generate-chart', chartConfig.value);\n    }\n    function resetConfig() {\n      chartConfig.value = {\n        xAxis: {\n          field: '',\n          type: ''\n        },\n        yAxis: {\n          field: '',\n          type: ''\n        },\n        series: [],\n        title: '',\n        colorScheme: 'default',\n        animation: chartConfig.value.animation,\n        dataRange: 'all',\n        nullHandling: 'ignoreNull'\n      };\n      errorMessage.value = '';\n      emit('config-change', chartConfig.value);\n    }\n    const mainRawData = computed(() => {\n      // 以当前结构文件为主\n      if (props.currentFile && props.currentFile.name && fileDataMap.value[props.currentFile.name]) {\n        return fileDataMap.value[props.currentFile.name];\n      }\n      return [];\n    });\n\n    // 监听图表类型变化\n    watch(() => props.selectedChartType, newType => {\n      // 根据图表类型调整配置\n      if (newType === 'Pie' || newType === 'pie') {\n        // 饼图不需要Y轴\n        chartConfig.value.yAxis = {\n          field: '',\n          type: ''\n        };\n      }\n      // 自动渲染开启时，切换类型后立即触发渲染\n      if (autoRender.value && isConfigValid.value) {\n        emit('generate-chart', chartConfig.value);\n      }\n    });\n    const __returned__ = {\n      currentTypeConfig,\n      props,\n      emit,\n      saveToHistory,\n      showDataFilter,\n      showAdvancedConfig,\n      errorMessage,\n      tooltipRef,\n      autoRender,\n      tooltip,\n      get tooltipTimeout() {\n        return tooltipTimeout;\n      },\n      set tooltipTimeout(v) {\n        tooltipTimeout = v;\n      },\n      isDragOver,\n      dragError,\n      chartConfig,\n      onMappingModelUpdate,\n      showNullHandlingTypes,\n      showNullHandling,\n      chartData,\n      isConfigValid,\n      getChartIcon,\n      toggleDataFilter,\n      toggleAdvancedConfig,\n      showTooltip,\n      hideTooltip,\n      positionTooltip,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragOver,\n      handleDrop,\n      validateColumnForTarget,\n      mapColumnToTarget,\n      removeMapping,\n      removeSeriesMapping,\n      getTargetName,\n      generateChart,\n      resetConfig,\n      mainRawData,\n      ref,\n      computed,\n      watch,\n      reactive,\n      nextTick,\n      get chartIcons() {\n        return chartIcons;\n      },\n      get chartsTooltipConfig() {\n        return chartsTooltipConfig;\n      },\n      get chartTypeConfig() {\n        return chartTypeConfig;\n      },\n      AutoRenderToggle,\n      ChartBasicConfig,\n      ChartMappingConfig,\n      ChartFilterConfig,\n      ChartAdvancedConfig,\n      get fileDataMap() {\n        return fileDataMap;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","reactive","nextTick","chartIcons","chartsTooltipConfig","chartTypeConfig","AutoRenderToggle","ChartBasicConfig","ChartMappingConfig","ChartFilterConfig","ChartAdvancedConfig","fileDataMap","currentTypeConfig","props","selectedChartType","charAt","toUpperCase","slice","__props","emit","__emit","saveToHistory","config","chartConfig","value","colorTheme","colorScheme","showDataFilter","showAdvancedConfig","errorMessage","tooltipRef","yAxis","series","mainRawData","type","rawData","Array","isArray","length","field","yArr","map","y","filter","Boolean","dataLen","xAxis","defaultLineTypes","defaultSymbols","lineSeriesStyles","forEach","idx","style","seriesName","lineType","lineColor","lineWidth","pointUnified","pointSymbol","pointColor","points","i","symbol","color","size","immediate","deep","autoRender","tooltip","visible","description","dataRequirements","useCases","tooltipTimeout","isDragOver","dragError","title","animation","dataRange","nullHandling","onMappingModelUpdate","mapping","mappingKeys","item","key","newConfig","showNullHandlingTypes","showNullHandling","normalized","toLowerCase","includes","chartData","isConfigValid","cfg","console","log","JSON","parse","stringify","xValid","yValid","cat","category","val","time","open","close","high","low","indicator","nodeID","edgeSource","edgeTarget","parentID","dimensions","every","dim","source","target","stage","date","getChartIcon","toggleDataFilter","toggleAdvancedConfig","showTooltip","event","clearTimeout","setTimeout","positionTooltip","hideTooltip","tooltipEl","rect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","left","pageX","top","pageY","width","height","position","zIndex","handleDragEnter","handleDragLeave","handleDragOver","preventDefault","handleDrop","dragData","dataTransfer","getData","column","validateColumnForTarget","mapColumnToTarget","name","getTargetName","error","columnType","removeMapping","removeSeriesMapping","index","splice","names","generateChart","resetConfig","currentFile","newType"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/Chart/ChartConfigPanel.vue"],"sourcesContent":["<template>\n<div class=\"chart-config-panel\">\n    <!-- 右侧边栏总标题 -->\n    <div class=\"panel-header-CCP\" style=\"position: relative; display: flex; align-items: center; justify-content: space-between;\">\n        <h3 style=\"margin: 0;\">\n            Chart Configuration\n        </h3>\n        <!-- 图表类型及相关提示 -->\n        <div\n            class=\"chart-type-tag\"\n            @mouseenter=\"showTooltip($event, props.selectedChartType)\"\n            @mouseleave=\"hideTooltip\"\n            style=\"position: relative; max-width: 50%; white-space: normal; word-break: break-all; text-align: right; right: 0; margin-right: 3%;\"\n        >\n            <span class=\"chart-type-icon\" v-html=\"getChartIcon(selectedChartType)\"></span>\n            <span class=\"chart-type-name\">{{ selectedChartType }}</span>\n        </div>\n    </div>\n\n    <!-- 动态数据映射配置区域 -->\n    <div class=\"mapping-section-toggle-wrapper\">\n        <ChartMappingConfig\n            v-if=\"currentTypeConfig.mapping\"\n            :mappingConfig=\"currentTypeConfig.mapping\"\n            :modelValue=\"chartConfig\"\n            @update:modelValue=\"onMappingModelUpdate\"\n        >\n            <template #title-append>\n            <!-- 自动渲染开关 -->\n            <AutoRenderToggle v-model=\"autoRender\" />\n            </template>\n        </ChartMappingConfig>\n    </div>\n\n    <!-- 基础配置区域：所有图表通用配置 -->\n    <ChartBasicConfig\n        v-model=\"chartConfig\"\n        :show-null-handling=\"showNullHandling\"\n        :chart-data=\"chartData\"\n        :chart-type=\"selectedChartType\"\n    />\n\n    <!-- 动态数据过滤配置区域 -->\n    <ChartFilterConfig\n        v-model=\"chartConfig\"\n        :rawData=\"mainRawData\"\n    />\n\n    <!-- 动态高级配置区域 -->\n    <ChartAdvancedConfig\n        v-if=\"currentTypeConfig.advanced && currentTypeConfig.advanced.length\"\n        :advancedConfig=\"currentTypeConfig.advanced\"\n        v-model=\"chartConfig\"\n    />\n\n    <!-- 操作按钮 -->\n    <div class=\"action-section\">\n        <!-- 应用配置按钮 -->\n        <button\n            class=\"apply-btn\"\n            :disabled=\"autoRender || !isConfigValid\"\n            @click=\"generateChart\"\n        >\n        Apply Configuration\n        </button>\n        <!-- 重置配置按钮 -->\n        <button class=\"reset-btn\" @click=\"resetConfig\">\n        Reset Configuration\n        </button>\n    </div>\n\n    <!-- 保存至图表历史区按钮 -->\n    <button\n        class=\"save-history-btn\"\n        @click=\"saveToHistory\"\n    >\n        Save to History\n    </button>\n\n    <!-- 错误提示 -->\n    <div v-if=\"errorMessage\" class=\"error-message\">\n        <div class=\"error-text\">{{ errorMessage }}</div>\n    </div>\n\n    <!-- 提示框 -->\n    <div\n        v-if=\"tooltip.visible\"\n        class=\"chart-tooltip\"\n        :style=\"tooltip.style\"\n        ref=\"tooltipRef\"\n    >\n        <div class=\"tooltip-header\">\n            <span class=\"tooltip-title\">{{ tooltip.type }}</span>\n            <span class=\"tooltip-description\">{{ tooltip.description }}</span>\n        </div>\n        <div class=\"tooltip-section\">\n            <h4>Data Requirements</h4>\n            <div class=\"tooltip-tags\">\n                <span\n                    v-for=\"requirement in tooltip.dataRequirements\"\n                    :key=\"requirement\"\n                    class=\"tooltip-tag data-tag\"\n                >\n                    {{ requirement }}\n                </span>\n            </div>\n        </div>\n        <div class=\"tooltip-section\">\n            <h4>Use Cases</h4>\n            <div class=\"tooltip-tags\">\n                <span\n                    v-for=\"useCase in tooltip.useCases\"\n                    :key=\"useCase\"\n                    class=\"tooltip-tag use-case-tag\"\n                >\n                    {{ useCase }}\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, computed, watch, reactive, nextTick } from 'vue'\nimport { chartIcons } from '../../assets/JS/SVG/chartIcons.js'\nimport { chartsTooltipConfig } from '../../assets/JS/Config/ChartsTooltipConfig.js'\nimport { chartTypeConfig } from '../../assets/JS/Config/ChartTypeConfig.js'\nimport AutoRenderToggle from '../Common/AutoRenderToggle.vue'\nimport ChartBasicConfig from './ChartBasicConfig.vue'\nimport ChartMappingConfig from './ChartMappingConfig.vue'\nimport ChartFilterConfig from './ChartFilterConfig.vue'\nimport ChartAdvancedConfig from './ChartAdvancedConfig.vue'\n\n// 当前类型的配置\nconst currentTypeConfig = computed(() => {\n    // 兼容首字母大写/小写\n    return chartTypeConfig[props.selectedChartType] || chartTypeConfig[props.selectedChartType.charAt(0).toUpperCase() + props.selectedChartType.slice(1)] || {}\n})\n\n// Props\nconst props = defineProps({\n    selectedChartType: {\n        type: String,\n        default: 'line'\n    },\n    currentFile: {\n        type: Object,\n        default: null\n    },\n})\n\n// Emits\nconst emit = defineEmits(['config-change', 'generate-chart', 'save-history'])\n// 保存到历史区\nfunction saveToHistory() {\n    // 触发保存事件，传递当前配置\n    emit('save-history', {\n        config: { ...chartConfig.value },\n        colorTheme: chartConfig.value.colorScheme || 'default',\n    })\n}\n\n// 响应式数据\nconst showDataFilter = ref(false)\nconst showAdvancedConfig = ref(false)\nconst errorMessage = ref('')\nconst tooltipRef = ref(null)\n\n// 自动初始化/同步 lineSeriesStyles\nwatch([\n  () => props.selectedChartType,\n  () => chartConfig.value.yAxis,\n  () => chartConfig.value.series,\n  () => mainRawData.value\n], ([type, yAxis, series, rawData]) => {\n  if ((type === 'line' || type === 'Line') && yAxis && (Array.isArray(yAxis) ? yAxis.length > 0 : yAxis.field)) {\n    // 获取系列名数组\n    let yArr = [];\n    if (Array.isArray(yAxis)) {\n      yArr = yAxis.map(y => y.field).filter(Boolean);\n    } else if (yAxis.field) {\n      yArr = [yAxis.field];\n    }\n    // 获取数据点数\n    let dataLen = 0;\n    if (rawData && rawData.length > 0 && chartConfig.value.xAxis && chartConfig.value.xAxis.field) {\n      dataLen = rawData.length;\n    }\n    // 生成默认样式\n    const defaultLineTypes = ['solid', 'dashed', 'dotted'];\n    const defaultSymbols = ['circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'];\n    if (!chartConfig.value.lineSeriesStyles || !Array.isArray(chartConfig.value.lineSeriesStyles)) {\n      chartConfig.value.lineSeriesStyles = [];\n    }\n    // 补全/同步每个系列\n    yArr.forEach((field, idx) => {\n      if (!chartConfig.value.lineSeriesStyles[idx]) {\n        chartConfig.value.lineSeriesStyles[idx] = {};\n      }\n      const style = chartConfig.value.lineSeriesStyles[idx];\n      style.seriesName = field;\n      if (!style.lineType) style.lineType = defaultLineTypes[idx % defaultLineTypes.length];\n      if (!style.lineColor) style.lineColor = '';\n      if (!style.lineWidth) style.lineWidth = 2;\n      if (typeof style.pointUnified !== 'boolean') style.pointUnified = true;\n      if (!style.pointSymbol) style.pointSymbol = defaultSymbols[idx % defaultSymbols.length];\n      if (!style.pointColor) style.pointColor = '';\n      // points: 每个点的样式\n      if (!Array.isArray(style.points)) {\n        style.points = [];\n      }\n      for (let i = 0; i < dataLen; i++) {\n        if (!style.points[i]) {\n          style.points[i] = {\n            symbol: style.pointSymbol,\n            color: style.pointColor,\n            size: 8\n          };\n        }\n      }\n      // 若数据点减少，裁剪多余\n      if (style.points.length > dataLen) {\n        style.points.length = dataLen;\n      }\n    });\n    // 若系列减少，裁剪多余\n    if (chartConfig.value.lineSeriesStyles.length > yArr.length) {\n      chartConfig.value.lineSeriesStyles.length = yArr.length;\n    }\n  }\n}, { immediate: true, deep: true });\n\n// 自动渲染开关，默认手动渲染\nconst autoRender = ref(false)\n\n// 提示框状态\nconst tooltip = reactive({\n    visible: false,\n    type: '',\n    description: '',\n    dataRequirements: [],\n    useCases: [],\n    style: {}\n})\n\nlet tooltipTimeout = null\n\n// 拖拽状态\nconst isDragOver = ref({\n    xAxis: false,\n    yAxis: false,\n    series: false\n})\n\nconst dragError = ref({\n    xAxis: false,\n    yAxis: false,\n    series: false\n})\n\n// 图表配置\nconst chartConfig = ref({\n    xAxis: {\n        field: '',\n        type: ''\n    },\n    yAxis: {\n        field: '',\n        type: ''\n    },\n    series: [],\n    title: '',\n    colorScheme: 'default',\n    animation: true,\n    dataRange: 'all',\n    nullHandling: 'ignoreNull'\n})\n\n// 合并mapping字段，保留其它字段\nfunction onMappingModelUpdate(mapping) {\n    // 只合并mappingConfig中定义的key，其它字段保留\n    const mappingKeys = (currentTypeConfig.value.mapping || []).map(item => item.key)\n    const newConfig = { ...chartConfig.value }\n    mappingKeys.forEach(key => {\n        newConfig[key] = mapping[key]\n    })\n    chartConfig.value = newConfig\n    emit('config-change', chartConfig.value)\n}\n\n// 需要显示 Null Handling 的图表类型\nconst showNullHandlingTypes = [\n    'Unknown', 'Line', 'Bar', 'Scatter', 'Candlestick', 'Radar',\n    'Boxplot', 'Heatmap', 'Parallel', 'Gauge', 'ThemeRiver', 'PictorialBar'\n]\n// 判断当前类型是否需要显示 Null Handling\nconst showNullHandling = computed(() => {\n    const type = props.selectedChartType\n    if (!type) return false\n    // 兼容首字母大写/小写\n    const normalized = type.charAt(0).toUpperCase() + type.slice(1).toLowerCase()\n    return showNullHandlingTypes.includes(normalized)\n})\n\n// chartData自动获取当前用于绘图的数据来判断是否具有缺失值\nconst chartData = computed(() => props.chartData || [])\n\n// 计算属性\nconst isConfigValid = computed(() => {\n    const type = (props.selectedChartType || '').toLowerCase();\n    const cfg = chartConfig.value;\n    console.log('Current chart type:', type, 'with config:', JSON.parse(JSON.stringify(cfg)));\n    if (['line', 'bar', 'scatter'].includes(type)) {\n        const xValid = cfg.xAxis && cfg.xAxis.field;\n        const y = cfg.yAxis;\n        const yValid = Array.isArray(y) ? y.length > 0 : (y && y.field);\n        return xValid && yValid;\n    }\n    if (['pie'].includes(type)) {\n        // category/value 结构\n        const cat = cfg.category;\n        const val = cfg.value;\n        return cat && cat.field && val && val.field;\n    }\n    if (['candlestick'].includes(type)) {\n        return  cfg.time && cfg.time.field &&\n            cfg.open && cfg.open.field &&\n            cfg.close && cfg.close.field &&\n            cfg.high && cfg.high.field &&\n            cfg.low && cfg.low.field;\n    }\n    if (['heatmap'].includes(type)) {\n        return cfg.xAxis && cfg.xAxis.field &&\n            cfg.yAxis && cfg.yAxis.field &&\n            cfg.value && cfg.value.field;\n    }\n    if (['radar'].includes(type)) {\n        return Array.isArray(cfg.indicator) && cfg.indicator.length > 0 &&\n        Array.isArray(cfg.value) && cfg.value.length > 0;\n    }\n    if (['boxplot'].includes(type)) {\n        return cfg.category && cfg.category.field\n    }\n    if (['graph'].includes(type)) {\n        return cfg.nodeID && cfg.nodeID.field &&\n            cfg.edgeSource && cfg.edgeSource.field &&\n            cfg.edgeTarget && cfg.edgeTarget.field;\n    }\n    if (['tree'].includes(type)) {\n        return ( cfg.nodeID && cfg.nodeID.field && cfg.parentID && cfg.parentID.field )\n    }\n    if (['treemap', 'sunburst'].includes(type)) {\n        return ( cfg.nodeID && cfg.nodeID.field &&\n            cfg.parentID && cfg.parentID.field )\n    }\n    if (['parallel'].includes(type)) {\n        return Array.isArray(cfg.dimensions) && cfg.dimensions.length > 0 &&\n            cfg.dimensions.every(dim => dim.field);\n    }\n    if (['sankey'].includes(type)) {\n        return cfg.source && cfg.source.field &&\n            cfg.target && cfg.target.field &&\n            cfg.value && cfg.value.field;\n    }\n    if (['funnel'].includes(type)) {\n        return cfg.stage && cfg.stage.field &&\n            cfg.value && cfg.value.field;\n    }\n    if (['gauge'].includes(type)) {\n        return cfg.value && cfg.value.field;\n    }\n    if (['pictorialbar'].includes(type)) {\n        return cfg.category && cfg.category.field &&\n            cfg.value && cfg.value.field;\n    }\n    if (['themeriver'].includes(type)) {\n        return cfg.date && cfg.date.field &&\n            cfg.value && cfg.value.field;\n    }\n    if (['calendar'].includes(type)) {\n        return cfg.date && cfg.date.field;\n    }\n});\n\n// 监听 chartConfig 变化，自动渲染\nwatch(chartConfig, (val) => {\n    if (autoRender.value && isConfigValid.value) {\n        emit('generate-chart', chartConfig.value)\n    }\n    console.log('Current chartConfig:', JSON.parse(JSON.stringify(val)))\n}, { deep: true })\n\n// 监听自动渲染开关变化，切换为实时时立即渲染\nwatch(autoRender, (val) => {\n    if (val && isConfigValid.value) {\n        emit('generate-chart', chartConfig.value)\n    }\n})\n\nfunction getChartIcon (type) {\n    // 直接使用传入的类型，chartIcons.js 中的键是首字母大写格式\n    return chartIcons[type] || ''\n}\n\nfunction toggleDataFilter() {\n    showDataFilter.value = !showDataFilter.value\n}\n\nfunction toggleAdvancedConfig() {\n    showAdvancedConfig.value = !showAdvancedConfig.value\n}\n\n// 显示提示框\nfunction showTooltip(event, type) {\n    // 清除之前的定时器\n    if (tooltipTimeout) {\n        clearTimeout(tooltipTimeout)\n    }\n    \n    // 设置1.2秒延迟\n    tooltipTimeout = setTimeout(() => {\n        const config = chartsTooltipConfig[type]\n        if (config) {\n            tooltip.type = type\n            tooltip.description = config.description\n            tooltip.dataRequirements = config.dataRequirements\n            tooltip.useCases = config.useCases\n            tooltip.visible = true\n            \n            // 在下一个tick中计算位置，确保DOM已更新\n            nextTick(() => {\n                positionTooltip(event)\n            })\n        }\n    }, 1200) // 1.2秒延迟\n}\n\n// 隐藏提示框\nfunction hideTooltip() {\n    if (tooltipTimeout) {\n        clearTimeout(tooltipTimeout)\n        tooltipTimeout = null\n    }\n    tooltip.visible = false\n}\n\n// 计算提示框位置，确保不超出屏幕\nfunction positionTooltip(event) {\n    if (!tooltipRef.value) return\n    \n    const tooltipEl = tooltipRef.value\n    const rect = tooltipEl.getBoundingClientRect()\n    const viewportWidth = window.innerWidth\n    const viewportHeight = window.innerHeight\n    \n    let left = event.pageX + 10\n    let top = event.pageY + 10\n    \n    // 防止右边超出屏幕\n    if (left + rect.width > viewportWidth) {\n        left = event.pageX - rect.width - 10\n    }\n    \n    // 防止底部超出屏幕\n    if (top + rect.height > viewportHeight) {\n        top = event.pageY - rect.height - 10\n    }\n    \n    // 防止左边超出屏幕\n    if (left < 0) {\n        left = 10\n    }\n    \n    // 防止顶部超出屏幕\n    if (top < 0) {\n        top = 10\n    }\n    \n    tooltip.style = {\n        left: `${left}px`,\n        top: `${top}px`,\n        position: 'fixed',\n        zIndex: 1000\n    }\n}\n\n// 拖拽处理\nfunction handleDragEnter (target) {\n    isDragOver.value[target] = true\n    dragError.value[target] = false\n    }\n\nfunction handleDragLeave (target) {\n    isDragOver.value[target] = false\n}\n\nfunction handleDragOver (event, target) {\n    event.preventDefault()\n    isDragOver.value[target] = true\n}\n\nfunction handleDrop (event, target) {\n    event.preventDefault()\n    isDragOver.value[target] = false\n\n    try {\n        const dragData = JSON.parse(event.dataTransfer.getData('text/plain'))\n\n        if (dragData.type === 'column') {\n        const column = dragData.column\n\n        // 验证数据类型是否适合目标区域\n        if (validateColumnForTarget(column, target)) {\n            mapColumnToTarget(column, target)\n            errorMessage.value = ''\n        } else {\n            dragError.value[target] = true\n            errorMessage.value = `Column \"${column.name}\" data type is not suitable for ${getTargetName(target)}`\n            setTimeout(() => {\n            dragError.value[target] = false\n            errorMessage.value = ''\n            }, 3000)\n        }\n        }\n    } catch (error) {\n        console.error('Drop failed:', error)\n        errorMessage.value = 'Drag and drop failed, please try again'\n    }\n}\n\nfunction validateColumnForTarget (column, target) {\n    const columnType = column.type\n\n    switch (target) {\n        case 'xAxis':\n        // X轴通常接受类别型数据\n        return ['string', 'category', 'date'].includes(columnType)\n        case 'yAxis':\n        // Y轴通常接受数值型数据\n        return ['number', 'integer'].includes(columnType)\n        case 'series':\n        // 系列数据通常接受数值型数据\n        return ['number', 'integer'].includes(columnType)\n        default:\n        return true\n    }\n}\n\nfunction mapColumnToTarget (column, target) {\n    switch (target) {\n        case 'xAxis':\n        chartConfig.value.xAxis = {\n            field: column.name,\n            type: column.type\n        }\n        break\n        case 'yAxis':\n        chartConfig.value.yAxis = {\n            field: column.name,\n            type: column.type\n        }\n        break\n        case 'series':\n        // 系列可以有多个，但这里简化为单个\n        chartConfig.value.series = [{\n            field: column.name,\n            type: column.type\n        }]\n        break\n    }\n\n    emit('config-change', chartConfig.value)\n}\n\nfunction removeMapping (target) {\n    switch (target) {\n        case 'xAxis':\n        chartConfig.value.xAxis = { field: '', type: '' }\n        break\n        case 'yAxis':\n        chartConfig.value.yAxis = { field: '', type: '' }\n        break\n        case 'series':\n        chartConfig.value.series = []\n        break\n    }\n\n    emit('config-change', chartConfig.value)\n}\n\nfunction removeSeriesMapping (index) {\n    chartConfig.value.series.splice(index, 1)\n    emit('config-change', chartConfig.value)\n}\n\nfunction getTargetName (target) {\n    const names = {\n        xAxis: 'X Axis',\n        yAxis: 'Y Axis',\n        series: 'Data Series'\n    }\n    return names[target] || target\n}\n\nfunction generateChart () {\n    if (!isConfigValid.value) {\n        errorMessage.value = 'Please complete the required data mapping configuration'\n        return\n    }\n    emit('generate-chart', chartConfig.value)\n}\n\nfunction resetConfig () {\n    chartConfig.value = {\n        xAxis: { field: '', type: '' },\n        yAxis: { field: '', type: '' },\n        series: [],\n        title: '',\n        colorScheme: 'default',\n        animation: chartConfig.value.animation,\n        dataRange: 'all',\n        nullHandling: 'ignoreNull'\n    }\n\n    errorMessage.value = ''\n    emit('config-change', chartConfig.value)\n}\n\nimport { fileDataMap } from '@/assets/JS/utils/dataStructureOptimize.js'\n\nconst mainRawData = computed(() => {\n    // 以当前结构文件为主\n    if (props.currentFile && props.currentFile.name && fileDataMap.value[props.currentFile.name]) {\n        return fileDataMap.value[props.currentFile.name]\n    }\n    return []\n})\n\n// 监听图表类型变化\nwatch(() => props.selectedChartType, (newType) => {\n    // 根据图表类型调整配置\n    if (newType === 'Pie' || newType === 'pie') {\n        // 饼图不需要Y轴\n        chartConfig.value.yAxis = { field: '', type: '' }\n    }\n    // 自动渲染开启时，切换类型后立即触发渲染\n    if (autoRender.value && isConfigValid.value) {\n        emit('generate-chart', chartConfig.value)\n    }\n})\n</script>\n\n<style scoped>\n\n@import '../../assets/CSS/ChartConfigPanel.css';\n\n</style>\n"],"mappings":";;;;;AA6HA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,QAAQ,KAAI;AAC7D,SAASC,UAAU,QAAQ,mCAAkC;AAC7D,SAASC,mBAAmB,QAAQ,+CAA8C;AAClF,SAASC,eAAe,QAAQ,2CAA0C;AAC1E,OAAOC,gBAAgB,MAAM,gCAA+B;AAC5D,OAAOC,gBAAgB,MAAM,wBAAuB;AACpD,OAAOC,kBAAkB,MAAM,0BAAyB;AACxD,OAAOC,iBAAiB,MAAM,yBAAwB;AACtD,OAAOC,mBAAmB,MAAM,2BAA0B;;AAE1D;AA+eA,SAASC,WAAW,QAAQ,4CAA2C;;;;;;;;;;;;;;;;;;;;IA1fvE;IAYA,MAAMC,iBAAiB,GAAGb,QAAQ,CAAC,MAAM;MACrC;MACA,OAAOM,eAAe,CAACQ,KAAK,CAACC,iBAAiB,CAAC,IAAIT,eAAe,CAACQ,KAAK,CAACC,iBAAiB,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGH,KAAK,CAACC,iBAAiB,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAC/J,CAAC;;IAED;IACA,MAAMJ,KAAK,GAAGK,OAAA;;IAWd;IACA,MAAMC,IAAI,GAAGC,MAAA;IACb;IACA,SAASC,aAAaA,CAAA,EAAG;MACrB;MACAF,IAAI,CAAC,cAAc,EAAE;QACjBG,MAAM,EAAE;UAAE,GAAGC,WAAW,CAACC;QAAM,CAAC;QAChCC,UAAU,EAAEF,WAAW,CAACC,KAAK,CAACE,WAAW,IAAI;MACjD,CAAC;IACL;;IAEA;IACA,MAAMC,cAAc,GAAG7B,GAAG,CAAC,KAAK;IAChC,MAAM8B,kBAAkB,GAAG9B,GAAG,CAAC,KAAK;IACpC,MAAM+B,YAAY,GAAG/B,GAAG,CAAC,EAAE;IAC3B,MAAMgC,UAAU,GAAGhC,GAAG,CAAC,IAAI;;IAE3B;IACAE,KAAK,CAAC,CACJ,MAAMa,KAAK,CAACC,iBAAiB,EAC7B,MAAMS,WAAW,CAACC,KAAK,CAACO,KAAK,EAC7B,MAAMR,WAAW,CAACC,KAAK,CAACQ,MAAM,EAC9B,MAAMC,WAAW,CAACT,KAAI,CACvB,EAAE,CAAC,CAACU,IAAI,EAAEH,KAAK,EAAEC,MAAM,EAAEG,OAAO,CAAC,KAAK;MACrC,IAAI,CAACD,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,MAAM,KAAKH,KAAK,KAAKK,KAAK,CAACC,OAAO,CAACN,KAAK,CAAC,GAAGA,KAAK,CAACO,MAAM,GAAG,CAAC,GAAGP,KAAK,CAACQ,KAAK,CAAC,EAAE;QAC5G;QACA,IAAIC,IAAI,GAAG,EAAE;QACb,IAAIJ,KAAK,CAACC,OAAO,CAACN,KAAK,CAAC,EAAE;UACxBS,IAAI,GAAGT,KAAK,CAACU,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACH,KAAK,CAAC,CAACI,MAAM,CAACC,OAAO,CAAC;QAChD,CAAC,MAAM,IAAIb,KAAK,CAACQ,KAAK,EAAE;UACtBC,IAAI,GAAG,CAACT,KAAK,CAACQ,KAAK,CAAC;QACtB;QACA;QACA,IAAIM,OAAO,GAAG,CAAC;QACf,IAAIV,OAAO,IAAIA,OAAO,CAACG,MAAM,GAAG,CAAC,IAAIf,WAAW,CAACC,KAAK,CAACsB,KAAK,IAAIvB,WAAW,CAACC,KAAK,CAACsB,KAAK,CAACP,KAAK,EAAE;UAC7FM,OAAO,GAAGV,OAAO,CAACG,MAAM;QAC1B;QACA;QACA,MAAMS,gBAAgB,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC;QACtD,MAAMC,cAAc,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,CAAC;QAC7F,IAAI,CAACzB,WAAW,CAACC,KAAK,CAACyB,gBAAgB,IAAI,CAACb,KAAK,CAACC,OAAO,CAACd,WAAW,CAACC,KAAK,CAACyB,gBAAgB,CAAC,EAAE;UAC7F1B,WAAW,CAACC,KAAK,CAACyB,gBAAgB,GAAG,EAAE;QACzC;QACA;QACAT,IAAI,CAACU,OAAO,CAAC,CAACX,KAAK,EAAEY,GAAG,KAAK;UAC3B,IAAI,CAAC5B,WAAW,CAACC,KAAK,CAACyB,gBAAgB,CAACE,GAAG,CAAC,EAAE;YAC5C5B,WAAW,CAACC,KAAK,CAACyB,gBAAgB,CAACE,GAAG,CAAC,GAAG,CAAC,CAAC;UAC9C;UACA,MAAMC,KAAK,GAAG7B,WAAW,CAACC,KAAK,CAACyB,gBAAgB,CAACE,GAAG,CAAC;UACrDC,KAAK,CAACC,UAAU,GAAGd,KAAK;UACxB,IAAI,CAACa,KAAK,CAACE,QAAQ,EAAEF,KAAK,CAACE,QAAQ,GAAGP,gBAAgB,CAACI,GAAG,GAAGJ,gBAAgB,CAACT,MAAM,CAAC;UACrF,IAAI,CAACc,KAAK,CAACG,SAAS,EAAEH,KAAK,CAACG,SAAS,GAAG,EAAE;UAC1C,IAAI,CAACH,KAAK,CAACI,SAAS,EAAEJ,KAAK,CAACI,SAAS,GAAG,CAAC;UACzC,IAAI,OAAOJ,KAAK,CAACK,YAAY,KAAK,SAAS,EAAEL,KAAK,CAACK,YAAY,GAAG,IAAI;UACtE,IAAI,CAACL,KAAK,CAACM,WAAW,EAAEN,KAAK,CAACM,WAAW,GAAGV,cAAc,CAACG,GAAG,GAAGH,cAAc,CAACV,MAAM,CAAC;UACvF,IAAI,CAACc,KAAK,CAACO,UAAU,EAAEP,KAAK,CAACO,UAAU,GAAG,EAAE;UAC5C;UACA,IAAI,CAACvB,KAAK,CAACC,OAAO,CAACe,KAAK,CAACQ,MAAM,CAAC,EAAE;YAChCR,KAAK,CAACQ,MAAM,GAAG,EAAE;UACnB;UACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhB,OAAO,EAAEgB,CAAC,EAAE,EAAE;YAChC,IAAI,CAACT,KAAK,CAACQ,MAAM,CAACC,CAAC,CAAC,EAAE;cACpBT,KAAK,CAACQ,MAAM,CAACC,CAAC,CAAC,GAAG;gBAChBC,MAAM,EAAEV,KAAK,CAACM,WAAW;gBACzBK,KAAK,EAAEX,KAAK,CAACO,UAAU;gBACvBK,IAAI,EAAE;cACR,CAAC;YACH;UACF;UACA;UACA,IAAIZ,KAAK,CAACQ,MAAM,CAACtB,MAAM,GAAGO,OAAO,EAAE;YACjCO,KAAK,CAACQ,MAAM,CAACtB,MAAM,GAAGO,OAAO;UAC/B;QACF,CAAC,CAAC;QACF;QACA,IAAItB,WAAW,CAACC,KAAK,CAACyB,gBAAgB,CAACX,MAAM,GAAGE,IAAI,CAACF,MAAM,EAAE;UAC3Df,WAAW,CAACC,KAAK,CAACyB,gBAAgB,CAACX,MAAM,GAAGE,IAAI,CAACF,MAAM;QACzD;MACF;IACF,CAAC,EAAE;MAAE2B,SAAS,EAAE,IAAI;MAAEC,IAAI,EAAE;IAAK,CAAC,CAAC;;IAEnC;IACA,MAAMC,UAAU,GAAGrE,GAAG,CAAC,KAAK;;IAE5B;IACA,MAAMsE,OAAO,GAAGnE,QAAQ,CAAC;MACrBoE,OAAO,EAAE,KAAK;MACdnC,IAAI,EAAE,EAAE;MACRoC,WAAW,EAAE,EAAE;MACfC,gBAAgB,EAAE,EAAE;MACpBC,QAAQ,EAAE,EAAE;MACZpB,KAAK,EAAE,CAAC;IACZ,CAAC;IAED,IAAIqB,cAAc,GAAG,IAAG;;IAExB;IACA,MAAMC,UAAU,GAAG5E,GAAG,CAAC;MACnBgD,KAAK,EAAE,KAAK;MACZf,KAAK,EAAE,KAAK;MACZC,MAAM,EAAE;IACZ,CAAC;IAED,MAAM2C,SAAS,GAAG7E,GAAG,CAAC;MAClBgD,KAAK,EAAE,KAAK;MACZf,KAAK,EAAE,KAAK;MACZC,MAAM,EAAE;IACZ,CAAC;;IAED;IACA,MAAMT,WAAW,GAAGzB,GAAG,CAAC;MACpBgD,KAAK,EAAE;QACHP,KAAK,EAAE,EAAE;QACTL,IAAI,EAAE;MACV,CAAC;MACDH,KAAK,EAAE;QACHQ,KAAK,EAAE,EAAE;QACTL,IAAI,EAAE;MACV,CAAC;MACDF,MAAM,EAAE,EAAE;MACV4C,KAAK,EAAE,EAAE;MACTlD,WAAW,EAAE,SAAS;MACtBmD,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAE;IAClB,CAAC;;IAED;IACA,SAASC,oBAAoBA,CAACC,OAAO,EAAE;MACnC;MACA,MAAMC,WAAW,GAAG,CAACtE,iBAAiB,CAACY,KAAK,CAACyD,OAAO,IAAI,EAAE,EAAExC,GAAG,CAAC0C,IAAI,IAAIA,IAAI,CAACC,GAAG;MAChF,MAAMC,SAAS,GAAG;QAAE,GAAG9D,WAAW,CAACC;MAAM;MACzC0D,WAAW,CAAChC,OAAO,CAACkC,GAAG,IAAI;QACvBC,SAAS,CAACD,GAAG,CAAC,GAAGH,OAAO,CAACG,GAAG;MAChC,CAAC;MACD7D,WAAW,CAACC,KAAK,GAAG6D,SAAQ;MAC5BlE,IAAI,CAAC,eAAe,EAAEI,WAAW,CAACC,KAAK;IAC3C;;IAEA;IACA,MAAM8D,qBAAqB,GAAG,CAC1B,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,aAAa,EAAE,OAAO,EAC3D,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,YAAY,EAAE,cAAa,CAC1E;IACA;IACA,MAAMC,gBAAgB,GAAGxF,QAAQ,CAAC,MAAM;MACpC,MAAMmC,IAAI,GAAGrB,KAAK,CAACC,iBAAgB;MACnC,IAAI,CAACoB,IAAI,EAAE,OAAO,KAAI;MACtB;MACA,MAAMsD,UAAU,GAAGtD,IAAI,CAACnB,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGkB,IAAI,CAACjB,KAAK,CAAC,CAAC,CAAC,CAACwE,WAAW,CAAC;MAC5E,OAAOH,qBAAqB,CAACI,QAAQ,CAACF,UAAU;IACpD,CAAC;;IAED;IACA,MAAMG,SAAS,GAAG5F,QAAQ,CAAC,MAAMc,KAAK,CAAC8E,SAAS,IAAI,EAAE;;IAEtD;IACA,MAAMC,aAAa,GAAG7F,QAAQ,CAAC,MAAM;MACjC,MAAMmC,IAAI,GAAG,CAACrB,KAAK,CAACC,iBAAiB,IAAI,EAAE,EAAE2E,WAAW,CAAC,CAAC;MAC1D,MAAMI,GAAG,GAAGtE,WAAW,CAACC,KAAK;MAC7BsE,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE7D,IAAI,EAAE,cAAc,EAAE8D,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACL,GAAG,CAAC,CAAC,CAAC;MACzF,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAACH,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC3C,MAAMiE,MAAM,GAAGN,GAAG,CAAC/C,KAAK,IAAI+C,GAAG,CAAC/C,KAAK,CAACP,KAAK;QAC3C,MAAMG,CAAC,GAAGmD,GAAG,CAAC9D,KAAK;QACnB,MAAMqE,MAAM,GAAGhE,KAAK,CAACC,OAAO,CAACK,CAAC,CAAC,GAAGA,CAAC,CAACJ,MAAM,GAAG,CAAC,GAAII,CAAC,IAAIA,CAAC,CAACH,KAAM;QAC/D,OAAO4D,MAAM,IAAIC,MAAM;MAC3B;MACA,IAAI,CAAC,KAAK,CAAC,CAACV,QAAQ,CAACxD,IAAI,CAAC,EAAE;QACxB;QACA,MAAMmE,GAAG,GAAGR,GAAG,CAACS,QAAQ;QACxB,MAAMC,GAAG,GAAGV,GAAG,CAACrE,KAAK;QACrB,OAAO6E,GAAG,IAAIA,GAAG,CAAC9D,KAAK,IAAIgE,GAAG,IAAIA,GAAG,CAAChE,KAAK;MAC/C;MACA,IAAI,CAAC,aAAa,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAChC,OAAQ2D,GAAG,CAACW,IAAI,IAAIX,GAAG,CAACW,IAAI,CAACjE,KAAK,IAC9BsD,GAAG,CAACY,IAAI,IAAIZ,GAAG,CAACY,IAAI,CAAClE,KAAK,IAC1BsD,GAAG,CAACa,KAAK,IAAIb,GAAG,CAACa,KAAK,CAACnE,KAAK,IAC5BsD,GAAG,CAACc,IAAI,IAAId,GAAG,CAACc,IAAI,CAACpE,KAAK,IAC1BsD,GAAG,CAACe,GAAG,IAAIf,GAAG,CAACe,GAAG,CAACrE,KAAK;MAChC;MACA,IAAI,CAAC,SAAS,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC5B,OAAO2D,GAAG,CAAC/C,KAAK,IAAI+C,GAAG,CAAC/C,KAAK,CAACP,KAAK,IAC/BsD,GAAG,CAAC9D,KAAK,IAAI8D,GAAG,CAAC9D,KAAK,CAACQ,KAAK,IAC5BsD,GAAG,CAACrE,KAAK,IAAIqE,GAAG,CAACrE,KAAK,CAACe,KAAK;MACpC;MACA,IAAI,CAAC,OAAO,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC1B,OAAOE,KAAK,CAACC,OAAO,CAACwD,GAAG,CAACgB,SAAS,CAAC,IAAIhB,GAAG,CAACgB,SAAS,CAACvE,MAAM,GAAG,CAAC,IAC/DF,KAAK,CAACC,OAAO,CAACwD,GAAG,CAACrE,KAAK,CAAC,IAAIqE,GAAG,CAACrE,KAAK,CAACc,MAAM,GAAG,CAAC;MACpD;MACA,IAAI,CAAC,SAAS,CAAC,CAACoD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC5B,OAAO2D,GAAG,CAACS,QAAQ,IAAIT,GAAG,CAACS,QAAQ,CAAC/D,KAAI;MAC5C;MACA,IAAI,CAAC,OAAO,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC1B,OAAO2D,GAAG,CAACiB,MAAM,IAAIjB,GAAG,CAACiB,MAAM,CAACvE,KAAK,IACjCsD,GAAG,CAACkB,UAAU,IAAIlB,GAAG,CAACkB,UAAU,CAACxE,KAAK,IACtCsD,GAAG,CAACmB,UAAU,IAAInB,GAAG,CAACmB,UAAU,CAACzE,KAAK;MAC9C;MACA,IAAI,CAAC,MAAM,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QACzB,OAAS2D,GAAG,CAACiB,MAAM,IAAIjB,GAAG,CAACiB,MAAM,CAACvE,KAAK,IAAIsD,GAAG,CAACoB,QAAQ,IAAIpB,GAAG,CAACoB,QAAQ,CAAC1E,KAAK;MACjF;MACA,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QACxC,OAAS2D,GAAG,CAACiB,MAAM,IAAIjB,GAAG,CAACiB,MAAM,CAACvE,KAAK,IACnCsD,GAAG,CAACoB,QAAQ,IAAIpB,GAAG,CAACoB,QAAQ,CAAC1E,KAAK;MAC1C;MACA,IAAI,CAAC,UAAU,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC7B,OAAOE,KAAK,CAACC,OAAO,CAACwD,GAAG,CAACqB,UAAU,CAAC,IAAIrB,GAAG,CAACqB,UAAU,CAAC5E,MAAM,GAAG,CAAC,IAC7DuD,GAAG,CAACqB,UAAU,CAACC,KAAK,CAACC,GAAG,IAAIA,GAAG,CAAC7E,KAAK,CAAC;MAC9C;MACA,IAAI,CAAC,QAAQ,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC3B,OAAO2D,GAAG,CAACwB,MAAM,IAAIxB,GAAG,CAACwB,MAAM,CAAC9E,KAAK,IACjCsD,GAAG,CAACyB,MAAM,IAAIzB,GAAG,CAACyB,MAAM,CAAC/E,KAAK,IAC9BsD,GAAG,CAACrE,KAAK,IAAIqE,GAAG,CAACrE,KAAK,CAACe,KAAK;MACpC;MACA,IAAI,CAAC,QAAQ,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC3B,OAAO2D,GAAG,CAAC0B,KAAK,IAAI1B,GAAG,CAAC0B,KAAK,CAAChF,KAAK,IAC/BsD,GAAG,CAACrE,KAAK,IAAIqE,GAAG,CAACrE,KAAK,CAACe,KAAK;MACpC;MACA,IAAI,CAAC,OAAO,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC1B,OAAO2D,GAAG,CAACrE,KAAK,IAAIqE,GAAG,CAACrE,KAAK,CAACe,KAAK;MACvC;MACA,IAAI,CAAC,cAAc,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QACjC,OAAO2D,GAAG,CAACS,QAAQ,IAAIT,GAAG,CAACS,QAAQ,CAAC/D,KAAK,IACrCsD,GAAG,CAACrE,KAAK,IAAIqE,GAAG,CAACrE,KAAK,CAACe,KAAK;MACpC;MACA,IAAI,CAAC,YAAY,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC/B,OAAO2D,GAAG,CAAC2B,IAAI,IAAI3B,GAAG,CAAC2B,IAAI,CAACjF,KAAK,IAC7BsD,GAAG,CAACrE,KAAK,IAAIqE,GAAG,CAACrE,KAAK,CAACe,KAAK;MACpC;MACA,IAAI,CAAC,UAAU,CAAC,CAACmD,QAAQ,CAACxD,IAAI,CAAC,EAAE;QAC7B,OAAO2D,GAAG,CAAC2B,IAAI,IAAI3B,GAAG,CAAC2B,IAAI,CAACjF,KAAK;MACrC;IACJ,CAAC,CAAC;;IAEF;IACAvC,KAAK,CAACuB,WAAW,EAAGgF,GAAG,IAAK;MACxB,IAAIpC,UAAU,CAAC3C,KAAK,IAAIoE,aAAa,CAACpE,KAAK,EAAE;QACzCL,IAAI,CAAC,gBAAgB,EAAEI,WAAW,CAACC,KAAK;MAC5C;MACAsE,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACK,GAAG,CAAC,CAAC;IACvE,CAAC,EAAE;MAAErC,IAAI,EAAE;IAAK,CAAC;;IAEjB;IACAlE,KAAK,CAACmE,UAAU,EAAGoC,GAAG,IAAK;MACvB,IAAIA,GAAG,IAAIX,aAAa,CAACpE,KAAK,EAAE;QAC5BL,IAAI,CAAC,gBAAgB,EAAEI,WAAW,CAACC,KAAK;MAC5C;IACJ,CAAC;IAED,SAASiG,YAAYA,CAAEvF,IAAI,EAAE;MACzB;MACA,OAAO/B,UAAU,CAAC+B,IAAI,CAAC,IAAI,EAAC;IAChC;IAEA,SAASwF,gBAAgBA,CAAA,EAAG;MACxB/F,cAAc,CAACH,KAAK,GAAG,CAACG,cAAc,CAACH,KAAI;IAC/C;IAEA,SAASmG,oBAAoBA,CAAA,EAAG;MAC5B/F,kBAAkB,CAACJ,KAAK,GAAG,CAACI,kBAAkB,CAACJ,KAAI;IACvD;;IAEA;IACA,SAASoG,WAAWA,CAACC,KAAK,EAAE3F,IAAI,EAAE;MAC9B;MACA,IAAIuC,cAAc,EAAE;QAChBqD,YAAY,CAACrD,cAAc;MAC/B;;MAEA;MACAA,cAAc,GAAGsD,UAAU,CAAC,MAAM;QAC9B,MAAMzG,MAAM,GAAGlB,mBAAmB,CAAC8B,IAAI;QACvC,IAAIZ,MAAM,EAAE;UACR8C,OAAO,CAAClC,IAAI,GAAGA,IAAG;UAClBkC,OAAO,CAACE,WAAW,GAAGhD,MAAM,CAACgD,WAAU;UACvCF,OAAO,CAACG,gBAAgB,GAAGjD,MAAM,CAACiD,gBAAe;UACjDH,OAAO,CAACI,QAAQ,GAAGlD,MAAM,CAACkD,QAAO;UACjCJ,OAAO,CAACC,OAAO,GAAG,IAAG;;UAErB;UACAnE,QAAQ,CAAC,MAAM;YACX8H,eAAe,CAACH,KAAK;UACzB,CAAC;QACL;MACJ,CAAC,EAAE,IAAI,CAAC,EAAC;IACb;;IAEA;IACA,SAASI,WAAWA,CAAA,EAAG;MACnB,IAAIxD,cAAc,EAAE;QAChBqD,YAAY,CAACrD,cAAc;QAC3BA,cAAc,GAAG,IAAG;MACxB;MACAL,OAAO,CAACC,OAAO,GAAG,KAAI;IAC1B;;IAEA;IACA,SAAS2D,eAAeA,CAACH,KAAK,EAAE;MAC5B,IAAI,CAAC/F,UAAU,CAACN,KAAK,EAAE;MAEvB,MAAM0G,SAAS,GAAGpG,UAAU,CAACN,KAAI;MACjC,MAAM2G,IAAI,GAAGD,SAAS,CAACE,qBAAqB,CAAC;MAC7C,MAAMC,aAAa,GAAGC,MAAM,CAACC,UAAS;MACtC,MAAMC,cAAc,GAAGF,MAAM,CAACG,WAAU;MAExC,IAAIC,IAAI,GAAGb,KAAK,CAACc,KAAK,GAAG,EAAC;MAC1B,IAAIC,GAAG,GAAGf,KAAK,CAACgB,KAAK,GAAG,EAAC;;MAEzB;MACA,IAAIH,IAAI,GAAGP,IAAI,CAACW,KAAK,GAAGT,aAAa,EAAE;QACnCK,IAAI,GAAGb,KAAK,CAACc,KAAK,GAAGR,IAAI,CAACW,KAAK,GAAG,EAAC;MACvC;;MAEA;MACA,IAAIF,GAAG,GAAGT,IAAI,CAACY,MAAM,GAAGP,cAAc,EAAE;QACpCI,GAAG,GAAGf,KAAK,CAACgB,KAAK,GAAGV,IAAI,CAACY,MAAM,GAAG,EAAC;MACvC;;MAEA;MACA,IAAIL,IAAI,GAAG,CAAC,EAAE;QACVA,IAAI,GAAG,EAAC;MACZ;;MAEA;MACA,IAAIE,GAAG,GAAG,CAAC,EAAE;QACTA,GAAG,GAAG,EAAC;MACX;MAEAxE,OAAO,CAAChB,KAAK,GAAG;QACZsF,IAAI,EAAE,GAAGA,IAAI,IAAI;QACjBE,GAAG,EAAE,GAAGA,GAAG,IAAI;QACfI,QAAQ,EAAE,OAAO;QACjBC,MAAM,EAAE;MACZ;IACJ;;IAEA;IACA,SAASC,eAAeA,CAAE5B,MAAM,EAAE;MAC9B5C,UAAU,CAAClD,KAAK,CAAC8F,MAAM,CAAC,GAAG,IAAG;MAC9B3C,SAAS,CAACnD,KAAK,CAAC8F,MAAM,CAAC,GAAG,KAAI;IAC9B;IAEJ,SAAS6B,eAAeA,CAAE7B,MAAM,EAAE;MAC9B5C,UAAU,CAAClD,KAAK,CAAC8F,MAAM,CAAC,GAAG,KAAI;IACnC;IAEA,SAAS8B,cAAcA,CAAEvB,KAAK,EAAEP,MAAM,EAAE;MACpCO,KAAK,CAACwB,cAAc,CAAC;MACrB3E,UAAU,CAAClD,KAAK,CAAC8F,MAAM,CAAC,GAAG,IAAG;IAClC;IAEA,SAASgC,UAAUA,CAAEzB,KAAK,EAAEP,MAAM,EAAE;MAChCO,KAAK,CAACwB,cAAc,CAAC;MACrB3E,UAAU,CAAClD,KAAK,CAAC8F,MAAM,CAAC,GAAG,KAAI;MAE/B,IAAI;QACA,MAAMiC,QAAQ,GAAGvD,IAAI,CAACC,KAAK,CAAC4B,KAAK,CAAC2B,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;QAEpE,IAAIF,QAAQ,CAACrH,IAAI,KAAK,QAAQ,EAAE;UAChC,MAAMwH,MAAM,GAAGH,QAAQ,CAACG,MAAK;;UAE7B;UACA,IAAIC,uBAAuB,CAACD,MAAM,EAAEpC,MAAM,CAAC,EAAE;YACzCsC,iBAAiB,CAACF,MAAM,EAAEpC,MAAM;YAChCzF,YAAY,CAACL,KAAK,GAAG,EAAC;UAC1B,CAAC,MAAM;YACHmD,SAAS,CAACnD,KAAK,CAAC8F,MAAM,CAAC,GAAG,IAAG;YAC7BzF,YAAY,CAACL,KAAK,GAAG,WAAWkI,MAAM,CAACG,IAAI,mCAAmCC,aAAa,CAACxC,MAAM,CAAC,EAAC;YACpGS,UAAU,CAAC,MAAM;cACjBpD,SAAS,CAACnD,KAAK,CAAC8F,MAAM,CAAC,GAAG,KAAI;cAC9BzF,YAAY,CAACL,KAAK,GAAG,EAAC;YACtB,CAAC,EAAE,IAAI;UACX;QACA;MACJ,CAAC,CAAC,OAAOuI,KAAK,EAAE;QACZjE,OAAO,CAACiE,KAAK,CAAC,cAAc,EAAEA,KAAK;QACnClI,YAAY,CAACL,KAAK,GAAG,wCAAuC;MAChE;IACJ;IAEA,SAASmI,uBAAuBA,CAAED,MAAM,EAAEpC,MAAM,EAAE;MAC9C,MAAM0C,UAAU,GAAGN,MAAM,CAACxH,IAAG;MAE7B,QAAQoF,MAAM;QACV,KAAK,OAAO;UACZ;UACA,OAAO,CAAC,QAAQ,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC5B,QAAQ,CAACsE,UAAU;QACzD,KAAK,OAAO;UACZ;UACA,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAACtE,QAAQ,CAACsE,UAAU;QAChD,KAAK,QAAQ;UACb;UACA,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAACtE,QAAQ,CAACsE,UAAU;QAChD;UACA,OAAO,IAAG;MACd;IACJ;IAEA,SAASJ,iBAAiBA,CAAEF,MAAM,EAAEpC,MAAM,EAAE;MACxC,QAAQA,MAAM;QACV,KAAK,OAAO;UACZ/F,WAAW,CAACC,KAAK,CAACsB,KAAK,GAAG;YACtBP,KAAK,EAAEmH,MAAM,CAACG,IAAI;YAClB3H,IAAI,EAAEwH,MAAM,CAACxH;UACjB;UACA;QACA,KAAK,OAAO;UACZX,WAAW,CAACC,KAAK,CAACO,KAAK,GAAG;YACtBQ,KAAK,EAAEmH,MAAM,CAACG,IAAI;YAClB3H,IAAI,EAAEwH,MAAM,CAACxH;UACjB;UACA;QACA,KAAK,QAAQ;UACb;UACAX,WAAW,CAACC,KAAK,CAACQ,MAAM,GAAG,CAAC;YACxBO,KAAK,EAAEmH,MAAM,CAACG,IAAI;YAClB3H,IAAI,EAAEwH,MAAM,CAACxH;UACjB,CAAC;UACD;MACJ;MAEAf,IAAI,CAAC,eAAe,EAAEI,WAAW,CAACC,KAAK;IAC3C;IAEA,SAASyI,aAAaA,CAAE3C,MAAM,EAAE;MAC5B,QAAQA,MAAM;QACV,KAAK,OAAO;UACZ/F,WAAW,CAACC,KAAK,CAACsB,KAAK,GAAG;YAAEP,KAAK,EAAE,EAAE;YAAEL,IAAI,EAAE;UAAG;UAChD;QACA,KAAK,OAAO;UACZX,WAAW,CAACC,KAAK,CAACO,KAAK,GAAG;YAAEQ,KAAK,EAAE,EAAE;YAAEL,IAAI,EAAE;UAAG;UAChD;QACA,KAAK,QAAQ;UACbX,WAAW,CAACC,KAAK,CAACQ,MAAM,GAAG,EAAC;UAC5B;MACJ;MAEAb,IAAI,CAAC,eAAe,EAAEI,WAAW,CAACC,KAAK;IAC3C;IAEA,SAAS0I,mBAAmBA,CAAEC,KAAK,EAAE;MACjC5I,WAAW,CAACC,KAAK,CAACQ,MAAM,CAACoI,MAAM,CAACD,KAAK,EAAE,CAAC;MACxChJ,IAAI,CAAC,eAAe,EAAEI,WAAW,CAACC,KAAK;IAC3C;IAEA,SAASsI,aAAaA,CAAExC,MAAM,EAAE;MAC5B,MAAM+C,KAAK,GAAG;QACVvH,KAAK,EAAE,QAAQ;QACff,KAAK,EAAE,QAAQ;QACfC,MAAM,EAAE;MACZ;MACA,OAAOqI,KAAK,CAAC/C,MAAM,CAAC,IAAIA,MAAK;IACjC;IAEA,SAASgD,aAAaA,CAAA,EAAI;MACtB,IAAI,CAAC1E,aAAa,CAACpE,KAAK,EAAE;QACtBK,YAAY,CAACL,KAAK,GAAG,yDAAwD;QAC7E;MACJ;MACAL,IAAI,CAAC,gBAAgB,EAAEI,WAAW,CAACC,KAAK;IAC5C;IAEA,SAAS+I,WAAWA,CAAA,EAAI;MACpBhJ,WAAW,CAACC,KAAK,GAAG;QAChBsB,KAAK,EAAE;UAAEP,KAAK,EAAE,EAAE;UAAEL,IAAI,EAAE;QAAG,CAAC;QAC9BH,KAAK,EAAE;UAAEQ,KAAK,EAAE,EAAE;UAAEL,IAAI,EAAE;QAAG,CAAC;QAC9BF,MAAM,EAAE,EAAE;QACV4C,KAAK,EAAE,EAAE;QACTlD,WAAW,EAAE,SAAS;QACtBmD,SAAS,EAAEtD,WAAW,CAACC,KAAK,CAACqD,SAAS;QACtCC,SAAS,EAAE,KAAK;QAChBC,YAAY,EAAE;MAClB;MAEAlD,YAAY,CAACL,KAAK,GAAG,EAAC;MACtBL,IAAI,CAAC,eAAe,EAAEI,WAAW,CAACC,KAAK;IAC3C;IAIA,MAAMS,WAAW,GAAGlC,QAAQ,CAAC,MAAM;MAC/B;MACA,IAAIc,KAAK,CAAC2J,WAAW,IAAI3J,KAAK,CAAC2J,WAAW,CAACX,IAAI,IAAIlJ,WAAW,CAACa,KAAK,CAACX,KAAK,CAAC2J,WAAW,CAACX,IAAI,CAAC,EAAE;QAC1F,OAAOlJ,WAAW,CAACa,KAAK,CAACX,KAAK,CAAC2J,WAAW,CAACX,IAAI;MACnD;MACA,OAAO,EAAC;IACZ,CAAC;;IAED;IACA7J,KAAK,CAAC,MAAMa,KAAK,CAACC,iBAAiB,EAAG2J,OAAO,IAAK;MAC9C;MACA,IAAIA,OAAO,KAAK,KAAK,IAAIA,OAAO,KAAK,KAAK,EAAE;QACxC;QACAlJ,WAAW,CAACC,KAAK,CAACO,KAAK,GAAG;UAAEQ,KAAK,EAAE,EAAE;UAAEL,IAAI,EAAE;QAAG;MACpD;MACA;MACA,IAAIiC,UAAU,CAAC3C,KAAK,IAAIoE,aAAa,CAACpE,KAAK,EAAE;QACzCL,IAAI,CAAC,gBAAgB,EAAEI,WAAW,CAACC,KAAK;MAC5C;IACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}