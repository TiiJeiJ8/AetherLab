{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { ref, nextTick, onMounted, computed, watch } from 'vue';\nimport DataPreviewModal from './DataPreviewModal.vue';\nimport { getThemeIcon } from '../../assets/JS/SVG/icons.js';\nimport { uploadFile, deleteFile, renameFile, getFilePreview, getAllFiles } from '../../assets/JS/services/FileServices.js';\n\n// ÁúÅÁï•ÁöÑÂêéÁ´ØÁõ∏ÂÖ≥‰ª£Á†Å...\n\nexport default {\n  __name: 'FileUploadModal',\n  props: {\n    show: Boolean,\n    workspaceFiles: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: ['close', 'workspace-updated'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const props = __props;\n    const emit = __emit;\n    const isDragging = ref(false);\n    const files = ref([]);\n    const workspaceFiles = ref([]);\n    const showPreview = ref(false);\n    const currentPreviewFile = ref(null);\n    const previewData = ref([]);\n    const isLoading = ref(false);\n\n    // ÁõëÂê¨ props ‰∏≠ÁöÑÂ∑•‰ΩúÂå∫Êñá‰ª∂ÂèòÂåñ\n    watch(() => props.workspaceFiles, newFiles => {\n      console.log('FileUploadModal: workspaceFiles prop changed:', newFiles);\n      if (newFiles) {\n        workspaceFiles.value = [...newFiles];\n      }\n    }, {\n      immediate: true\n    });\n\n    // ËÆ°ÁÆóÁªüËÆ°‰ø°ÊÅØ\n    const stats = computed(() => {\n      const totalFiles = files.value.length;\n      const totalSize = files.value.reduce((sum, file) => sum + (file.size || 0), 0);\n      const notUploadedCount = files.value.filter(file => file.status === 'local').length;\n      return {\n        totalFiles,\n        totalSize: formatFileSize(totalSize),\n        notUploadedCount\n      };\n    });\n\n    // Âä†ËΩΩÊâÄÊúâÊñá‰ª∂\n    async function loadFiles() {\n      isLoading.value = true;\n      try {\n        const allFiles = await getAllFiles();\n        files.value = allFiles.map(file => ({\n          ...file,\n          isEditing: false,\n          newName: file.name\n        }));\n      } catch (error) {\n        console.error('Load files failed:', error);\n      } finally {\n        isLoading.value = false;\n      }\n    }\n\n    // Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è\n    function formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n\n    // Ëß¶ÂèëÊñá‰ª∂ÈÄâÊã©\n    function triggerFileInput() {\n      document.querySelector('.file-input').click();\n    }\n\n    // Â§ÑÁêÜÊñá‰ª∂ÈÄâÊã©\n    async function handleFileSelect(event) {\n      const newFiles = Array.from(event.target.files);\n      await processFiles(newFiles);\n    }\n\n    // Â§ÑÁêÜÊãñÊãΩ\n    async function handleDrop(event) {\n      isDragging.value = false;\n      const newFiles = Array.from(event.dataTransfer.files);\n      await processFiles(newFiles);\n    }\n\n    // ÈáçÂëΩÂêçÁõ∏ÂÖ≥\n    function startRename(idx) {\n      files.value[idx].isEditing = true;\n      files.value[idx].newName = files.value[idx].name;\n      nextTick(() => {\n        const inputs = document.querySelectorAll('.file-item input');\n        if (inputs[idx]) {\n          inputs[idx].focus();\n        }\n      });\n    }\n    async function finishRename(idx) {\n      const file = files.value[idx];\n      if (file.newName && file.newName !== file.name) {\n        try {\n          await renameFile(file.id, file.newName);\n          file.name = file.newName;\n        } catch (error) {\n          console.error('Rename failed:', error);\n          alert('Rename failed: ' + error.message);\n          file.newName = file.name;\n        }\n      }\n      file.isEditing = false;\n    }\n\n    // Âà†Èô§Êñá‰ª∂\n    async function unloadFile(idx) {\n      const file = files.value[idx];\n      if (confirm(`Are you sure you want to delete file \"${file.name}\"?`)) {\n        try {\n          await deleteFile(file.id);\n          files.value.splice(idx, 1);\n        } catch (error) {\n          console.error('Delete failed:', error);\n          alert('Delete failed: ' + error.message);\n        }\n      }\n    }\n\n    // Ëé∑ÂèñÊñá‰ª∂ËØ¶ÁªÜ‰ø°ÊÅØ\n    function getFileDetails(file) {\n      return {\n        name: file.name,\n        size: formatFileSize(file.size),\n        rows: file.rows || 0,\n        columns: file.columns || 0,\n        type: file.name.split('.').pop().toUpperCase(),\n        status: getStatusText(file.status),\n        id: file.id,\n        createdAt: new Date(file.createdAt).toLocaleString()\n      };\n    }\n\n    // È¢ÑËßàÊñá‰ª∂\n    async function previewFile(idx) {\n      const file = files.value[idx];\n      try {\n        const previewResult = await getFilePreview(file.id);\n        currentPreviewFile.value = file;\n        previewData.value = previewResult.data;\n        showPreview.value = true;\n      } catch (error) {\n        console.error('Preview failed:', error);\n        alert('Preview failed: ' + error.message);\n      }\n    }\n    function closePreview() {\n      showPreview.value = false;\n      currentPreviewFile.value = null;\n      previewData.value = [];\n    }\n    function onClose() {\n      emit('close');\n    }\n\n    // Ëé∑ÂèñÁä∂ÊÄÅÊñáÊú¨Ôºà‰ªÖÊú¨Âú∞ÁºìÂ≠òÁä∂ÊÄÅÔºâ\n    function getStatusText(status) {\n      const statusMap = {\n        'local': 'Local Cache',\n        'error': 'Error'\n      };\n      return statusMap[status] || 'Local Cache';\n    }\n\n    // Ëé∑ÂèñÁä∂ÊÄÅÂõæÊ†á (SVG)\n    function getStatusIcon(status) {\n      const iconMap = {\n        'local': 'localCache',\n        'uploading': 'uploading',\n        'uploaded': 'uploaded',\n        'operating': 'sync',\n        'error': 'error'\n      };\n      const iconName = iconMap[status] || 'unknown';\n      return getThemeIcon(iconName);\n    }\n\n    // ‰∏ä‰º†Èù¢ÊùøÁöÑÂ∑•‰ΩúÂå∫Áõ∏ÂÖ≥ÊñπÊ≥ï\n    function addToWorkspace(idx) {\n      const file = files.value[idx];\n      console.log('Adding file to workspace:', file.name);\n\n      // Ê£ÄÊü•ÊòØÂê¶Â∑≤Âú®Â∑•‰ΩúÂå∫\n      if (isInWorkspace(file.id)) {\n        alert('File is already in workspace');\n        return;\n      }\n\n      // Â¶ÇÊûúÊòØÂ∑≤‰∏ä‰º†ÁöÑÊñá‰ª∂ÔºåËÆæÁΩÆ‰∏∫Êìç‰ΩúÁä∂ÊÄÅ\n      if (file.status === 'uploaded') {\n        file.status = 'operating';\n      }\n\n      // Ê∑ªÂä†Âà∞Â∑•‰ΩúÂå∫\n      workspaceFiles.value.push({\n        ...file\n      });\n      console.log('Workspace files after adding:', workspaceFiles.value.length);\n\n      // ÈÄöÁü•Áà∂ÁªÑ‰ª∂Â∑•‰ΩúÂå∫Êõ¥Êñ∞\n      emit('workspace-updated', workspaceFiles.value);\n    }\n    function removeFromWorkspace(idx) {\n      const file = workspaceFiles.value[idx];\n\n      // Â¶ÇÊûúÊòØÊìç‰ΩúÁä∂ÊÄÅÁöÑÊñá‰ª∂ÔºåÊÅ¢Â§ç‰∏∫Â∑≤‰∏ä‰º†Áä∂ÊÄÅ\n      if (file.status === 'operating') {\n        const originalFile = files.value.find(f => f.id === file.id);\n        if (originalFile) {\n          originalFile.status = 'uploaded';\n        }\n      }\n\n      // ‰ªéÂ∑•‰ΩúÂå∫ÁßªÈô§\n      workspaceFiles.value.splice(idx, 1);\n\n      // ÈÄöÁü•Áà∂ÁªÑ‰ª∂Â∑•‰ΩúÂå∫Êõ¥Êñ∞\n      emit('workspace-updated', workspaceFiles.value);\n    }\n    function clearWorkspace() {\n      // ÊÅ¢Â§çÊâÄÊúâÊìç‰ΩúÁä∂ÊÄÅÁöÑÊñá‰ª∂\n      workspaceFiles.value.forEach(workspaceFile => {\n        if (workspaceFile.status === 'operating') {\n          const originalFile = files.value.find(f => f.id === workspaceFile.id);\n          if (originalFile) {\n            originalFile.status = 'uploaded';\n          }\n        }\n      });\n\n      // Ê∏ÖÁ©∫Â∑•‰ΩúÂå∫\n      workspaceFiles.value = [];\n\n      // ÈÄöÁü•Áà∂ÁªÑ‰ª∂Â∑•‰ΩúÂå∫Êõ¥Êñ∞\n      emit('workspace-updated', workspaceFiles.value);\n    }\n    function isInWorkspace(fileId) {\n      return workspaceFiles.value.some(file => file.id === fileId);\n    }\n    function previewWorkspaceFile(idx) {\n      const file = workspaceFiles.value[idx];\n      previewFile(files.value.findIndex(f => f.id === file.id));\n    }\n\n    // Âà∑Êñ∞Êñá‰ª∂ÂàóË°®\n    async function refreshFiles() {\n      await loadFiles();\n    }\n\n    // È°µÈù¢Âä†ËΩΩÊó∂‰ªÖÂä†ËΩΩÊú¨Âú∞Êñá‰ª∂\n    onMounted(async () => {\n      await loadFiles();\n    });\n\n    // Â§ÑÁêÜÊñá‰ª∂\n    async function processFiles(newFiles) {\n      const validFiles = newFiles.filter(file => {\n        const ext = file.name.split('.').pop().toLowerCase();\n        return ['csv', 'xlsx', 'xls'].includes(ext);\n      });\n      if (validFiles.length !== newFiles.length) {\n        alert('Only CSV, XLSX, XLS format files are supported');\n      }\n      for (const file of validFiles) {\n        try {\n          // Ê∑ªÂä†Êñá‰ª∂Âà∞ÂàóË°®ÔºàÊ≠£Âú®‰∏ä‰º†Áä∂ÊÄÅÔºâ\n          const fileItem = {\n            id: Date.now() + Math.random(),\n            name: file.name,\n            size: file.size,\n            status: 'uploading',\n            isEditing: false,\n            newName: file.name,\n            rows: 0,\n            columns: 0,\n            createdAt: new Date().toISOString(),\n            uploadProgress: 0 // Ê∑ªÂä†‰∏ä‰º†ËøõÂ∫¶\n          };\n          files.value.push(fileItem);\n\n          // Ë∞ÉÁî®Êô∫ËÉΩ‰∏ä‰º† APIÔºåÊîØÊåÅËøõÂ∫¶ÂõûË∞É\n          const uploadedFile = await uploadFile(file, progress => {\n            // Êõ¥Êñ∞‰∏ä‰º†ËøõÂ∫¶\n            const index = files.value.findIndex(f => f.id === fileItem.id);\n            if (index !== -1) {\n              files.value[index].uploadProgress = progress.percentage;\n            }\n          });\n\n          // Êõ¥Êñ∞Êñá‰ª∂Áä∂ÊÄÅ\n          const index = files.value.findIndex(f => f.id === fileItem.id);\n          if (index !== -1) {\n            files.value[index] = {\n              ...uploadedFile,\n              isEditing: false,\n              newName: uploadedFile.name,\n              uploadProgress: 100\n            };\n          }\n        } catch (error) {\n          console.error('File processing failed:', error);\n          // Êõ¥Êñ∞Â§±Ë¥•Áä∂ÊÄÅ\n          const index = files.value.findIndex(f => f.name === file.name);\n          if (index !== -1) {\n            files.value[index].status = 'error';\n            files.value[index].uploadProgress = 0;\n          }\n        }\n      }\n    }\n    const __returned__ = {\n      props,\n      emit,\n      isDragging,\n      files,\n      workspaceFiles,\n      showPreview,\n      currentPreviewFile,\n      previewData,\n      isLoading,\n      stats,\n      loadFiles,\n      formatFileSize,\n      triggerFileInput,\n      handleFileSelect,\n      handleDrop,\n      startRename,\n      finishRename,\n      unloadFile,\n      getFileDetails,\n      previewFile,\n      closePreview,\n      onClose,\n      getStatusText,\n      getStatusIcon,\n      addToWorkspace,\n      removeFromWorkspace,\n      clearWorkspace,\n      isInWorkspace,\n      previewWorkspaceFile,\n      refreshFiles,\n      processFiles,\n      ref,\n      nextTick,\n      onMounted,\n      computed,\n      watch,\n      DataPreviewModal,\n      get getThemeIcon() {\n        return getThemeIcon;\n      },\n      get uploadFile() {\n        return uploadFile;\n      },\n      get deleteFile() {\n        return deleteFile;\n      },\n      get renameFile() {\n        return renameFile;\n      },\n      get getFilePreview() {\n        return getFilePreview;\n      },\n      get getAllFiles() {\n        return getAllFiles;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","nextTick","onMounted","computed","watch","DataPreviewModal","getThemeIcon","uploadFile","deleteFile","renameFile","getFilePreview","getAllFiles","props","__props","emit","__emit","isDragging","files","workspaceFiles","showPreview","currentPreviewFile","previewData","isLoading","newFiles","console","log","value","immediate","stats","totalFiles","length","totalSize","reduce","sum","file","size","notUploadedCount","filter","status","formatFileSize","loadFiles","allFiles","map","isEditing","newName","name","error","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","triggerFileInput","document","querySelector","click","handleFileSelect","event","Array","from","target","processFiles","handleDrop","dataTransfer","startRename","idx","inputs","querySelectorAll","focus","finishRename","id","alert","message","unloadFile","confirm","splice","getFileDetails","rows","columns","type","split","pop","toUpperCase","getStatusText","createdAt","Date","toLocaleString","previewFile","previewResult","data","closePreview","onClose","statusMap","getStatusIcon","iconMap","iconName","addToWorkspace","isInWorkspace","push","removeFromWorkspace","originalFile","find","f","clearWorkspace","forEach","workspaceFile","fileId","some","previewWorkspaceFile","findIndex","refreshFiles","validFiles","ext","toLowerCase","includes","fileItem","now","random","toISOString","uploadProgress","uploadedFile","progress","index","percentage"],"sources":["D:/Learning Material/Git/Fuck-Charts/frontend/src/components/Common/FileUploadModal.vue"],"sourcesContent":["<template>\n<transition name=\"modal-expand\" appear>\n    <div v-if=\"show\" class=\"file-modal\" @click.self=\"onClose\">\n        <div class=\"file-content\">\n            <div class=\"file-header\">\n                <div class=\"header-left\">\n                    <span>File Manager</span>\n                </div>\n                <div class=\"header-right\">\n                    <button class=\"refresh-btn\" @click=\"refreshFiles\" title=\"Refresh file list\">\n                        <span v-html=\"getThemeIcon('refresh')\"></span>\n                    </button>\n                    <button class=\"close-btn\" @click=\"onClose\">√ó</button>\n                </div>\n            </div>\n\n            <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->\n            <div class=\"main-content\">\n                <!-- Â∑¶‰æßÔºöÊãñÊãΩ‰∏ä‰º†Âå∫Âüü -->\n                <div class=\"upload-section\">\n                    <div class=\"upload-area\"\n                            :class=\"{ 'dragging': isDragging }\"\n                            @drop.prevent=\"handleDrop\"\n                            @dragover.prevent=\"isDragging = true\"\n                            @dragleave.prevent=\"isDragging = false\">\n                        <input type=\"file\"\n                                ref=\"fileInput\"\n                                @change=\"handleFileSelect\"\n                                accept=\".csv,.xlsx,.xls\"\n                                multiple\n                                class=\"file-input\" />\n                        <div class=\"upload-tip\">\n                            <div class=\"upload-icon\" v-html=\"getThemeIcon('upload')\"></div>\n                            <p>Drag files here or <button @click=\"triggerFileInput\">Click to select</button></p>\n                            <p class=\"sub-tip\">Supports CSV„ÄÅXLSX„ÄÅXLS formats</p>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Âè≥‰æßÔºöÊñá‰ª∂ÂàóË°® -->\n                <div class=\"file-section\">\n                    <!-- ÁªüËÆ°‰ø°ÊÅØ -->\n                    <div class=\"stats-bar\" v-if=\"files.length\">\n                        <div class=\"stat-item\">\n                            <span class=\"stat-label\">Total Files:</span>\n                            <span class=\"stat-value\">{{ stats.totalFiles }}</span>\n                        </div>\n                        <div class=\"stat-item\">\n                            <span class=\"stat-label\">Total Size:</span>\n                            <span class=\"stat-value\">{{ stats.totalSize }}</span>\n                        </div>\n                        <div class=\"stat-item\" v-if=\"stats.notUploadedCount > 0\">\n                            <span class=\"stat-label\">Not Uploaded:</span>\n                            <span class=\"stat-value\">{{ stats.notUploadedCount }}</span>\n                        </div>\n                    </div>\n\n                    <!-- Êñá‰ª∂ÂàóË°® -->\n                    <div class=\"file-list\" v-if=\"files.length\">\n                        <div v-for=\"(file, idx) in files\"\n                                :key=\"file.id\"\n                                class=\"file-item\">\n                            <div class=\"file-info\">\n                                <div class=\"file-basic\">\n                                    <div class=\"file-name-section\">\n                                        <span class=\"file-name\"\n                                                :class=\"{ 'editing': file.isEditing }\"\n                                                :title=\"file.name\"\n                                                @dblclick=\"startRename(idx)\">\n                                            <template v-if=\"!file.isEditing\">\n                                                {{ file.name }}\n                                            </template>\n                                            <input v-else\n                                                    v-model=\"file.newName\"\n                                                    @blur=\"finishRename(idx)\"\n                                                    @keyup.enter=\"finishRename(idx)\"\n                                                    ref=\"renameInput\"\n                                                    type=\"text\" />\n                                        </span>\n                                        <span class=\"file-status\" :class=\"file.status\">\n                                            <span v-html=\"getStatusIcon(file.status)\"></span>\n                                            {{ getStatusText(file.status) }}\n                                        </span>\n                                        <!-- Êìç‰ΩúÁä∂ÊÄÅÊ†áËÆ∞ -->\n                                        <div v-if=\"file.status === 'operating'\" class=\"operating-mark\" title=\"File is being operated\"></div>\n                                    </div>\n                                    <div class=\"file-details\">\n                                        <span class=\"file-size\" :title=\"`File Size: ${formatFileSize(file.size)}`\">\n                                            {{ formatFileSize(file.size) }}\n                                        </span>\n                                        <span class=\"file-type\" :title=\"`File Type: ${file.name.split('.').pop().toUpperCase()}`\">\n                                            {{ file.name.split('.').pop().toUpperCase() }}\n                                        </span>\n                                        <span class=\"file-dimensions\"\n                                                v-if=\"file.rows && file.columns\"\n                                                :title=\"`Data Dimensions: ${file.rows} rows √ó ${file.columns} columns`\">\n                                                {{ file.rows }} x {{ file.columns }}\n                                        </span>\n                                        <span class=\"file-created\"\n                                                :title=\"`Created Time: ${new Date(file.createdAt).toLocaleString()}`\">\n                                            {{ new Date(file.createdAt).toLocaleString() }}\n                                        </span>\n                                    </div>\n                                    <!-- ‰∏ä‰º†ËøõÂ∫¶Êù° -->\n                                    <div v-if=\"file.status === 'uploading'\" class=\"upload-progress\">\n                                        <div class=\"progress-bar\">\n                                            <div class=\"progress-fill\" :style=\"{ width: (file.uploadProgress || 0) + '%' }\"></div>\n                                        </div>\n                                        <span class=\"progress-text\">{{ file.uploadProgress || 0 }}%</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"file-actions\">\n                                <button @click=\"addToWorkspace(idx)\"\n                                        title=\"Add to workspace\"\n                                        class=\"action-btn workspace-btn\"\n                                        :disabled=\"isInWorkspace(file.id) || file.status === 'uploading'\">\n                                    <span v-html=\"getThemeIcon('folder')\"></span>\n                                </button>\n                                <button @click=\"previewFile(idx)\"\n                                        title=\"Preview data\"\n                                        class=\"action-btn preview-btn\"\n                                        :disabled=\"file.status === 'uploading'\">\n                                    <span v-html=\"getThemeIcon('preview')\"></span>\n                                </button>\n                                <button v-if=\"file.status !== 'uploading'\"\n                                        @click=\"unloadFile(idx)\"\n                                        title=\"Delete file\"\n                                        class=\"action-btn delete-btn\">\n                                    <span v-html=\"getThemeIcon('delete')\"></span>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div v-else-if=\"!isLoading\" class=\"no-files\">\n                        <p>No files yet, please upload files on the left</p>\n                    </div>\n                    <div v-else class=\"loading\">\n                        <p>Loading...</p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Â∑•‰ΩúÂå∫ÁÆ°ÁêÜÂå∫Âüü -->\n            <div class=\"workspace-management\" v-if=\"workspaceFiles.length > 0\">\n                <div class=\"workspace-list-header\">\n                    <div class=\"workspace-list-title\">\n                        <span class=\"workspace-icon\">\n                            üìÅ<span class=\"workspace-count\">{{ workspaceFiles.length }}</span>\n                        </span>\n                    </div>\n                    <button class=\"clear-workspace-btn\" @click=\"clearWorkspace\" title=\"Clear all files\">\n                        <span v-html=\"getThemeIcon('delete')\"></span>\n                    </button>\n                </div>\n                <div class=\"workspace-file-list\">\n                    <div v-for=\"(file, idx) in workspaceFiles\"\n                            :key=\"file.id\"\n                            class=\"workspace-file-item\">\n                        <div class=\"workspace-file-name\" :title=\"file.name\">\n                            {{ file.name }}\n                        </div>\n                        <div class=\"workspace-file-actions\">\n                            <button @click=\"previewWorkspaceFile(idx)\"\n                                    title=\"Preview\"\n                                    class=\"workspace-action-btn\">\n                                <span v-html=\"getThemeIcon('preview')\"></span>\n                            </button>\n                            <button @click=\"removeFromWorkspace(idx)\"\n                                    title=\"Remove\"\n                                    class=\"workspace-action-btn\">\n                                <span v-html=\"getThemeIcon('delete')\"></span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Êï∞ÊçÆÈ¢ÑËßàÁªÑ‰ª∂ -->\n        <DataPreviewModal\n            v-if=\"currentPreviewFile\"\n            :show=\"showPreview\"\n            :current-file=\"currentPreviewFile\"\n            :preview-data=\"previewData\"\n            :is-side-preview=\"true\"\n            @close=\"closePreview\"\n        />\n    </div>\n</transition>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { ref, nextTick, onMounted, computed, watch } from 'vue'\nimport DataPreviewModal from './DataPreviewModal.vue'\nimport { getThemeIcon } from '../../assets/JS/SVG/icons.js'\nimport {\n    uploadFile,\n    deleteFile,\n    renameFile,\n    getFilePreview,\n    getAllFiles\n} from '../../assets/JS/services/FileServices.js'\n\n// ÁúÅÁï•ÁöÑÂêéÁ´ØÁõ∏ÂÖ≥‰ª£Á†Å...\n\nconst props = defineProps({\n    show: Boolean,\n    workspaceFiles: {\n        type: Array,\n        default: () => []\n    }\n})\n\nconst emit = defineEmits(['close', 'workspace-updated'])\n\nconst isDragging = ref(false)\nconst files = ref([])\nconst workspaceFiles = ref([])\nconst showPreview = ref(false)\nconst currentPreviewFile = ref(null)\nconst previewData = ref([])\nconst isLoading = ref(false)\n\n// ÁõëÂê¨ props ‰∏≠ÁöÑÂ∑•‰ΩúÂå∫Êñá‰ª∂ÂèòÂåñ\nwatch(() => props.workspaceFiles, (newFiles) => {\n    console.log('FileUploadModal: workspaceFiles prop changed:', newFiles)\n    if (newFiles) {\n        workspaceFiles.value = [...newFiles]\n    }\n}, { immediate: true })\n\n// ËÆ°ÁÆóÁªüËÆ°‰ø°ÊÅØ\nconst stats = computed(() => {\n    const totalFiles = files.value.length\n    const totalSize = files.value.reduce((sum, file) => sum + (file.size || 0), 0)\n    const notUploadedCount = files.value.filter(file => file.status === 'local').length\n    \n    return {\n        totalFiles,\n        totalSize: formatFileSize(totalSize),\n        notUploadedCount\n    }\n})\n\n// Âä†ËΩΩÊâÄÊúâÊñá‰ª∂\nasync function loadFiles() {\n    isLoading.value = true\n    try {\n        const allFiles = await getAllFiles()\n        files.value = allFiles.map(file => ({\n            ...file,\n            isEditing: false,\n            newName: file.name\n        }))        } catch (error) {\n            console.error('Load files failed:', error)\n        } finally {\n        isLoading.value = false\n    }\n}\n\n// Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è\nfunction formatFileSize(bytes) {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// Ëß¶ÂèëÊñá‰ª∂ÈÄâÊã©\nfunction triggerFileInput() {\n    document.querySelector('.file-input').click()\n}\n\n// Â§ÑÁêÜÊñá‰ª∂ÈÄâÊã©\nasync function handleFileSelect(event) {\n    const newFiles = Array.from(event.target.files)\n    await processFiles(newFiles)\n}\n\n// Â§ÑÁêÜÊãñÊãΩ\nasync function handleDrop(event) {\n    isDragging.value = false\n    const newFiles = Array.from(event.dataTransfer.files)\n    await processFiles(newFiles)\n}\n\n// ÈáçÂëΩÂêçÁõ∏ÂÖ≥\nfunction startRename(idx) {\n    files.value[idx].isEditing = true\n    files.value[idx].newName = files.value[idx].name\n    nextTick(() => {\n        const inputs = document.querySelectorAll('.file-item input')\n        if (inputs[idx]) {\n            inputs[idx].focus()\n        }\n    })\n}\n\nasync function finishRename(idx) {\n    const file = files.value[idx]\n    if (file.newName && file.newName !== file.name) {\n        try {\n            await renameFile(file.id, file.newName)\n            file.name = file.newName\n        } catch (error) {\n            console.error('Rename failed:', error)\n            alert('Rename failed: ' + error.message)\n            file.newName = file.name\n        }\n    }\n    file.isEditing = false\n}\n\n// Âà†Èô§Êñá‰ª∂\nasync function unloadFile(idx) {\n    const file = files.value[idx]\n    if (confirm(`Are you sure you want to delete file \"${file.name}\"?`)) {\n        try {\n            await deleteFile(file.id)\n            files.value.splice(idx, 1)\n        } catch (error) {\n            console.error('Delete failed:', error)\n            alert('Delete failed: ' + error.message)\n        }\n    }\n}\n\n// Ëé∑ÂèñÊñá‰ª∂ËØ¶ÁªÜ‰ø°ÊÅØ\nfunction getFileDetails(file) {\n    return {\n        name: file.name,\n        size: formatFileSize(file.size),\n        rows: file.rows || 0,\n        columns: file.columns || 0,\n        type: file.name.split('.').pop().toUpperCase(),\n        status: getStatusText(file.status),\n        id: file.id,\n        createdAt: new Date(file.createdAt).toLocaleString()\n    }\n}\n\n// È¢ÑËßàÊñá‰ª∂\nasync function previewFile(idx) {\n    const file = files.value[idx]\n    try {\n        const previewResult = await getFilePreview(file.id)\n        currentPreviewFile.value = file\n        previewData.value = previewResult.data\n        showPreview.value = true\n    } catch (error) {\n        console.error('Preview failed:', error)\n        alert('Preview failed: ' + error.message)\n    }\n}\n\nfunction closePreview() {\n    showPreview.value = false\n    currentPreviewFile.value = null\n    previewData.value = []\n}\n\nfunction onClose() {\n    emit('close')\n}\n\n// Ëé∑ÂèñÁä∂ÊÄÅÊñáÊú¨Ôºà‰ªÖÊú¨Âú∞ÁºìÂ≠òÁä∂ÊÄÅÔºâ\nfunction getStatusText(status) {\n    const statusMap = {\n        'local': 'Local Cache',\n        'error': 'Error'\n    }\n    return statusMap[status] || 'Local Cache'\n}\n\n// Ëé∑ÂèñÁä∂ÊÄÅÂõæÊ†á (SVG)\nfunction getStatusIcon(status) {\n    const iconMap = {\n        'local': 'localCache',\n        'uploading': 'uploading',\n        'uploaded': 'uploaded',\n        'operating': 'sync',\n        'error': 'error'\n    }\n    const iconName = iconMap[status] || 'unknown'\n    return getThemeIcon(iconName)\n}\n\n// ‰∏ä‰º†Èù¢ÊùøÁöÑÂ∑•‰ΩúÂå∫Áõ∏ÂÖ≥ÊñπÊ≥ï\nfunction addToWorkspace(idx) {\n    const file = files.value[idx]\n    console.log('Adding file to workspace:', file.name)\n    \n    // Ê£ÄÊü•ÊòØÂê¶Â∑≤Âú®Â∑•‰ΩúÂå∫\n    if (isInWorkspace(file.id)) {\n        alert('File is already in workspace')\n        return\n    }\n    \n    // Â¶ÇÊûúÊòØÂ∑≤‰∏ä‰º†ÁöÑÊñá‰ª∂ÔºåËÆæÁΩÆ‰∏∫Êìç‰ΩúÁä∂ÊÄÅ\n    if (file.status === 'uploaded') {\n        file.status = 'operating'\n    }\n    \n    // Ê∑ªÂä†Âà∞Â∑•‰ΩúÂå∫\n    workspaceFiles.value.push({ ...file })\n    console.log('Workspace files after adding:', workspaceFiles.value.length)\n    \n    // ÈÄöÁü•Áà∂ÁªÑ‰ª∂Â∑•‰ΩúÂå∫Êõ¥Êñ∞\n    emit('workspace-updated', workspaceFiles.value)\n}\n\nfunction removeFromWorkspace(idx) {\n    const file = workspaceFiles.value[idx]\n    \n    // Â¶ÇÊûúÊòØÊìç‰ΩúÁä∂ÊÄÅÁöÑÊñá‰ª∂ÔºåÊÅ¢Â§ç‰∏∫Â∑≤‰∏ä‰º†Áä∂ÊÄÅ\n    if (file.status === 'operating') {\n        const originalFile = files.value.find(f => f.id === file.id)\n        if (originalFile) {\n            originalFile.status = 'uploaded'\n        }\n    }\n    \n    // ‰ªéÂ∑•‰ΩúÂå∫ÁßªÈô§\n    workspaceFiles.value.splice(idx, 1)\n    \n    // ÈÄöÁü•Áà∂ÁªÑ‰ª∂Â∑•‰ΩúÂå∫Êõ¥Êñ∞\n    emit('workspace-updated', workspaceFiles.value)\n}\n\nfunction clearWorkspace() {\n    // ÊÅ¢Â§çÊâÄÊúâÊìç‰ΩúÁä∂ÊÄÅÁöÑÊñá‰ª∂\n    workspaceFiles.value.forEach(workspaceFile => {\n        if (workspaceFile.status === 'operating') {\n            const originalFile = files.value.find(f => f.id === workspaceFile.id)\n            if (originalFile) {\n                originalFile.status = 'uploaded'\n            }\n        }\n    })\n    \n    // Ê∏ÖÁ©∫Â∑•‰ΩúÂå∫\n    workspaceFiles.value = []\n    \n    // ÈÄöÁü•Áà∂ÁªÑ‰ª∂Â∑•‰ΩúÂå∫Êõ¥Êñ∞\n    emit('workspace-updated', workspaceFiles.value)\n}\n\nfunction isInWorkspace(fileId) {\n    return workspaceFiles.value.some(file => file.id === fileId)\n}\n\nfunction previewWorkspaceFile(idx) {\n    const file = workspaceFiles.value[idx]\n    previewFile(files.value.findIndex(f => f.id === file.id))\n}\n\n// Âà∑Êñ∞Êñá‰ª∂ÂàóË°®\nasync function refreshFiles() {\n    await loadFiles()\n}\n\n// È°µÈù¢Âä†ËΩΩÊó∂‰ªÖÂä†ËΩΩÊú¨Âú∞Êñá‰ª∂\nonMounted(async () => {\n    await loadFiles()\n})\n\n// Â§ÑÁêÜÊñá‰ª∂\nasync function processFiles(newFiles) {\n    const validFiles = newFiles.filter(file => {\n        const ext = file.name.split('.').pop().toLowerCase()\n        return ['csv', 'xlsx', 'xls'].includes(ext)\n    })\n\n    if (validFiles.length !== newFiles.length) {\n        alert('Only CSV, XLSX, XLS format files are supported')\n    }\n\n    for (const file of validFiles) {\n        try {\n            // Ê∑ªÂä†Êñá‰ª∂Âà∞ÂàóË°®ÔºàÊ≠£Âú®‰∏ä‰º†Áä∂ÊÄÅÔºâ\n            const fileItem = {\n                id: Date.now() + Math.random(),\n                name: file.name,\n                size: file.size,\n                status: 'uploading',\n                isEditing: false,\n                newName: file.name,\n                rows: 0,\n                columns: 0,\n                createdAt: new Date().toISOString(),\n                uploadProgress: 0 // Ê∑ªÂä†‰∏ä‰º†ËøõÂ∫¶\n            }\n            files.value.push(fileItem)\n\n            // Ë∞ÉÁî®Êô∫ËÉΩ‰∏ä‰º† APIÔºåÊîØÊåÅËøõÂ∫¶ÂõûË∞É\n            const uploadedFile = await uploadFile(file, (progress) => {\n                // Êõ¥Êñ∞‰∏ä‰º†ËøõÂ∫¶\n                const index = files.value.findIndex(f => f.id === fileItem.id)\n                if (index !== -1) {\n                    files.value[index].uploadProgress = progress.percentage\n                }\n            })\n\n            // Êõ¥Êñ∞Êñá‰ª∂Áä∂ÊÄÅ\n            const index = files.value.findIndex(f => f.id === fileItem.id)\n            if (index !== -1) {\n                files.value[index] = {\n                    ...uploadedFile,\n                    isEditing: false,\n                    newName: uploadedFile.name,\n                    uploadProgress: 100\n                }\n            }\n        } catch (error) {\n            console.error('File processing failed:', error)\n            // Êõ¥Êñ∞Â§±Ë¥•Áä∂ÊÄÅ\n            const index = files.value.findIndex(f => f.name === file.name)\n            if (index !== -1) {\n                files.value[index].status = 'error'\n                files.value[index].uploadProgress = 0\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n@import '../../assets/CSS/FileUploadModal.css';\n</style>\n"],"mappings":";;;;;;;;AAkMA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,KAAI;AAC9D,OAAOC,gBAAgB,MAAM,wBAAuB;AACpD,SAASC,YAAY,QAAQ,8BAA6B;AAC1D,SACIC,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,cAAc,EACdC,WAAU,QACP,0CAAyC;;AAEhD;;;;;;;;;;;;;;;;;;IAZA;IAcA,MAAMC,KAAK,GAAGC,OAAA;IAQd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,UAAU,GAAGhB,GAAG,CAAC,KAAK;IAC5B,MAAMiB,KAAK,GAAGjB,GAAG,CAAC,EAAE;IACpB,MAAMkB,cAAc,GAAGlB,GAAG,CAAC,EAAE;IAC7B,MAAMmB,WAAW,GAAGnB,GAAG,CAAC,KAAK;IAC7B,MAAMoB,kBAAkB,GAAGpB,GAAG,CAAC,IAAI;IACnC,MAAMqB,WAAW,GAAGrB,GAAG,CAAC,EAAE;IAC1B,MAAMsB,SAAS,GAAGtB,GAAG,CAAC,KAAK;;IAE3B;IACAI,KAAK,CAAC,MAAMQ,KAAK,CAACM,cAAc,EAAGK,QAAQ,IAAK;MAC5CC,OAAO,CAACC,GAAG,CAAC,+CAA+C,EAAEF,QAAQ;MACrE,IAAIA,QAAQ,EAAE;QACVL,cAAc,CAACQ,KAAK,GAAG,CAAC,GAAGH,QAAQ;MACvC;IACJ,CAAC,EAAE;MAAEI,SAAS,EAAE;IAAK,CAAC;;IAEtB;IACA,MAAMC,KAAK,GAAGzB,QAAQ,CAAC,MAAM;MACzB,MAAM0B,UAAU,GAAGZ,KAAK,CAACS,KAAK,CAACI,MAAK;MACpC,MAAMC,SAAS,GAAGd,KAAK,CAACS,KAAK,CAACM,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,IAAIC,IAAI,CAACC,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC;MAC7E,MAAMC,gBAAgB,GAAGnB,KAAK,CAACS,KAAK,CAACW,MAAM,CAACH,IAAI,IAAIA,IAAI,CAACI,MAAM,KAAK,OAAO,CAAC,CAACR,MAAK;MAElF,OAAO;QACHD,UAAU;QACVE,SAAS,EAAEQ,cAAc,CAACR,SAAS,CAAC;QACpCK;MACJ;IACJ,CAAC;;IAED;IACA,eAAeI,SAASA,CAAA,EAAG;MACvBlB,SAAS,CAACI,KAAK,GAAG,IAAG;MACrB,IAAI;QACA,MAAMe,QAAQ,GAAG,MAAM9B,WAAW,CAAC;QACnCM,KAAK,CAACS,KAAK,GAAGe,QAAQ,CAACC,GAAG,CAACR,IAAI,KAAK;UAChC,GAAGA,IAAI;UACPS,SAAS,EAAE,KAAK;UAChBC,OAAO,EAAEV,IAAI,CAACW;QAClB,CAAC,CAAC,CAAC;MAAQ,CAAC,CAAC,OAAOC,KAAK,EAAE;QACvBtB,OAAO,CAACsB,KAAK,CAAC,oBAAoB,EAAEA,KAAK;MAC7C,CAAC,SAAS;QACVxB,SAAS,CAACI,KAAK,GAAG,KAAI;MAC1B;IACJ;;IAEA;IACA,SAASa,cAAcA,CAACQ,KAAK,EAAE;MAC3B,IAAIA,KAAK,KAAK,CAAC,EAAE,OAAO,SAAQ;MAChC,MAAMC,CAAC,GAAG,IAAG;MACb,MAAMC,KAAK,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;MACxC,MAAMC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAAC1B,GAAG,CAACsB,KAAK,CAAC,GAAGI,IAAI,CAAC1B,GAAG,CAACuB,CAAC,CAAC;MAClD,OAAOK,UAAU,CAAC,CAACN,KAAK,GAAGI,IAAI,CAACG,GAAG,CAACN,CAAC,EAAEE,CAAC,CAAC,EAAEK,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGN,KAAK,CAACC,CAAC;IAC1E;;IAEA;IACA,SAASM,gBAAgBA,CAAA,EAAG;MACxBC,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAC,CAACC,KAAK,CAAC;IAChD;;IAEA;IACA,eAAeC,gBAAgBA,CAACC,KAAK,EAAE;MACnC,MAAMtC,QAAQ,GAAGuC,KAAK,CAACC,IAAI,CAACF,KAAK,CAACG,MAAM,CAAC/C,KAAK;MAC9C,MAAMgD,YAAY,CAAC1C,QAAQ;IAC/B;;IAEA;IACA,eAAe2C,UAAUA,CAACL,KAAK,EAAE;MAC7B7C,UAAU,CAACU,KAAK,GAAG,KAAI;MACvB,MAAMH,QAAQ,GAAGuC,KAAK,CAACC,IAAI,CAACF,KAAK,CAACM,YAAY,CAAClD,KAAK;MACpD,MAAMgD,YAAY,CAAC1C,QAAQ;IAC/B;;IAEA;IACA,SAAS6C,WAAWA,CAACC,GAAG,EAAE;MACtBpD,KAAK,CAACS,KAAK,CAAC2C,GAAG,CAAC,CAAC1B,SAAS,GAAG,IAAG;MAChC1B,KAAK,CAACS,KAAK,CAAC2C,GAAG,CAAC,CAACzB,OAAO,GAAG3B,KAAK,CAACS,KAAK,CAAC2C,GAAG,CAAC,CAACxB,IAAG;MAC/C5C,QAAQ,CAAC,MAAM;QACX,MAAMqE,MAAM,GAAGb,QAAQ,CAACc,gBAAgB,CAAC,kBAAkB;QAC3D,IAAID,MAAM,CAACD,GAAG,CAAC,EAAE;UACbC,MAAM,CAACD,GAAG,CAAC,CAACG,KAAK,CAAC;QACtB;MACJ,CAAC;IACL;IAEA,eAAeC,YAAYA,CAACJ,GAAG,EAAE;MAC7B,MAAMnC,IAAI,GAAGjB,KAAK,CAACS,KAAK,CAAC2C,GAAG;MAC5B,IAAInC,IAAI,CAACU,OAAO,IAAIV,IAAI,CAACU,OAAO,KAAKV,IAAI,CAACW,IAAI,EAAE;QAC5C,IAAI;UACA,MAAMpC,UAAU,CAACyB,IAAI,CAACwC,EAAE,EAAExC,IAAI,CAACU,OAAO;UACtCV,IAAI,CAACW,IAAI,GAAGX,IAAI,CAACU,OAAM;QAC3B,CAAC,CAAC,OAAOE,KAAK,EAAE;UACZtB,OAAO,CAACsB,KAAK,CAAC,gBAAgB,EAAEA,KAAK;UACrC6B,KAAK,CAAC,iBAAiB,GAAG7B,KAAK,CAAC8B,OAAO;UACvC1C,IAAI,CAACU,OAAO,GAAGV,IAAI,CAACW,IAAG;QAC3B;MACJ;MACAX,IAAI,CAACS,SAAS,GAAG,KAAI;IACzB;;IAEA;IACA,eAAekC,UAAUA,CAACR,GAAG,EAAE;MAC3B,MAAMnC,IAAI,GAAGjB,KAAK,CAACS,KAAK,CAAC2C,GAAG;MAC5B,IAAIS,OAAO,CAAC,yCAAyC5C,IAAI,CAACW,IAAI,IAAI,CAAC,EAAE;QACjE,IAAI;UACA,MAAMrC,UAAU,CAAC0B,IAAI,CAACwC,EAAE;UACxBzD,KAAK,CAACS,KAAK,CAACqD,MAAM,CAACV,GAAG,EAAE,CAAC;QAC7B,CAAC,CAAC,OAAOvB,KAAK,EAAE;UACZtB,OAAO,CAACsB,KAAK,CAAC,gBAAgB,EAAEA,KAAK;UACrC6B,KAAK,CAAC,iBAAiB,GAAG7B,KAAK,CAAC8B,OAAO;QAC3C;MACJ;IACJ;;IAEA;IACA,SAASI,cAAcA,CAAC9C,IAAI,EAAE;MAC1B,OAAO;QACHW,IAAI,EAAEX,IAAI,CAACW,IAAI;QACfV,IAAI,EAAEI,cAAc,CAACL,IAAI,CAACC,IAAI,CAAC;QAC/B8C,IAAI,EAAE/C,IAAI,CAAC+C,IAAI,IAAI,CAAC;QACpBC,OAAO,EAAEhD,IAAI,CAACgD,OAAO,IAAI,CAAC;QAC1BC,IAAI,EAAEjD,IAAI,CAACW,IAAI,CAACuC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QAC9ChD,MAAM,EAAEiD,aAAa,CAACrD,IAAI,CAACI,MAAM,CAAC;QAClCoC,EAAE,EAAExC,IAAI,CAACwC,EAAE;QACXc,SAAS,EAAE,IAAIC,IAAI,CAACvD,IAAI,CAACsD,SAAS,CAAC,CAACE,cAAc,CAAC;MACvD;IACJ;;IAEA;IACA,eAAeC,WAAWA,CAACtB,GAAG,EAAE;MAC5B,MAAMnC,IAAI,GAAGjB,KAAK,CAACS,KAAK,CAAC2C,GAAG;MAC5B,IAAI;QACA,MAAMuB,aAAa,GAAG,MAAMlF,cAAc,CAACwB,IAAI,CAACwC,EAAE;QAClDtD,kBAAkB,CAACM,KAAK,GAAGQ,IAAG;QAC9Bb,WAAW,CAACK,KAAK,GAAGkE,aAAa,CAACC,IAAG;QACrC1E,WAAW,CAACO,KAAK,GAAG,IAAG;MAC3B,CAAC,CAAC,OAAOoB,KAAK,EAAE;QACZtB,OAAO,CAACsB,KAAK,CAAC,iBAAiB,EAAEA,KAAK;QACtC6B,KAAK,CAAC,kBAAkB,GAAG7B,KAAK,CAAC8B,OAAO;MAC5C;IACJ;IAEA,SAASkB,YAAYA,CAAA,EAAG;MACpB3E,WAAW,CAACO,KAAK,GAAG,KAAI;MACxBN,kBAAkB,CAACM,KAAK,GAAG,IAAG;MAC9BL,WAAW,CAACK,KAAK,GAAG,EAAC;IACzB;IAEA,SAASqE,OAAOA,CAAA,EAAG;MACfjF,IAAI,CAAC,OAAO;IAChB;;IAEA;IACA,SAASyE,aAAaA,CAACjD,MAAM,EAAE;MAC3B,MAAM0D,SAAS,GAAG;QACd,OAAO,EAAE,aAAa;QACtB,OAAO,EAAE;MACb;MACA,OAAOA,SAAS,CAAC1D,MAAM,CAAC,IAAI,aAAY;IAC5C;;IAEA;IACA,SAAS2D,aAAaA,CAAC3D,MAAM,EAAE;MAC3B,MAAM4D,OAAO,GAAG;QACZ,OAAO,EAAE,YAAY;QACrB,WAAW,EAAE,WAAW;QACxB,UAAU,EAAE,UAAU;QACtB,WAAW,EAAE,MAAM;QACnB,OAAO,EAAE;MACb;MACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC5D,MAAM,CAAC,IAAI,SAAQ;MAC5C,OAAOhC,YAAY,CAAC6F,QAAQ;IAChC;;IAEA;IACA,SAASC,cAAcA,CAAC/B,GAAG,EAAE;MACzB,MAAMnC,IAAI,GAAGjB,KAAK,CAACS,KAAK,CAAC2C,GAAG;MAC5B7C,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAES,IAAI,CAACW,IAAI;;MAElD;MACA,IAAIwD,aAAa,CAACnE,IAAI,CAACwC,EAAE,CAAC,EAAE;QACxBC,KAAK,CAAC,8BAA8B;QACpC;MACJ;;MAEA;MACA,IAAIzC,IAAI,CAACI,MAAM,KAAK,UAAU,EAAE;QAC5BJ,IAAI,CAACI,MAAM,GAAG,WAAU;MAC5B;;MAEA;MACApB,cAAc,CAACQ,KAAK,CAAC4E,IAAI,CAAC;QAAE,GAAGpE;MAAK,CAAC;MACrCV,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEP,cAAc,CAACQ,KAAK,CAACI,MAAM;;MAExE;MACAhB,IAAI,CAAC,mBAAmB,EAAEI,cAAc,CAACQ,KAAK;IAClD;IAEA,SAAS6E,mBAAmBA,CAAClC,GAAG,EAAE;MAC9B,MAAMnC,IAAI,GAAGhB,cAAc,CAACQ,KAAK,CAAC2C,GAAG;;MAErC;MACA,IAAInC,IAAI,CAACI,MAAM,KAAK,WAAW,EAAE;QAC7B,MAAMkE,YAAY,GAAGvF,KAAK,CAACS,KAAK,CAAC+E,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAChC,EAAE,KAAKxC,IAAI,CAACwC,EAAE;QAC3D,IAAI8B,YAAY,EAAE;UACdA,YAAY,CAAClE,MAAM,GAAG,UAAS;QACnC;MACJ;;MAEA;MACApB,cAAc,CAACQ,KAAK,CAACqD,MAAM,CAACV,GAAG,EAAE,CAAC;;MAElC;MACAvD,IAAI,CAAC,mBAAmB,EAAEI,cAAc,CAACQ,KAAK;IAClD;IAEA,SAASiF,cAAcA,CAAA,EAAG;MACtB;MACAzF,cAAc,CAACQ,KAAK,CAACkF,OAAO,CAACC,aAAa,IAAI;QAC1C,IAAIA,aAAa,CAACvE,MAAM,KAAK,WAAW,EAAE;UACtC,MAAMkE,YAAY,GAAGvF,KAAK,CAACS,KAAK,CAAC+E,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAChC,EAAE,KAAKmC,aAAa,CAACnC,EAAE;UACpE,IAAI8B,YAAY,EAAE;YACdA,YAAY,CAAClE,MAAM,GAAG,UAAS;UACnC;QACJ;MACJ,CAAC;;MAED;MACApB,cAAc,CAACQ,KAAK,GAAG,EAAC;;MAExB;MACAZ,IAAI,CAAC,mBAAmB,EAAEI,cAAc,CAACQ,KAAK;IAClD;IAEA,SAAS2E,aAAaA,CAACS,MAAM,EAAE;MAC3B,OAAO5F,cAAc,CAACQ,KAAK,CAACqF,IAAI,CAAC7E,IAAI,IAAIA,IAAI,CAACwC,EAAE,KAAKoC,MAAM;IAC/D;IAEA,SAASE,oBAAoBA,CAAC3C,GAAG,EAAE;MAC/B,MAAMnC,IAAI,GAAGhB,cAAc,CAACQ,KAAK,CAAC2C,GAAG;MACrCsB,WAAW,CAAC1E,KAAK,CAACS,KAAK,CAACuF,SAAS,CAACP,CAAC,IAAIA,CAAC,CAAChC,EAAE,KAAKxC,IAAI,CAACwC,EAAE,CAAC;IAC5D;;IAEA;IACA,eAAewC,YAAYA,CAAA,EAAG;MAC1B,MAAM1E,SAAS,CAAC;IACpB;;IAEA;IACAtC,SAAS,CAAC,YAAY;MAClB,MAAMsC,SAAS,CAAC;IACpB,CAAC;;IAED;IACA,eAAeyB,YAAYA,CAAC1C,QAAQ,EAAE;MAClC,MAAM4F,UAAU,GAAG5F,QAAQ,CAACc,MAAM,CAACH,IAAI,IAAI;QACvC,MAAMkF,GAAG,GAAGlF,IAAI,CAACW,IAAI,CAACuC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACgC,WAAW,CAAC;QACnD,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAACC,QAAQ,CAACF,GAAG;MAC9C,CAAC;MAED,IAAID,UAAU,CAACrF,MAAM,KAAKP,QAAQ,CAACO,MAAM,EAAE;QACvC6C,KAAK,CAAC,gDAAgD;MAC1D;MAEA,KAAK,MAAMzC,IAAI,IAAIiF,UAAU,EAAE;QAC3B,IAAI;UACA;UACA,MAAMI,QAAQ,GAAG;YACb7C,EAAE,EAAEe,IAAI,CAAC+B,GAAG,CAAC,CAAC,GAAGrE,IAAI,CAACsE,MAAM,CAAC,CAAC;YAC9B5E,IAAI,EAAEX,IAAI,CAACW,IAAI;YACfV,IAAI,EAAED,IAAI,CAACC,IAAI;YACfG,MAAM,EAAE,WAAW;YACnBK,SAAS,EAAE,KAAK;YAChBC,OAAO,EAAEV,IAAI,CAACW,IAAI;YAClBoC,IAAI,EAAE,CAAC;YACPC,OAAO,EAAE,CAAC;YACVM,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACiC,WAAW,CAAC,CAAC;YACnCC,cAAc,EAAE,CAAC,CAAC;UACtB;UACA1G,KAAK,CAACS,KAAK,CAAC4E,IAAI,CAACiB,QAAQ;;UAEzB;UACA,MAAMK,YAAY,GAAG,MAAMrH,UAAU,CAAC2B,IAAI,EAAG2F,QAAQ,IAAK;YACtD;YACA,MAAMC,KAAK,GAAG7G,KAAK,CAACS,KAAK,CAACuF,SAAS,CAACP,CAAC,IAAIA,CAAC,CAAChC,EAAE,KAAK6C,QAAQ,CAAC7C,EAAE;YAC7D,IAAIoD,KAAK,KAAK,CAAC,CAAC,EAAE;cACd7G,KAAK,CAACS,KAAK,CAACoG,KAAK,CAAC,CAACH,cAAc,GAAGE,QAAQ,CAACE,UAAS;YAC1D;UACJ,CAAC;;UAED;UACA,MAAMD,KAAK,GAAG7G,KAAK,CAACS,KAAK,CAACuF,SAAS,CAACP,CAAC,IAAIA,CAAC,CAAChC,EAAE,KAAK6C,QAAQ,CAAC7C,EAAE;UAC7D,IAAIoD,KAAK,KAAK,CAAC,CAAC,EAAE;YACd7G,KAAK,CAACS,KAAK,CAACoG,KAAK,CAAC,GAAG;cACjB,GAAGF,YAAY;cACfjF,SAAS,EAAE,KAAK;cAChBC,OAAO,EAAEgF,YAAY,CAAC/E,IAAI;cAC1B8E,cAAc,EAAE;YACpB;UACJ;QACJ,CAAC,CAAC,OAAO7E,KAAK,EAAE;UACZtB,OAAO,CAACsB,KAAK,CAAC,yBAAyB,EAAEA,KAAK;UAC9C;UACA,MAAMgF,KAAK,GAAG7G,KAAK,CAACS,KAAK,CAACuF,SAAS,CAACP,CAAC,IAAIA,CAAC,CAAC7D,IAAI,KAAKX,IAAI,CAACW,IAAI;UAC7D,IAAIiF,KAAK,KAAK,CAAC,CAAC,EAAE;YACd7G,KAAK,CAACS,KAAK,CAACoG,KAAK,CAAC,CAACxF,MAAM,GAAG,OAAM;YAClCrB,KAAK,CAACS,KAAK,CAACoG,KAAK,CAAC,CAACH,cAAc,GAAG;UACxC;QACJ;MACJ;IACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}