{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\n/* eslint-disable */\n\n/**\n * 拖拽工具类\n * 处理数据映射的拖拽功能\n */\nexport class DragDropHandler {\n  constructor() {\n    this.dragData = null;\n    this.dropZones = new Set();\n  }\n\n  // 开始拖拽\n  startDrag(data, event) {\n    this.dragData = data;\n    if (event.dataTransfer) {\n      event.dataTransfer.effectAllowed = 'move';\n      event.dataTransfer.setData('text/plain', JSON.stringify(data));\n    }\n\n    // 添加拖拽样式\n    document.body.classList.add('is-dragging');\n    this.highlightDropZones();\n  }\n\n  // 结束拖拽\n  endDrag() {\n    this.dragData = null;\n    document.body.classList.remove('is-dragging');\n    this.removeDropZoneHighlight();\n  }\n\n  // 高亮拖拽区域\n  highlightDropZones() {\n    this.dropZones.forEach(zone => {\n      zone.classList.add('drop-zone-active');\n    });\n  }\n\n  // 移除高亮\n  removeDropZoneHighlight() {\n    this.dropZones.forEach(zone => {\n      zone.classList.remove('drop-zone-active', 'drop-zone-hover');\n    });\n  }\n\n  // 注册拖拽区域\n  registerDropZone(element) {\n    this.dropZones.add(element);\n  }\n\n  // 取消注册拖拽区域\n  unregisterDropZone(element) {\n    this.dropZones.delete(element);\n  }\n\n  // 处理拖拽进入\n  handleDragEnter(event) {\n    event.preventDefault();\n    event.target.classList.add('drop-zone-hover');\n  }\n\n  // 处理拖拽离开\n  handleDragLeave(event) {\n    event.target.classList.remove('drop-zone-hover');\n  }\n\n  // 处理拖拽悬停\n  handleDragOver(event) {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }\n\n  // 处理拖拽放置\n  handleDrop(event, onDrop) {\n    event.preventDefault();\n    event.target.classList.remove('drop-zone-hover');\n    let dragData = this.dragData;\n    if (!dragData) {\n      try {\n        dragData = JSON.parse(event.dataTransfer.getData('text/plain'));\n      } catch (e) {\n        console.error('Invalid drag data:', e);\n        return;\n      }\n    }\n    if (onDrop) {\n      onDrop(dragData);\n    }\n    this.endDrag();\n  }\n}\n\n// 全局拖拽处理器实例\nexport const globalDragHandler = new DragDropHandler();\n\n/**\n * 验证拖拽数据类型\n */\nexport function validateDragData(dragData, targetType) {\n  if (!dragData || !dragData.columnType) {\n    return false;\n  }\n  const compatibilityMap = {\n    'x-axis': ['string', 'number', 'date'],\n    'y-axis': ['number'],\n    'series': ['string'],\n    'size': ['number'],\n    'color': ['string', 'number']\n  };\n  const allowedTypes = compatibilityMap[targetType] || [];\n  return allowedTypes.includes(dragData.columnType);\n}\n\n/**\n * 生成拖拽数据对象\n */\nexport function createDragData(column, fileInfo) {\n  return {\n    columnName: column.name,\n    columnType: column.type,\n    fileName: fileInfo.name,\n    fileId: fileInfo.id,\n    sampleData: column.sampleData || []\n  };\n}","map":{"version":3,"names":["DragDropHandler","constructor","dragData","dropZones","Set","startDrag","data","event","dataTransfer","effectAllowed","setData","JSON","stringify","document","body","classList","add","highlightDropZones","endDrag","remove","removeDropZoneHighlight","forEach","zone","registerDropZone","element","unregisterDropZone","delete","handleDragEnter","preventDefault","target","handleDragLeave","handleDragOver","dropEffect","handleDrop","onDrop","parse","getData","e","console","error","globalDragHandler","validateDragData","targetType","columnType","compatibilityMap","allowedTypes","includes","createDragData","column","fileInfo","columnName","name","type","fileName","fileId","id","sampleData"],"sources":["D:/Learning Material/Git/Fuck-Charts/newArchitecture/frontend_vue_design/src/utils/dragDropUtils.js"],"sourcesContent":["/* eslint-disable */\n\n/**\n * 拖拽工具类\n * 处理数据映射的拖拽功能\n */\nexport class DragDropHandler {\n  constructor() {\n    this.dragData = null\n    this.dropZones = new Set()\n  }\n\n  // 开始拖拽\n  startDrag(data, event) {\n    this.dragData = data\n    if (event.dataTransfer) {\n      event.dataTransfer.effectAllowed = 'move'\n      event.dataTransfer.setData('text/plain', JSON.stringify(data))\n    }\n    \n    // 添加拖拽样式\n    document.body.classList.add('is-dragging')\n    this.highlightDropZones()\n  }\n\n  // 结束拖拽\n  endDrag() {\n    this.dragData = null\n    document.body.classList.remove('is-dragging')\n    this.removeDropZoneHighlight()\n  }\n\n  // 高亮拖拽区域\n  highlightDropZones() {\n    this.dropZones.forEach(zone => {\n      zone.classList.add('drop-zone-active')\n    })\n  }\n\n  // 移除高亮\n  removeDropZoneHighlight() {\n    this.dropZones.forEach(zone => {\n      zone.classList.remove('drop-zone-active', 'drop-zone-hover')\n    })\n  }\n\n  // 注册拖拽区域\n  registerDropZone(element) {\n    this.dropZones.add(element)\n  }\n\n  // 取消注册拖拽区域\n  unregisterDropZone(element) {\n    this.dropZones.delete(element)\n  }\n\n  // 处理拖拽进入\n  handleDragEnter(event) {\n    event.preventDefault()\n    event.target.classList.add('drop-zone-hover')\n  }\n\n  // 处理拖拽离开\n  handleDragLeave(event) {\n    event.target.classList.remove('drop-zone-hover')\n  }\n\n  // 处理拖拽悬停\n  handleDragOver(event) {\n    event.preventDefault()\n    event.dataTransfer.dropEffect = 'move'\n  }\n\n  // 处理拖拽放置\n  handleDrop(event, onDrop) {\n    event.preventDefault()\n    event.target.classList.remove('drop-zone-hover')\n    \n    let dragData = this.dragData\n    if (!dragData) {\n      try {\n        dragData = JSON.parse(event.dataTransfer.getData('text/plain'))\n      } catch (e) {\n        console.error('Invalid drag data:', e)\n        return\n      }\n    }\n    \n    if (onDrop) {\n      onDrop(dragData)\n    }\n    \n    this.endDrag()\n  }\n}\n\n// 全局拖拽处理器实例\nexport const globalDragHandler = new DragDropHandler()\n\n/**\n * 验证拖拽数据类型\n */\nexport function validateDragData(dragData, targetType) {\n  if (!dragData || !dragData.columnType) {\n    return false\n  }\n\n  const compatibilityMap = {\n    'x-axis': ['string', 'number', 'date'],\n    'y-axis': ['number'],\n    'series': ['string'],\n    'size': ['number'],\n    'color': ['string', 'number']\n  }\n\n  const allowedTypes = compatibilityMap[targetType] || []\n  return allowedTypes.includes(dragData.columnType)\n}\n\n/**\n * 生成拖拽数据对象\n */\nexport function createDragData(column, fileInfo) {\n  return {\n    columnName: column.name,\n    columnType: column.type,\n    fileName: fileInfo.name,\n    fileId: fileInfo.id,\n    sampleData: column.sampleData || []\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}